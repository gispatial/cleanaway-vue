{"remainingRequest":"/Users/crocslut/Desktop/Git/main-cleanaway-pwa/node_modules/babel-loader/lib/index.js!/Users/crocslut/Desktop/Git/main-cleanaway-pwa/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/crocslut/Desktop/Git/main-cleanaway-pwa/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/crocslut/Desktop/Git/main-cleanaway-pwa/src/components/inputnumber/InputNumber.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/crocslut/Desktop/Git/main-cleanaway-pwa/src/components/inputnumber/InputNumber.vue","mtime":1634589566223},{"path":"/Users/crocslut/Desktop/Git/main-cleanaway-pwa/node_modules/cache-loader/dist/cjs.js","mtime":1634585934434},{"path":"/Users/crocslut/Desktop/Git/main-cleanaway-pwa/node_modules/babel-loader/lib/index.js","mtime":1634585934594},{"path":"/Users/crocslut/Desktop/Git/main-cleanaway-pwa/node_modules/cache-loader/dist/cjs.js","mtime":1634585934434},{"path":"/Users/crocslut/Desktop/Git/main-cleanaway-pwa/node_modules/vue-loader-v16/dist/index.js","mtime":1634585949898}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2Nyb2NzbHV0L0Rlc2t0b3AvR2l0L21haW4tY2xlYW5hd2F5LXB3YS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL1VzZXJzL2Nyb2NzbHV0L0Rlc2t0b3AvR2l0L21haW4tY2xlYW5hd2F5LXB3YS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGVhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNlYXJjaC5qcyI7CmltcG9ydCBJbnB1dFRleHQgZnJvbSAncHJpbWV2dWUvaW5wdXR0ZXh0JzsKaW1wb3J0IEJ1dHRvbiBmcm9tICdwcmltZXZ1ZS9idXR0b24nOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0lucHV0TnVtYmVyJywKICBpbmhlcml0QXR0cnM6IGZhbHNlLAogIGVtaXRzOiBbJ3VwZGF0ZTptb2RlbFZhbHVlJywgJ2lucHV0J10sCiAgcHJvcHM6IHsKICAgIG1vZGVsVmFsdWU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgZm9ybWF0OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBzaG93QnV0dG9uczogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGJ1dHRvbkxheW91dDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdzdGFja2VkJwogICAgfSwKICAgIGluY3JlbWVudEJ1dHRvbkNsYXNzOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIGRlY3JlbWVudEJ1dHRvbkNsYXNzOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIGluY3JlbWVudEJ1dHRvbkljb246IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAncGkgcGktYW5nbGUtdXAnCiAgICB9LAogICAgZGVjcmVtZW50QnV0dG9uSWNvbjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdwaSBwaS1hbmdsZS1kb3duJwogICAgfSwKICAgIGxvY2FsZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZAogICAgfSwKICAgIGxvY2FsZU1hdGNoZXI6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiB1bmRlZmluZWQKICAgIH0sCiAgICBtb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2RlY2ltYWwnCiAgICB9LAogICAgcHJlZml4OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIHN1ZmZpeDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBjdXJyZW5jeTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZAogICAgfSwKICAgIGN1cnJlbmN5RGlzcGxheTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZAogICAgfSwKICAgIHVzZUdyb3VwaW5nOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBtaW5GcmFjdGlvbkRpZ2l0czogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZAogICAgfSwKICAgIG1heEZyYWN0aW9uRGlnaXRzOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogdW5kZWZpbmVkCiAgICB9LAogICAgbWluOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIG1heDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBzdGVwOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMQogICAgfSwKICAgIGFsbG93RW1wdHk6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHN0eWxlOiBudWxsLAogICAgY2xhc3M6IG51bGwsCiAgICBpbnB1dFN0eWxlOiBudWxsLAogICAgaW5wdXRDbGFzczogbnVsbAogIH0sCiAgbnVtYmVyRm9ybWF0OiBudWxsLAogIF9udW1lcmFsOiBudWxsLAogIF9kZWNpbWFsOiBudWxsLAogIF9ncm91cDogbnVsbCwKICBfbWludXNTaWduOiBudWxsLAogIF9jdXJyZW5jeTogbnVsbCwKICBfc3VmZml4OiBudWxsLAogIF9wcmVmaXg6IG51bGwsCiAgX2luZGV4OiBudWxsLAogIGdyb3VwQ2hhcjogJycsCiAgaXNTcGVjaWFsQ2hhcjogbnVsbCwKICBwcmVmaXhDaGFyOiBudWxsLAogIHN1ZmZpeENoYXI6IG51bGwsCiAgdGltZXI6IG51bGwsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvY3VzZWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGxvY2FsZTogZnVuY3Rpb24gbG9jYWxlKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICB0aGlzLnVwZGF0ZUNvbnN0cnVjdFBhcnNlcihuZXdWYWx1ZSwgb2xkVmFsdWUpOwogICAgfSwKICAgIGxvY2FsZU1hdGNoZXI6IGZ1bmN0aW9uIGxvY2FsZU1hdGNoZXIobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIHRoaXMudXBkYXRlQ29uc3RydWN0UGFyc2VyKG5ld1ZhbHVlLCBvbGRWYWx1ZSk7CiAgICB9LAogICAgbW9kZTogZnVuY3Rpb24gbW9kZShuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgdGhpcy51cGRhdGVDb25zdHJ1Y3RQYXJzZXIobmV3VmFsdWUsIG9sZFZhbHVlKTsKICAgIH0sCiAgICBjdXJyZW5jeTogZnVuY3Rpb24gY3VycmVuY3kobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIHRoaXMudXBkYXRlQ29uc3RydWN0UGFyc2VyKG5ld1ZhbHVlLCBvbGRWYWx1ZSk7CiAgICB9LAogICAgY3VycmVuY3lEaXNwbGF5OiBmdW5jdGlvbiBjdXJyZW5jeURpc3BsYXkobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIHRoaXMudXBkYXRlQ29uc3RydWN0UGFyc2VyKG5ld1ZhbHVlLCBvbGRWYWx1ZSk7CiAgICB9LAogICAgdXNlR3JvdXBpbmc6IGZ1bmN0aW9uIHVzZUdyb3VwaW5nKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICB0aGlzLnVwZGF0ZUNvbnN0cnVjdFBhcnNlcihuZXdWYWx1ZSwgb2xkVmFsdWUpOwogICAgfSwKICAgIG1pbkZyYWN0aW9uRGlnaXRzOiBmdW5jdGlvbiBtaW5GcmFjdGlvbkRpZ2l0cyhuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgdGhpcy51cGRhdGVDb25zdHJ1Y3RQYXJzZXIobmV3VmFsdWUsIG9sZFZhbHVlKTsKICAgIH0sCiAgICBtYXhGcmFjdGlvbkRpZ2l0czogZnVuY3Rpb24gbWF4RnJhY3Rpb25EaWdpdHMobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIHRoaXMudXBkYXRlQ29uc3RydWN0UGFyc2VyKG5ld1ZhbHVlLCBvbGRWYWx1ZSk7CiAgICB9LAogICAgc3VmZml4OiBmdW5jdGlvbiBzdWZmaXgobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIHRoaXMudXBkYXRlQ29uc3RydWN0UGFyc2VyKG5ld1ZhbHVlLCBvbGRWYWx1ZSk7CiAgICB9LAogICAgcHJlZml4OiBmdW5jdGlvbiBwcmVmaXgobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIHRoaXMudXBkYXRlQ29uc3RydWN0UGFyc2VyKG5ld1ZhbHVlLCBvbGRWYWx1ZSk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5jb25zdHJ1Y3RQYXJzZXIoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldE9wdGlvbnM6IGZ1bmN0aW9uIGdldE9wdGlvbnMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbG9jYWxlTWF0Y2hlcjogdGhpcy5sb2NhbGVNYXRjaGVyLAogICAgICAgIHN0eWxlOiB0aGlzLm1vZGUsCiAgICAgICAgY3VycmVuY3k6IHRoaXMuY3VycmVuY3ksCiAgICAgICAgY3VycmVuY3lEaXNwbGF5OiB0aGlzLmN1cnJlbmN5RGlzcGxheSwKICAgICAgICB1c2VHcm91cGluZzogdGhpcy51c2VHcm91cGluZywKICAgICAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IHRoaXMubWluRnJhY3Rpb25EaWdpdHMsCiAgICAgICAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiB0aGlzLm1heEZyYWN0aW9uRGlnaXRzCiAgICAgIH07CiAgICB9LAogICAgY29uc3RydWN0UGFyc2VyOiBmdW5jdGlvbiBjb25zdHJ1Y3RQYXJzZXIoKSB7CiAgICAgIHRoaXMubnVtYmVyRm9ybWF0ID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KHRoaXMubG9jYWxlLCB0aGlzLmdldE9wdGlvbnMoKSk7CgogICAgICB2YXIgbnVtZXJhbHMgPSBfdG9Db25zdW1hYmxlQXJyYXkobmV3IEludGwuTnVtYmVyRm9ybWF0KHRoaXMubG9jYWxlLCB7CiAgICAgICAgdXNlR3JvdXBpbmc6IGZhbHNlCiAgICAgIH0pLmZvcm1hdCg5ODc2NTQzMjEwKSkucmV2ZXJzZSgpOwoKICAgICAgdmFyIGluZGV4ID0gbmV3IE1hcChudW1lcmFscy5tYXAoZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgICByZXR1cm4gW2QsIGldOwogICAgICB9KSk7CiAgICAgIHRoaXMuX251bWVyYWwgPSBuZXcgUmVnRXhwKCJbIi5jb25jYXQobnVtZXJhbHMuam9pbignJyksICJdIiksICdnJyk7CiAgICAgIHRoaXMuX2dyb3VwID0gdGhpcy5nZXRHcm91cGluZ0V4cHJlc3Npb24oKTsKICAgICAgdGhpcy5fbWludXNTaWduID0gdGhpcy5nZXRNaW51c1NpZ25FeHByZXNzaW9uKCk7CiAgICAgIHRoaXMuX2N1cnJlbmN5ID0gdGhpcy5nZXRDdXJyZW5jeUV4cHJlc3Npb24oKTsKICAgICAgdGhpcy5fZGVjaW1hbCA9IHRoaXMuZ2V0RGVjaW1hbEV4cHJlc3Npb24oKTsKICAgICAgdGhpcy5fc3VmZml4ID0gdGhpcy5nZXRTdWZmaXhFeHByZXNzaW9uKCk7CiAgICAgIHRoaXMuX3ByZWZpeCA9IHRoaXMuZ2V0UHJlZml4RXhwcmVzc2lvbigpOwoKICAgICAgdGhpcy5faW5kZXggPSBmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBpbmRleC5nZXQoZCk7CiAgICAgIH07CiAgICB9LAogICAgdXBkYXRlQ29uc3RydWN0UGFyc2VyOiBmdW5jdGlvbiB1cGRhdGVDb25zdHJ1Y3RQYXJzZXIobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIGlmIChuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHsKICAgICAgICB0aGlzLmNvbnN0cnVjdFBhcnNlcigpOwogICAgICB9CiAgICB9LAogICAgZXNjYXBlUmVnRXhwOiBmdW5jdGlvbiBlc2NhcGVSZWdFeHAodGV4dCkgewogICAgICByZXR1cm4gdGV4dC5yZXBsYWNlKC9bLVtcXXt9KCkqKz8uLFxcXiR8I1xzXS9nLCAnXFwkJicpOwogICAgfSwKICAgIGdldERlY2ltYWxFeHByZXNzaW9uOiBmdW5jdGlvbiBnZXREZWNpbWFsRXhwcmVzc2lvbigpIHsKICAgICAgdmFyIGZvcm1hdHRlciA9IG5ldyBJbnRsLk51bWJlckZvcm1hdCh0aGlzLmxvY2FsZSwgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLmdldE9wdGlvbnMoKSksIHt9LCB7CiAgICAgICAgdXNlR3JvdXBpbmc6IGZhbHNlCiAgICAgIH0pKTsKICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoIlsiLmNvbmNhdChmb3JtYXR0ZXIuZm9ybWF0KDEuMSkucmVwbGFjZSh0aGlzLl9jdXJyZW5jeSwgJycpLnRyaW0oKS5yZXBsYWNlKHRoaXMuX251bWVyYWwsICcnKSwgIl0iKSwgJ2cnKTsKICAgIH0sCiAgICBnZXRHcm91cGluZ0V4cHJlc3Npb246IGZ1bmN0aW9uIGdldEdyb3VwaW5nRXhwcmVzc2lvbigpIHsKICAgICAgdmFyIGZvcm1hdHRlciA9IG5ldyBJbnRsLk51bWJlckZvcm1hdCh0aGlzLmxvY2FsZSwgewogICAgICAgIHVzZUdyb3VwaW5nOiB0cnVlCiAgICAgIH0pOwogICAgICB0aGlzLmdyb3VwQ2hhciA9IGZvcm1hdHRlci5mb3JtYXQoMTAwMDAwMCkudHJpbSgpLnJlcGxhY2UodGhpcy5fbnVtZXJhbCwgJycpLmNoYXJBdCgwKTsKICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoIlsiLmNvbmNhdCh0aGlzLmdyb3VwQ2hhciwgIl0iKSwgJ2cnKTsKICAgIH0sCiAgICBnZXRNaW51c1NpZ25FeHByZXNzaW9uOiBmdW5jdGlvbiBnZXRNaW51c1NpZ25FeHByZXNzaW9uKCkgewogICAgICB2YXIgZm9ybWF0dGVyID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KHRoaXMubG9jYWxlLCB7CiAgICAgICAgdXNlR3JvdXBpbmc6IGZhbHNlCiAgICAgIH0pOwogICAgICByZXR1cm4gbmV3IFJlZ0V4cCgiWyIuY29uY2F0KGZvcm1hdHRlci5mb3JtYXQoLTEpLnRyaW0oKS5yZXBsYWNlKHRoaXMuX251bWVyYWwsICcnKSwgIl0iKSwgJ2cnKTsKICAgIH0sCiAgICBnZXRDdXJyZW5jeUV4cHJlc3Npb246IGZ1bmN0aW9uIGdldEN1cnJlbmN5RXhwcmVzc2lvbigpIHsKICAgICAgaWYgKHRoaXMuY3VycmVuY3kpIHsKICAgICAgICB2YXIgZm9ybWF0dGVyID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KHRoaXMubG9jYWxlLCB7CiAgICAgICAgICBzdHlsZTogJ2N1cnJlbmN5JywKICAgICAgICAgIGN1cnJlbmN5OiB0aGlzLmN1cnJlbmN5LAogICAgICAgICAgY3VycmVuY3lEaXNwbGF5OiB0aGlzLmN1cnJlbmN5RGlzcGxheSwKICAgICAgICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMCwKICAgICAgICAgIG1heGltdW1GcmFjdGlvbkRpZ2l0czogMAogICAgICAgIH0pOwogICAgICAgIHJldHVybiBuZXcgUmVnRXhwKCJbIi5jb25jYXQoZm9ybWF0dGVyLmZvcm1hdCgxKS5yZXBsYWNlKC9ccy9nLCAnJykucmVwbGFjZSh0aGlzLl9udW1lcmFsLCAnJykucmVwbGFjZSh0aGlzLl9ncm91cCwgJycpLCAiXSIpLCAnZycpOwogICAgICB9CgogICAgICByZXR1cm4gbmV3IFJlZ0V4cCgiW10iLCAnZycpOwogICAgfSwKICAgIGdldFByZWZpeEV4cHJlc3Npb246IGZ1bmN0aW9uIGdldFByZWZpeEV4cHJlc3Npb24oKSB7CiAgICAgIGlmICh0aGlzLnByZWZpeCkgewogICAgICAgIHRoaXMucHJlZml4Q2hhciA9IHRoaXMucHJlZml4OwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBmb3JtYXR0ZXIgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQodGhpcy5sb2NhbGUsIHsKICAgICAgICAgIHN0eWxlOiB0aGlzLm1vZGUsCiAgICAgICAgICBjdXJyZW5jeTogdGhpcy5jdXJyZW5jeSwKICAgICAgICAgIGN1cnJlbmN5RGlzcGxheTogdGhpcy5jdXJyZW5jeURpc3BsYXkKICAgICAgICB9KTsKICAgICAgICB0aGlzLnByZWZpeENoYXIgPSBmb3JtYXR0ZXIuZm9ybWF0KDEpLnNwbGl0KCcxJylbMF07CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgUmVnRXhwKCIiLmNvbmNhdCh0aGlzLmVzY2FwZVJlZ0V4cCh0aGlzLnByZWZpeENoYXIgfHwgJycpKSwgJ2cnKTsKICAgIH0sCiAgICBnZXRTdWZmaXhFeHByZXNzaW9uOiBmdW5jdGlvbiBnZXRTdWZmaXhFeHByZXNzaW9uKCkgewogICAgICBpZiAodGhpcy5zdWZmaXgpIHsKICAgICAgICB0aGlzLnN1ZmZpeENoYXIgPSB0aGlzLnN1ZmZpeDsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgZm9ybWF0dGVyID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KHRoaXMubG9jYWxlLCB7CiAgICAgICAgICBzdHlsZTogdGhpcy5tb2RlLAogICAgICAgICAgY3VycmVuY3k6IHRoaXMuY3VycmVuY3ksCiAgICAgICAgICBjdXJyZW5jeURpc3BsYXk6IHRoaXMuY3VycmVuY3lEaXNwbGF5LAogICAgICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAwLAogICAgICAgICAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5zdWZmaXhDaGFyID0gZm9ybWF0dGVyLmZvcm1hdCgxKS5zcGxpdCgnMScpWzFdOwogICAgICB9CgogICAgICByZXR1cm4gbmV3IFJlZ0V4cCgiIi5jb25jYXQodGhpcy5lc2NhcGVSZWdFeHAodGhpcy5zdWZmaXhDaGFyIHx8ICcnKSksICdnJyk7CiAgICB9LAogICAgZm9ybWF0VmFsdWU6IGZ1bmN0aW9uIGZvcm1hdFZhbHVlKHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7CiAgICAgICAgaWYgKHZhbHVlID09PSAnLScpIHsKICAgICAgICAgIC8vIE1pbnVzIHNpZ24KICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmZvcm1hdCkgewogICAgICAgICAgdmFyIGZvcm1hdHRlciA9IG5ldyBJbnRsLk51bWJlckZvcm1hdCh0aGlzLmxvY2FsZSwgdGhpcy5nZXRPcHRpb25zKCkpOwogICAgICAgICAgdmFyIGZvcm1hdHRlZFZhbHVlID0gZm9ybWF0dGVyLmZvcm1hdCh2YWx1ZSk7CgogICAgICAgICAgaWYgKHRoaXMucHJlZml4KSB7CiAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlID0gdGhpcy5wcmVmaXggKyBmb3JtYXR0ZWRWYWx1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodGhpcy5zdWZmaXgpIHsKICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSBmb3JtYXR0ZWRWYWx1ZSArIHRoaXMuc3VmZml4OwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBmb3JtYXR0ZWRWYWx1ZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpOwogICAgICB9CgogICAgICByZXR1cm4gJyc7CiAgICB9LAogICAgcGFyc2VWYWx1ZTogZnVuY3Rpb24gcGFyc2VWYWx1ZSh0ZXh0KSB7CiAgICAgIHZhciBmaWx0ZXJlZFRleHQgPSB0ZXh0LnJlcGxhY2UodGhpcy5fc3VmZml4LCAnJykucmVwbGFjZSh0aGlzLl9wcmVmaXgsICcnKS50cmltKCkucmVwbGFjZSgvXHMvZywgJycpLnJlcGxhY2UodGhpcy5fY3VycmVuY3ksICcnKS5yZXBsYWNlKHRoaXMuX2dyb3VwLCAnJykucmVwbGFjZSh0aGlzLl9taW51c1NpZ24sICctJykucmVwbGFjZSh0aGlzLl9kZWNpbWFsLCAnLicpLnJlcGxhY2UodGhpcy5fbnVtZXJhbCwgdGhpcy5faW5kZXgpOwoKICAgICAgaWYgKGZpbHRlcmVkVGV4dCkgewogICAgICAgIGlmIChmaWx0ZXJlZFRleHQgPT09ICctJykgLy8gTWludXMgc2lnbgogICAgICAgICAgcmV0dXJuIGZpbHRlcmVkVGV4dDsKICAgICAgICB2YXIgcGFyc2VkVmFsdWUgPSArZmlsdGVyZWRUZXh0OwogICAgICAgIHJldHVybiBpc05hTihwYXJzZWRWYWx1ZSkgPyBudWxsIDogcGFyc2VkVmFsdWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICAgIHJlcGVhdDogZnVuY3Rpb24gcmVwZWF0KGV2ZW50LCBpbnRlcnZhbCwgZGlyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgaSA9IGludGVydmFsIHx8IDUwMDsKICAgICAgdGhpcy5jbGVhclRpbWVyKCk7CiAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5yZXBlYXQoZXZlbnQsIDQwLCBkaXIpOwogICAgICB9LCBpKTsKICAgICAgdGhpcy5zcGluKGV2ZW50LCBkaXIpOwogICAgfSwKICAgIHNwaW46IGZ1bmN0aW9uIHNwaW4oZXZlbnQsIGRpcikgewogICAgICBpZiAodGhpcy4kcmVmcy5pbnB1dCkgewogICAgICAgIHZhciBzdGVwID0gdGhpcy5zdGVwICogZGlyOwogICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSB0aGlzLnBhcnNlVmFsdWUodGhpcy4kcmVmcy5pbnB1dC4kZWwudmFsdWUpIHx8IDA7CiAgICAgICAgdmFyIG5ld1ZhbHVlID0gdGhpcy52YWxpZGF0ZVZhbHVlKGN1cnJlbnRWYWx1ZSArIHN0ZXApOwogICAgICAgIHRoaXMudXBkYXRlSW5wdXQobmV3VmFsdWUsIG51bGwsICdzcGluJyk7CiAgICAgICAgdGhpcy51cGRhdGVNb2RlbChldmVudCwgbmV3VmFsdWUpOwogICAgICAgIHRoaXMuaGFuZGxlT25JbnB1dChldmVudCwgY3VycmVudFZhbHVlLCBuZXdWYWx1ZSk7CiAgICAgIH0KICAgIH0sCiAgICBvblVwQnV0dG9uTW91c2VEb3duOiBmdW5jdGlvbiBvblVwQnV0dG9uTW91c2VEb3duKGV2ZW50KSB7CiAgICAgIGlmICghdGhpcy4kYXR0cnMuZGlzYWJsZWQpIHsKICAgICAgICB0aGlzLiRyZWZzLmlucHV0LiRlbC5mb2N1cygpOwogICAgICAgIHRoaXMucmVwZWF0KGV2ZW50LCBudWxsLCAxKTsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CiAgICB9LAogICAgb25VcEJ1dHRvbk1vdXNlVXA6IGZ1bmN0aW9uIG9uVXBCdXR0b25Nb3VzZVVwKCkgewogICAgICBpZiAoIXRoaXMuJGF0dHJzLmRpc2FibGVkKSB7CiAgICAgICAgdGhpcy5jbGVhclRpbWVyKCk7CiAgICAgIH0KICAgIH0sCiAgICBvblVwQnV0dG9uTW91c2VMZWF2ZTogZnVuY3Rpb24gb25VcEJ1dHRvbk1vdXNlTGVhdmUoKSB7CiAgICAgIGlmICghdGhpcy4kYXR0cnMuZGlzYWJsZWQpIHsKICAgICAgICB0aGlzLmNsZWFyVGltZXIoKTsKICAgICAgfQogICAgfSwKICAgIG9uVXBCdXR0b25LZXlVcDogZnVuY3Rpb24gb25VcEJ1dHRvbktleVVwKCkgewogICAgICBpZiAoIXRoaXMuJGF0dHJzLmRpc2FibGVkKSB7CiAgICAgICAgdGhpcy5jbGVhclRpbWVyKCk7CiAgICAgIH0KICAgIH0sCiAgICBvblVwQnV0dG9uS2V5RG93bjogZnVuY3Rpb24gb25VcEJ1dHRvbktleURvd24oZXZlbnQpIHsKICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDMyIHx8IGV2ZW50LmtleUNvZGUgPT09IDEzKSB7CiAgICAgICAgdGhpcy5yZXBlYXQoZXZlbnQsIG51bGwsIDEpOwogICAgICB9CiAgICB9LAogICAgb25Eb3duQnV0dG9uTW91c2VEb3duOiBmdW5jdGlvbiBvbkRvd25CdXR0b25Nb3VzZURvd24oZXZlbnQpIHsKICAgICAgaWYgKCF0aGlzLiRhdHRycy5kaXNhYmxlZCkgewogICAgICAgIHRoaXMuJHJlZnMuaW5wdXQuJGVsLmZvY3VzKCk7CiAgICAgICAgdGhpcy5yZXBlYXQoZXZlbnQsIG51bGwsIC0xKTsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CiAgICB9LAogICAgb25Eb3duQnV0dG9uTW91c2VVcDogZnVuY3Rpb24gb25Eb3duQnV0dG9uTW91c2VVcCgpIHsKICAgICAgaWYgKCF0aGlzLiRhdHRycy5kaXNhYmxlZCkgewogICAgICAgIHRoaXMuY2xlYXJUaW1lcigpOwogICAgICB9CiAgICB9LAogICAgb25Eb3duQnV0dG9uTW91c2VMZWF2ZTogZnVuY3Rpb24gb25Eb3duQnV0dG9uTW91c2VMZWF2ZSgpIHsKICAgICAgaWYgKCF0aGlzLiRhdHRycy5kaXNhYmxlZCkgewogICAgICAgIHRoaXMuY2xlYXJUaW1lcigpOwogICAgICB9CiAgICB9LAogICAgb25Eb3duQnV0dG9uS2V5VXA6IGZ1bmN0aW9uIG9uRG93bkJ1dHRvbktleVVwKCkgewogICAgICBpZiAoIXRoaXMuJGF0dHJzLmRpc2FibGVkKSB7CiAgICAgICAgdGhpcy5jbGVhclRpbWVyKCk7CiAgICAgIH0KICAgIH0sCiAgICBvbkRvd25CdXR0b25LZXlEb3duOiBmdW5jdGlvbiBvbkRvd25CdXR0b25LZXlEb3duKGV2ZW50KSB7CiAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAzMiB8fCBldmVudC5rZXlDb2RlID09PSAxMykgewogICAgICAgIHRoaXMucmVwZWF0KGV2ZW50LCBudWxsLCAtMSk7CiAgICAgIH0KICAgIH0sCiAgICBvblVzZXJJbnB1dDogZnVuY3Rpb24gb25Vc2VySW5wdXQoKSB7CiAgICAgIGlmICh0aGlzLmlzU3BlY2lhbENoYXIpIHsKICAgICAgICB0aGlzLiRyZWZzLmlucHV0LiRlbC52YWx1ZSA9IHRoaXMubGFzdFZhbHVlOwogICAgICB9CgogICAgICB0aGlzLmlzU3BlY2lhbENoYXIgPSBmYWxzZTsKICAgIH0sCiAgICBvbklucHV0S2V5RG93bjogZnVuY3Rpb24gb25JbnB1dEtleURvd24oZXZlbnQpIHsKICAgICAgdGhpcy5sYXN0VmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7CgogICAgICBpZiAoZXZlbnQuc2hpZnRLZXkgfHwgZXZlbnQuYWx0S2V5KSB7CiAgICAgICAgdGhpcy5pc1NwZWNpYWxDaGFyID0gdHJ1ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBzZWxlY3Rpb25TdGFydCA9IGV2ZW50LnRhcmdldC5zZWxlY3Rpb25TdGFydDsKICAgICAgdmFyIHNlbGVjdGlvbkVuZCA9IGV2ZW50LnRhcmdldC5zZWxlY3Rpb25FbmQ7CiAgICAgIHZhciBpbnB1dFZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlOwogICAgICB2YXIgbmV3VmFsdWVTdHIgPSBudWxsOwoKICAgICAgaWYgKGV2ZW50LmFsdEtleSkgewogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH0KCiAgICAgIHN3aXRjaCAoZXZlbnQud2hpY2gpIHsKICAgICAgICAvL3VwCiAgICAgICAgY2FzZSAzODoKICAgICAgICAgIHRoaXMuc3BpbihldmVudCwgMSk7CiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgLy9kb3duCgogICAgICAgIGNhc2UgNDA6CiAgICAgICAgICB0aGlzLnNwaW4oZXZlbnQsIC0xKTsKICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICBicmVhazsKICAgICAgICAvL2xlZnQKCiAgICAgICAgY2FzZSAzNzoKICAgICAgICAgIGlmICghdGhpcy5pc051bWVyYWxDaGFyKGlucHV0VmFsdWUuY2hhckF0KHNlbGVjdGlvblN0YXJ0IC0gMSkpKSB7CiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CiAgICAgICAgLy9yaWdodAoKICAgICAgICBjYXNlIDM5OgogICAgICAgICAgaWYgKCF0aGlzLmlzTnVtZXJhbENoYXIoaW5wdXRWYWx1ZS5jaGFyQXQoc2VsZWN0aW9uU3RhcnQpKSkgewogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwogICAgICAgIC8vZW50ZXIKCiAgICAgICAgY2FzZSAxMzoKICAgICAgICAgIG5ld1ZhbHVlU3RyID0gdGhpcy52YWxpZGF0ZVZhbHVlKHRoaXMucGFyc2VWYWx1ZShpbnB1dFZhbHVlKSk7CiAgICAgICAgICB0aGlzLiRyZWZzLmlucHV0LiRlbC52YWx1ZSA9IHRoaXMuZm9ybWF0VmFsdWUobmV3VmFsdWVTdHIpOwogICAgICAgICAgdGhpcy4kcmVmcy5pbnB1dC4kZWwuc2V0QXR0cmlidXRlKCdhcmlhLXZhbHVlbm93JywgbmV3VmFsdWVTdHIpOwogICAgICAgICAgdGhpcy51cGRhdGVNb2RlbChldmVudCwgbmV3VmFsdWVTdHIpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgLy9iYWNrc3BhY2UKCiAgICAgICAgY2FzZSA4OgogICAgICAgICAgewogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgaWYgKHNlbGVjdGlvblN0YXJ0ID09PSBzZWxlY3Rpb25FbmQpIHsKICAgICAgICAgICAgICB2YXIgZGVsZXRlQ2hhciA9IGlucHV0VmFsdWUuY2hhckF0KHNlbGVjdGlvblN0YXJ0IC0gMSk7CgogICAgICAgICAgICAgIHZhciBfdGhpcyRnZXREZWNpbWFsQ2hhckkgPSB0aGlzLmdldERlY2ltYWxDaGFySW5kZXhlcyhpbnB1dFZhbHVlKSwKICAgICAgICAgICAgICAgICAgZGVjaW1hbENoYXJJbmRleCA9IF90aGlzJGdldERlY2ltYWxDaGFySS5kZWNpbWFsQ2hhckluZGV4LAogICAgICAgICAgICAgICAgICBkZWNpbWFsQ2hhckluZGV4V2l0aG91dFByZWZpeCA9IF90aGlzJGdldERlY2ltYWxDaGFySS5kZWNpbWFsQ2hhckluZGV4V2l0aG91dFByZWZpeDsKCiAgICAgICAgICAgICAgaWYgKHRoaXMuaXNOdW1lcmFsQ2hhcihkZWxldGVDaGFyKSkgewogICAgICAgICAgICAgICAgdmFyIGRlY2ltYWxMZW5ndGggPSB0aGlzLmdldERlY2ltYWxMZW5ndGgoaW5wdXRWYWx1ZSk7CgogICAgICAgICAgICAgICAgaWYgKHRoaXMuX2dyb3VwLnRlc3QoZGVsZXRlQ2hhcikpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5fZ3JvdXAubGFzdEluZGV4ID0gMDsKICAgICAgICAgICAgICAgICAgbmV3VmFsdWVTdHIgPSBpbnB1dFZhbHVlLnNsaWNlKDAsIHNlbGVjdGlvblN0YXJ0IC0gMikgKyBpbnB1dFZhbHVlLnNsaWNlKHNlbGVjdGlvblN0YXJ0IC0gMSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2RlY2ltYWwudGVzdChkZWxldGVDaGFyKSkgewogICAgICAgICAgICAgICAgICB0aGlzLl9kZWNpbWFsLmxhc3RJbmRleCA9IDA7CgogICAgICAgICAgICAgICAgICBpZiAoZGVjaW1hbExlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuaW5wdXQuJGVsLnNldFNlbGVjdGlvblJhbmdlKHNlbGVjdGlvblN0YXJ0IC0gMSwgc2VsZWN0aW9uU3RhcnQgLSAxKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZVN0ciA9IGlucHV0VmFsdWUuc2xpY2UoMCwgc2VsZWN0aW9uU3RhcnQgLSAxKSArIGlucHV0VmFsdWUuc2xpY2Uoc2VsZWN0aW9uU3RhcnQpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRlY2ltYWxDaGFySW5kZXggPiAwICYmIHNlbGVjdGlvblN0YXJ0ID4gZGVjaW1hbENoYXJJbmRleCkgewogICAgICAgICAgICAgICAgICB2YXIgaW5zZXJ0ZWRUZXh0ID0gdGhpcy5pc0RlY2ltYWxNb2RlKCkgJiYgKHRoaXMubWluRnJhY3Rpb25EaWdpdHMgfHwgMCkgPCBkZWNpbWFsTGVuZ3RoID8gJycgOiAnMCc7CiAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlU3RyID0gaW5wdXRWYWx1ZS5zbGljZSgwLCBzZWxlY3Rpb25TdGFydCAtIDEpICsgaW5zZXJ0ZWRUZXh0ICsgaW5wdXRWYWx1ZS5zbGljZShzZWxlY3Rpb25TdGFydCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRlY2ltYWxDaGFySW5kZXhXaXRob3V0UHJlZml4ID09PSAxKSB7CiAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlU3RyID0gaW5wdXRWYWx1ZS5zbGljZSgwLCBzZWxlY3Rpb25TdGFydCAtIDEpICsgJzAnICsgaW5wdXRWYWx1ZS5zbGljZShzZWxlY3Rpb25TdGFydCk7CiAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlU3RyID0gdGhpcy5wYXJzZVZhbHVlKG5ld1ZhbHVlU3RyKSA+IDAgPyBuZXdWYWx1ZVN0ciA6ICcnOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgbmV3VmFsdWVTdHIgPSBpbnB1dFZhbHVlLnNsaWNlKDAsIHNlbGVjdGlvblN0YXJ0IC0gMSkgKyBpbnB1dFZhbHVlLnNsaWNlKHNlbGVjdGlvblN0YXJ0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUoZXZlbnQsIG5ld1ZhbHVlU3RyLCBudWxsLCAnZGVsZXRlLXNpbmdsZScpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG5ld1ZhbHVlU3RyID0gdGhpcy5kZWxldGVSYW5nZShpbnB1dFZhbHVlLCBzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKTsKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKGV2ZW50LCBuZXdWYWx1ZVN0ciwgbnVsbCwgJ2RlbGV0ZS1yYW5nZScpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAvLyBkZWwKCiAgICAgICAgY2FzZSA0NjoKICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgaWYgKHNlbGVjdGlvblN0YXJ0ID09PSBzZWxlY3Rpb25FbmQpIHsKICAgICAgICAgICAgdmFyIF9kZWxldGVDaGFyID0gaW5wdXRWYWx1ZS5jaGFyQXQoc2VsZWN0aW9uU3RhcnQpOwoKICAgICAgICAgICAgdmFyIF90aGlzJGdldERlY2ltYWxDaGFySTIgPSB0aGlzLmdldERlY2ltYWxDaGFySW5kZXhlcyhpbnB1dFZhbHVlKSwKICAgICAgICAgICAgICAgIF9kZWNpbWFsQ2hhckluZGV4ID0gX3RoaXMkZ2V0RGVjaW1hbENoYXJJMi5kZWNpbWFsQ2hhckluZGV4LAogICAgICAgICAgICAgICAgX2RlY2ltYWxDaGFySW5kZXhXaXRob3V0UHJlZml4ID0gX3RoaXMkZ2V0RGVjaW1hbENoYXJJMi5kZWNpbWFsQ2hhckluZGV4V2l0aG91dFByZWZpeDsKCiAgICAgICAgICAgIGlmICh0aGlzLmlzTnVtZXJhbENoYXIoX2RlbGV0ZUNoYXIpKSB7CiAgICAgICAgICAgICAgdmFyIF9kZWNpbWFsTGVuZ3RoID0gdGhpcy5nZXREZWNpbWFsTGVuZ3RoKGlucHV0VmFsdWUpOwoKICAgICAgICAgICAgICBpZiAodGhpcy5fZ3JvdXAudGVzdChfZGVsZXRlQ2hhcikpIHsKICAgICAgICAgICAgICAgIHRoaXMuX2dyb3VwLmxhc3RJbmRleCA9IDA7CiAgICAgICAgICAgICAgICBuZXdWYWx1ZVN0ciA9IGlucHV0VmFsdWUuc2xpY2UoMCwgc2VsZWN0aW9uU3RhcnQpICsgaW5wdXRWYWx1ZS5zbGljZShzZWxlY3Rpb25TdGFydCArIDIpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fZGVjaW1hbC50ZXN0KF9kZWxldGVDaGFyKSkgewogICAgICAgICAgICAgICAgdGhpcy5fZGVjaW1hbC5sYXN0SW5kZXggPSAwOwoKICAgICAgICAgICAgICAgIGlmIChfZGVjaW1hbExlbmd0aCkgewogICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZXRTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb25TdGFydCArIDEsIHNlbGVjdGlvblN0YXJ0ICsgMSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBuZXdWYWx1ZVN0ciA9IGlucHV0VmFsdWUuc2xpY2UoMCwgc2VsZWN0aW9uU3RhcnQpICsgaW5wdXRWYWx1ZS5zbGljZShzZWxlY3Rpb25TdGFydCArIDEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSBpZiAoX2RlY2ltYWxDaGFySW5kZXggPiAwICYmIHNlbGVjdGlvblN0YXJ0ID4gX2RlY2ltYWxDaGFySW5kZXgpIHsKICAgICAgICAgICAgICAgIHZhciBfaW5zZXJ0ZWRUZXh0ID0gdGhpcy5pc0RlY2ltYWxNb2RlKCkgJiYgKHRoaXMubWluRnJhY3Rpb25EaWdpdHMgfHwgMCkgPCBfZGVjaW1hbExlbmd0aCA/ICcnIDogJzAnOwoKICAgICAgICAgICAgICAgIG5ld1ZhbHVlU3RyID0gaW5wdXRWYWx1ZS5zbGljZSgwLCBzZWxlY3Rpb25TdGFydCkgKyBfaW5zZXJ0ZWRUZXh0ICsgaW5wdXRWYWx1ZS5zbGljZShzZWxlY3Rpb25TdGFydCArIDEpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoX2RlY2ltYWxDaGFySW5kZXhXaXRob3V0UHJlZml4ID09PSAxKSB7CiAgICAgICAgICAgICAgICBuZXdWYWx1ZVN0ciA9IGlucHV0VmFsdWUuc2xpY2UoMCwgc2VsZWN0aW9uU3RhcnQpICsgJzAnICsgaW5wdXRWYWx1ZS5zbGljZShzZWxlY3Rpb25TdGFydCArIDEpOwogICAgICAgICAgICAgICAgbmV3VmFsdWVTdHIgPSB0aGlzLnBhcnNlVmFsdWUobmV3VmFsdWVTdHIpID4gMCA/IG5ld1ZhbHVlU3RyIDogJyc7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG5ld1ZhbHVlU3RyID0gaW5wdXRWYWx1ZS5zbGljZSgwLCBzZWxlY3Rpb25TdGFydCkgKyBpbnB1dFZhbHVlLnNsaWNlKHNlbGVjdGlvblN0YXJ0ICsgMSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKGV2ZW50LCBuZXdWYWx1ZVN0ciwgbnVsbCwgJ2RlbGV0ZS1iYWNrLXNpbmdsZScpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3VmFsdWVTdHIgPSB0aGlzLmRlbGV0ZVJhbmdlKGlucHV0VmFsdWUsIHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpOwogICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKGV2ZW50LCBuZXdWYWx1ZVN0ciwgbnVsbCwgJ2RlbGV0ZS1yYW5nZScpOwogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCiAgICBvbklucHV0S2V5UHJlc3M6IGZ1bmN0aW9uIG9uSW5wdXRLZXlQcmVzcyhldmVudCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgY29kZSA9IGV2ZW50LndoaWNoIHx8IGV2ZW50LmtleUNvZGU7CiAgICAgIHZhciBjaGFyID0gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlKTsKICAgICAgdmFyIGlzRGVjaW1hbFNpZ24gPSB0aGlzLmlzRGVjaW1hbFNpZ24oY2hhcik7CiAgICAgIHZhciBpc01pbnVzU2lnbiA9IHRoaXMuaXNNaW51c1NpZ24oY2hhcik7CgogICAgICBpZiAoNDggPD0gY29kZSAmJiBjb2RlIDw9IDU3IHx8IGlzTWludXNTaWduIHx8IGlzRGVjaW1hbFNpZ24pIHsKICAgICAgICB0aGlzLmluc2VydChldmVudCwgY2hhciwgewogICAgICAgICAgaXNEZWNpbWFsU2lnbjogaXNEZWNpbWFsU2lnbiwKICAgICAgICAgIGlzTWludXNTaWduOiBpc01pbnVzU2lnbgogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgb25QYXN0ZTogZnVuY3Rpb24gb25QYXN0ZShldmVudCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgZGF0YSA9IChldmVudC5jbGlwYm9hcmREYXRhIHx8IHdpbmRvd1snY2xpcGJvYXJkRGF0YSddKS5nZXREYXRhKCdUZXh0Jyk7CgogICAgICBpZiAoZGF0YSkgewogICAgICAgIHZhciBmaWx0ZXJlZERhdGEgPSB0aGlzLnBhcnNlVmFsdWUoZGF0YSk7CgogICAgICAgIGlmIChmaWx0ZXJlZERhdGEgIT0gbnVsbCkgewogICAgICAgICAgdGhpcy5pbnNlcnQoZXZlbnQsIGZpbHRlcmVkRGF0YS50b1N0cmluZygpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBhbGxvd01pbnVzU2lnbjogZnVuY3Rpb24gYWxsb3dNaW51c1NpZ24oKSB7CiAgICAgIHJldHVybiB0aGlzLm1pbiA9PT0gbnVsbCB8fCB0aGlzLm1pbiA8IDA7CiAgICB9LAogICAgaXNNaW51c1NpZ246IGZ1bmN0aW9uIGlzTWludXNTaWduKGNoYXIpIHsKICAgICAgaWYgKHRoaXMuX21pbnVzU2lnbi50ZXN0KGNoYXIpIHx8IGNoYXIgPT09ICctJykgewogICAgICAgIHRoaXMuX21pbnVzU2lnbi5sYXN0SW5kZXggPSAwOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgaXNEZWNpbWFsU2lnbjogZnVuY3Rpb24gaXNEZWNpbWFsU2lnbihjaGFyKSB7CiAgICAgIGlmICh0aGlzLl9kZWNpbWFsLnRlc3QoY2hhcikpIHsKICAgICAgICB0aGlzLl9kZWNpbWFsLmxhc3RJbmRleCA9IDA7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBpc0RlY2ltYWxNb2RlOiBmdW5jdGlvbiBpc0RlY2ltYWxNb2RlKCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlID09PSAnZGVjaW1hbCc7CiAgICB9LAogICAgZ2V0RGVjaW1hbENoYXJJbmRleGVzOiBmdW5jdGlvbiBnZXREZWNpbWFsQ2hhckluZGV4ZXModmFsKSB7CiAgICAgIHZhciBkZWNpbWFsQ2hhckluZGV4ID0gdmFsLnNlYXJjaCh0aGlzLl9kZWNpbWFsKTsKICAgICAgdGhpcy5fZGVjaW1hbC5sYXN0SW5kZXggPSAwOwogICAgICB2YXIgZmlsdGVyZWRWYWwgPSB2YWwucmVwbGFjZSh0aGlzLl9wcmVmaXgsICcnKS50cmltKCkucmVwbGFjZSgvXHMvZywgJycpLnJlcGxhY2UodGhpcy5fY3VycmVuY3ksICcnKTsKICAgICAgdmFyIGRlY2ltYWxDaGFySW5kZXhXaXRob3V0UHJlZml4ID0gZmlsdGVyZWRWYWwuc2VhcmNoKHRoaXMuX2RlY2ltYWwpOwogICAgICB0aGlzLl9kZWNpbWFsLmxhc3RJbmRleCA9IDA7CiAgICAgIHJldHVybiB7CiAgICAgICAgZGVjaW1hbENoYXJJbmRleDogZGVjaW1hbENoYXJJbmRleCwKICAgICAgICBkZWNpbWFsQ2hhckluZGV4V2l0aG91dFByZWZpeDogZGVjaW1hbENoYXJJbmRleFdpdGhvdXRQcmVmaXgKICAgICAgfTsKICAgIH0sCiAgICBnZXRDaGFySW5kZXhlczogZnVuY3Rpb24gZ2V0Q2hhckluZGV4ZXModmFsKSB7CiAgICAgIHZhciBkZWNpbWFsQ2hhckluZGV4ID0gdmFsLnNlYXJjaCh0aGlzLl9kZWNpbWFsKTsKICAgICAgdGhpcy5fZGVjaW1hbC5sYXN0SW5kZXggPSAwOwogICAgICB2YXIgbWludXNDaGFySW5kZXggPSB2YWwuc2VhcmNoKHRoaXMuX21pbnVzU2lnbik7CiAgICAgIHRoaXMuX21pbnVzU2lnbi5sYXN0SW5kZXggPSAwOwogICAgICB2YXIgc3VmZml4Q2hhckluZGV4ID0gdmFsLnNlYXJjaCh0aGlzLl9zdWZmaXgpOwogICAgICB0aGlzLl9zdWZmaXgubGFzdEluZGV4ID0gMDsKICAgICAgdmFyIGN1cnJlbmN5Q2hhckluZGV4ID0gdmFsLnNlYXJjaCh0aGlzLl9jdXJyZW5jeSk7CiAgICAgIHRoaXMuX2N1cnJlbmN5Lmxhc3RJbmRleCA9IDA7CiAgICAgIHJldHVybiB7CiAgICAgICAgZGVjaW1hbENoYXJJbmRleDogZGVjaW1hbENoYXJJbmRleCwKICAgICAgICBtaW51c0NoYXJJbmRleDogbWludXNDaGFySW5kZXgsCiAgICAgICAgc3VmZml4Q2hhckluZGV4OiBzdWZmaXhDaGFySW5kZXgsCiAgICAgICAgY3VycmVuY3lDaGFySW5kZXg6IGN1cnJlbmN5Q2hhckluZGV4CiAgICAgIH07CiAgICB9LAogICAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoZXZlbnQsIHRleHQpIHsKICAgICAgdmFyIHNpZ24gPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHsKICAgICAgICBpc0RlY2ltYWxTaWduOiBmYWxzZSwKICAgICAgICBpc01pbnVzU2lnbjogZmFsc2UKICAgICAgfTsKICAgICAgdmFyIG1pbnVzQ2hhckluZGV4T25UZXh0ID0gdGV4dC5zZWFyY2godGhpcy5fbWludXNTaWduKTsKICAgICAgdGhpcy5fbWludXNTaWduLmxhc3RJbmRleCA9IDA7CgogICAgICBpZiAoIXRoaXMuYWxsb3dNaW51c1NpZ24oKSAmJiBtaW51c0NoYXJJbmRleE9uVGV4dCAhPT0gLTEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBzZWxlY3Rpb25TdGFydCA9IHRoaXMuJHJlZnMuaW5wdXQuJGVsLnNlbGVjdGlvblN0YXJ0OwogICAgICB2YXIgc2VsZWN0aW9uRW5kID0gdGhpcy4kcmVmcy5pbnB1dC4kZWwuc2VsZWN0aW9uRW5kOwogICAgICB2YXIgaW5wdXRWYWx1ZSA9IHRoaXMuJHJlZnMuaW5wdXQuJGVsLnZhbHVlLnRyaW0oKTsKCiAgICAgIHZhciBfdGhpcyRnZXRDaGFySW5kZXhlcyA9IHRoaXMuZ2V0Q2hhckluZGV4ZXMoaW5wdXRWYWx1ZSksCiAgICAgICAgICBkZWNpbWFsQ2hhckluZGV4ID0gX3RoaXMkZ2V0Q2hhckluZGV4ZXMuZGVjaW1hbENoYXJJbmRleCwKICAgICAgICAgIG1pbnVzQ2hhckluZGV4ID0gX3RoaXMkZ2V0Q2hhckluZGV4ZXMubWludXNDaGFySW5kZXgsCiAgICAgICAgICBzdWZmaXhDaGFySW5kZXggPSBfdGhpcyRnZXRDaGFySW5kZXhlcy5zdWZmaXhDaGFySW5kZXgsCiAgICAgICAgICBjdXJyZW5jeUNoYXJJbmRleCA9IF90aGlzJGdldENoYXJJbmRleGVzLmN1cnJlbmN5Q2hhckluZGV4OwoKICAgICAgdmFyIG5ld1ZhbHVlU3RyOwoKICAgICAgaWYgKHNpZ24uaXNNaW51c1NpZ24pIHsKICAgICAgICBpZiAoc2VsZWN0aW9uU3RhcnQgPT09IDApIHsKICAgICAgICAgIG5ld1ZhbHVlU3RyID0gaW5wdXRWYWx1ZTsKCiAgICAgICAgICBpZiAobWludXNDaGFySW5kZXggPT09IC0xIHx8IHNlbGVjdGlvbkVuZCAhPT0gMCkgewogICAgICAgICAgICBuZXdWYWx1ZVN0ciA9IHRoaXMuaW5zZXJ0VGV4dChpbnB1dFZhbHVlLCB0ZXh0LCAwLCBzZWxlY3Rpb25FbmQpOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUoZXZlbnQsIG5ld1ZhbHVlU3RyLCB0ZXh0LCAnaW5zZXJ0Jyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHNpZ24uaXNEZWNpbWFsU2lnbikgewogICAgICAgIGlmIChkZWNpbWFsQ2hhckluZGV4ID4gMCAmJiBzZWxlY3Rpb25TdGFydCA9PT0gZGVjaW1hbENoYXJJbmRleCkgewogICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZShldmVudCwgaW5wdXRWYWx1ZSwgdGV4dCwgJ2luc2VydCcpOwogICAgICAgIH0gZWxzZSBpZiAoZGVjaW1hbENoYXJJbmRleCA+IHNlbGVjdGlvblN0YXJ0ICYmIGRlY2ltYWxDaGFySW5kZXggPCBzZWxlY3Rpb25FbmQpIHsKICAgICAgICAgIG5ld1ZhbHVlU3RyID0gdGhpcy5pbnNlcnRUZXh0KGlucHV0VmFsdWUsIHRleHQsIHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpOwogICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZShldmVudCwgbmV3VmFsdWVTdHIsIHRleHQsICdpbnNlcnQnKTsKICAgICAgICB9IGVsc2UgaWYgKGRlY2ltYWxDaGFySW5kZXggPT09IC0xICYmIHRoaXMubWF4RnJhY3Rpb25EaWdpdHMpIHsKICAgICAgICAgIG5ld1ZhbHVlU3RyID0gdGhpcy5pbnNlcnRUZXh0KGlucHV0VmFsdWUsIHRleHQsIHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpOwogICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZShldmVudCwgbmV3VmFsdWVTdHIsIHRleHQsICdpbnNlcnQnKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIG1heEZyYWN0aW9uRGlnaXRzID0gdGhpcy5udW1iZXJGb3JtYXQucmVzb2x2ZWRPcHRpb25zKCkubWF4aW11bUZyYWN0aW9uRGlnaXRzOwogICAgICAgIHZhciBvcGVyYXRpb24gPSBzZWxlY3Rpb25TdGFydCAhPT0gc2VsZWN0aW9uRW5kID8gJ3JhbmdlLWluc2VydCcgOiAnaW5zZXJ0JzsKCiAgICAgICAgaWYgKGRlY2ltYWxDaGFySW5kZXggPiAwICYmIHNlbGVjdGlvblN0YXJ0ID4gZGVjaW1hbENoYXJJbmRleCkgewogICAgICAgICAgaWYgKHNlbGVjdGlvblN0YXJ0ICsgdGV4dC5sZW5ndGggLSAoZGVjaW1hbENoYXJJbmRleCArIDEpIDw9IG1heEZyYWN0aW9uRGlnaXRzKSB7CiAgICAgICAgICAgIHZhciBjaGFySW5kZXggPSBjdXJyZW5jeUNoYXJJbmRleCA+PSBzZWxlY3Rpb25TdGFydCA/IGN1cnJlbmN5Q2hhckluZGV4IC0gMSA6IHN1ZmZpeENoYXJJbmRleCA+PSBzZWxlY3Rpb25TdGFydCA/IHN1ZmZpeENoYXJJbmRleCA6IGlucHV0VmFsdWUubGVuZ3RoOwogICAgICAgICAgICBuZXdWYWx1ZVN0ciA9IGlucHV0VmFsdWUuc2xpY2UoMCwgc2VsZWN0aW9uU3RhcnQpICsgdGV4dCArIGlucHV0VmFsdWUuc2xpY2Uoc2VsZWN0aW9uU3RhcnQgKyB0ZXh0Lmxlbmd0aCwgY2hhckluZGV4KSArIGlucHV0VmFsdWUuc2xpY2UoY2hhckluZGV4KTsKICAgICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZShldmVudCwgbmV3VmFsdWVTdHIsIHRleHQsIG9wZXJhdGlvbik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5ld1ZhbHVlU3RyID0gdGhpcy5pbnNlcnRUZXh0KGlucHV0VmFsdWUsIHRleHQsIHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpOwogICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZShldmVudCwgbmV3VmFsdWVTdHIsIHRleHQsIG9wZXJhdGlvbik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgaW5zZXJ0VGV4dDogZnVuY3Rpb24gaW5zZXJ0VGV4dCh2YWx1ZSwgdGV4dCwgc3RhcnQsIGVuZCkgewogICAgICB2YXIgdGV4dFNwbGl0ID0gdGV4dCA9PT0gJy4nID8gdGV4dCA6IHRleHQuc3BsaXQoJy4nKTsKCiAgICAgIGlmICh0ZXh0U3BsaXQubGVuZ3RoID09PSAyKSB7CiAgICAgICAgdmFyIGRlY2ltYWxDaGFySW5kZXggPSB2YWx1ZS5zbGljZShzdGFydCwgZW5kKS5zZWFyY2godGhpcy5fZGVjaW1hbCk7CiAgICAgICAgdGhpcy5fZGVjaW1hbC5sYXN0SW5kZXggPSAwOwogICAgICAgIHJldHVybiBkZWNpbWFsQ2hhckluZGV4ID4gMCA/IHZhbHVlLnNsaWNlKDAsIHN0YXJ0KSArIHRoaXMuZm9ybWF0VmFsdWUodGV4dCkgKyB2YWx1ZS5zbGljZShlbmQpIDogdmFsdWUgfHwgdGhpcy5mb3JtYXRWYWx1ZSh0ZXh0KTsKICAgICAgfSBlbHNlIGlmIChlbmQgLSBzdGFydCA9PT0gdmFsdWUubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0VmFsdWUodGV4dCk7CiAgICAgIH0gZWxzZSBpZiAoc3RhcnQgPT09IDApIHsKICAgICAgICByZXR1cm4gdGV4dCArIHZhbHVlLnNsaWNlKGVuZCk7CiAgICAgIH0gZWxzZSBpZiAoZW5kID09PSB2YWx1ZS5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gdmFsdWUuc2xpY2UoMCwgc3RhcnQpICsgdGV4dDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdmFsdWUuc2xpY2UoMCwgc3RhcnQpICsgdGV4dCArIHZhbHVlLnNsaWNlKGVuZCk7CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVSYW5nZTogZnVuY3Rpb24gZGVsZXRlUmFuZ2UodmFsdWUsIHN0YXJ0LCBlbmQpIHsKICAgICAgdmFyIG5ld1ZhbHVlU3RyOwogICAgICBpZiAoZW5kIC0gc3RhcnQgPT09IHZhbHVlLmxlbmd0aCkgbmV3VmFsdWVTdHIgPSAnJztlbHNlIGlmIChzdGFydCA9PT0gMCkgbmV3VmFsdWVTdHIgPSB2YWx1ZS5zbGljZShlbmQpO2Vsc2UgaWYgKGVuZCA9PT0gdmFsdWUubGVuZ3RoKSBuZXdWYWx1ZVN0ciA9IHZhbHVlLnNsaWNlKDAsIHN0YXJ0KTtlbHNlIG5ld1ZhbHVlU3RyID0gdmFsdWUuc2xpY2UoMCwgc3RhcnQpICsgdmFsdWUuc2xpY2UoZW5kKTsKICAgICAgcmV0dXJuIG5ld1ZhbHVlU3RyOwogICAgfSwKICAgIGluaXRDdXJzb3I6IGZ1bmN0aW9uIGluaXRDdXJzb3IoKSB7CiAgICAgIHZhciBzZWxlY3Rpb25TdGFydCA9IHRoaXMuJHJlZnMuaW5wdXQuJGVsLnNlbGVjdGlvblN0YXJ0OwogICAgICB2YXIgaW5wdXRWYWx1ZSA9IHRoaXMuJHJlZnMuaW5wdXQuJGVsLnZhbHVlOwogICAgICB2YXIgdmFsdWVMZW5ndGggPSBpbnB1dFZhbHVlLmxlbmd0aDsKICAgICAgdmFyIGluZGV4ID0gbnVsbDsgLy8gcmVtb3ZlIHByZWZpeAoKICAgICAgdmFyIHByZWZpeExlbmd0aCA9ICh0aGlzLnByZWZpeENoYXIgfHwgJycpLmxlbmd0aDsKICAgICAgaW5wdXRWYWx1ZSA9IGlucHV0VmFsdWUucmVwbGFjZSh0aGlzLl9wcmVmaXgsICcnKTsKICAgICAgc2VsZWN0aW9uU3RhcnQgPSBzZWxlY3Rpb25TdGFydCAtIHByZWZpeExlbmd0aDsKICAgICAgdmFyIGNoYXIgPSBpbnB1dFZhbHVlLmNoYXJBdChzZWxlY3Rpb25TdGFydCk7CgogICAgICBpZiAodGhpcy5pc051bWVyYWxDaGFyKGNoYXIpKSB7CiAgICAgICAgcmV0dXJuIHNlbGVjdGlvblN0YXJ0ICsgcHJlZml4TGVuZ3RoOwogICAgICB9IC8vbGVmdAoKCiAgICAgIHZhciBpID0gc2VsZWN0aW9uU3RhcnQgLSAxOwoKICAgICAgd2hpbGUgKGkgPj0gMCkgewogICAgICAgIGNoYXIgPSBpbnB1dFZhbHVlLmNoYXJBdChpKTsKCiAgICAgICAgaWYgKHRoaXMuaXNOdW1lcmFsQ2hhcihjaGFyKSkgewogICAgICAgICAgaW5kZXggPSBpICsgcHJlZml4TGVuZ3RoOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGktLTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChpbmRleCAhPT0gbnVsbCkgewogICAgICAgIHRoaXMuJHJlZnMuaW5wdXQuJGVsLnNldFNlbGVjdGlvblJhbmdlKGluZGV4ICsgMSwgaW5kZXggKyAxKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpID0gc2VsZWN0aW9uU3RhcnQ7CgogICAgICAgIHdoaWxlIChpIDwgdmFsdWVMZW5ndGgpIHsKICAgICAgICAgIGNoYXIgPSBpbnB1dFZhbHVlLmNoYXJBdChpKTsKCiAgICAgICAgICBpZiAodGhpcy5pc051bWVyYWxDaGFyKGNoYXIpKSB7CiAgICAgICAgICAgIGluZGV4ID0gaSArIHByZWZpeExlbmd0aDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpKys7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoaW5kZXggIT09IG51bGwpIHsKICAgICAgICAgIHRoaXMuJHJlZnMuaW5wdXQuJGVsLnNldFNlbGVjdGlvblJhbmdlKGluZGV4LCBpbmRleCk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gaW5kZXggfHwgMDsKICAgIH0sCiAgICBvbklucHV0Q2xpY2s6IGZ1bmN0aW9uIG9uSW5wdXRDbGljaygpIHsKICAgICAgdGhpcy5pbml0Q3Vyc29yKCk7CiAgICB9LAogICAgaXNOdW1lcmFsQ2hhcjogZnVuY3Rpb24gaXNOdW1lcmFsQ2hhcihjaGFyKSB7CiAgICAgIGlmIChjaGFyLmxlbmd0aCA9PT0gMSAmJiAodGhpcy5fbnVtZXJhbC50ZXN0KGNoYXIpIHx8IHRoaXMuX2RlY2ltYWwudGVzdChjaGFyKSB8fCB0aGlzLl9ncm91cC50ZXN0KGNoYXIpIHx8IHRoaXMuX21pbnVzU2lnbi50ZXN0KGNoYXIpKSkgewogICAgICAgIHRoaXMucmVzZXRSZWdleCgpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgcmVzZXRSZWdleDogZnVuY3Rpb24gcmVzZXRSZWdleCgpIHsKICAgICAgdGhpcy5fbnVtZXJhbC5sYXN0SW5kZXggPSAwOwogICAgICB0aGlzLl9kZWNpbWFsLmxhc3RJbmRleCA9IDA7CiAgICAgIHRoaXMuX2dyb3VwLmxhc3RJbmRleCA9IDA7CiAgICAgIHRoaXMuX21pbnVzU2lnbi5sYXN0SW5kZXggPSAwOwogICAgfSwKICAgIHVwZGF0ZVZhbHVlOiBmdW5jdGlvbiB1cGRhdGVWYWx1ZShldmVudCwgdmFsdWVTdHIsIGluc2VydGVkVmFsdWVTdHIsIG9wZXJhdGlvbikgewogICAgICB2YXIgY3VycmVudFZhbHVlID0gdGhpcy4kcmVmcy5pbnB1dC4kZWwudmFsdWU7CiAgICAgIHZhciBuZXdWYWx1ZSA9IG51bGw7CgogICAgICBpZiAodmFsdWVTdHIgIT0gbnVsbCkgewogICAgICAgIG5ld1ZhbHVlID0gdGhpcy5wYXJzZVZhbHVlKHZhbHVlU3RyKTsKICAgICAgICBuZXdWYWx1ZSA9ICFuZXdWYWx1ZSAmJiAhdGhpcy5hbGxvd0VtcHR5ID8gMCA6IG5ld1ZhbHVlOwogICAgICAgIHRoaXMudXBkYXRlSW5wdXQobmV3VmFsdWUsIGluc2VydGVkVmFsdWVTdHIsIG9wZXJhdGlvbiwgdmFsdWVTdHIpOwogICAgICAgIHRoaXMuaGFuZGxlT25JbnB1dChldmVudCwgY3VycmVudFZhbHVlLCBuZXdWYWx1ZSk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVPbklucHV0OiBmdW5jdGlvbiBoYW5kbGVPbklucHV0KGV2ZW50LCBjdXJyZW50VmFsdWUsIG5ld1ZhbHVlKSB7CiAgICAgIGlmICh0aGlzLmlzVmFsdWVDaGFuZ2VkKGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB7CiAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCwKICAgICAgICAgIHZhbHVlOiBuZXdWYWx1ZQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgaXNWYWx1ZUNoYW5nZWQ6IGZ1bmN0aW9uIGlzVmFsdWVDaGFuZ2VkKGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpIHsKICAgICAgaWYgKG5ld1ZhbHVlID09PSBudWxsICYmIGN1cnJlbnRWYWx1ZSAhPT0gbnVsbCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICBpZiAobmV3VmFsdWUgIT0gbnVsbCkgewogICAgICAgIHZhciBwYXJzZWRDdXJyZW50VmFsdWUgPSB0eXBlb2YgY3VycmVudFZhbHVlID09PSAnc3RyaW5nJyA/IHRoaXMucGFyc2VWYWx1ZShjdXJyZW50VmFsdWUpIDogY3VycmVudFZhbHVlOwogICAgICAgIHJldHVybiBuZXdWYWx1ZSAhPT0gcGFyc2VkQ3VycmVudFZhbHVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgdmFsaWRhdGVWYWx1ZTogZnVuY3Rpb24gdmFsaWRhdGVWYWx1ZSh2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT09ICctJyB8fCB2YWx1ZSA9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm1pbiAhPSBudWxsICYmIHZhbHVlIDwgdGhpcy5taW4pIHsKICAgICAgICByZXR1cm4gdGhpcy5taW47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm1heCAhPSBudWxsICYmIHZhbHVlID4gdGhpcy5tYXgpIHsKICAgICAgICByZXR1cm4gdGhpcy5tYXg7CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0sCiAgICB1cGRhdGVJbnB1dDogZnVuY3Rpb24gdXBkYXRlSW5wdXQodmFsdWUsIGluc2VydGVkVmFsdWVTdHIsIG9wZXJhdGlvbiwgdmFsdWVTdHIpIHsKICAgICAgaW5zZXJ0ZWRWYWx1ZVN0ciA9IGluc2VydGVkVmFsdWVTdHIgfHwgJyc7CiAgICAgIHZhciBpbnB1dFZhbHVlID0gdGhpcy4kcmVmcy5pbnB1dC4kZWwudmFsdWU7CiAgICAgIHZhciBuZXdWYWx1ZSA9IHRoaXMuZm9ybWF0VmFsdWUodmFsdWUpOwogICAgICB2YXIgY3VycmVudExlbmd0aCA9IGlucHV0VmFsdWUubGVuZ3RoOwoKICAgICAgaWYgKG5ld1ZhbHVlICE9PSB2YWx1ZVN0cikgewogICAgICAgIG5ld1ZhbHVlID0gdGhpcy5jb25jYXRWYWx1ZXMobmV3VmFsdWUsIHZhbHVlU3RyKTsKICAgICAgfQoKICAgICAgaWYgKGN1cnJlbnRMZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLiRyZWZzLmlucHV0LiRlbC52YWx1ZSA9IG5ld1ZhbHVlOwogICAgICAgIHRoaXMuJHJlZnMuaW5wdXQuJGVsLnNldFNlbGVjdGlvblJhbmdlKDAsIDApOwogICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5pdEN1cnNvcigpOwogICAgICAgIHZhciBzZWxlY3Rpb25FbmQgPSBpbmRleCArIGluc2VydGVkVmFsdWVTdHIubGVuZ3RoOwogICAgICAgIHRoaXMuJHJlZnMuaW5wdXQuJGVsLnNldFNlbGVjdGlvblJhbmdlKHNlbGVjdGlvbkVuZCwgc2VsZWN0aW9uRW5kKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgc2VsZWN0aW9uU3RhcnQgPSB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZWxlY3Rpb25TdGFydDsKICAgICAgICB2YXIgX3NlbGVjdGlvbkVuZCA9IHRoaXMuJHJlZnMuaW5wdXQuJGVsLnNlbGVjdGlvbkVuZDsKICAgICAgICB0aGlzLiRyZWZzLmlucHV0LiRlbC52YWx1ZSA9IG5ld1ZhbHVlOwogICAgICAgIHZhciBuZXdMZW5ndGggPSBuZXdWYWx1ZS5sZW5ndGg7CgogICAgICAgIGlmIChvcGVyYXRpb24gPT09ICdyYW5nZS1pbnNlcnQnKSB7CiAgICAgICAgICB2YXIgc3RhcnRWYWx1ZSA9IHRoaXMucGFyc2VWYWx1ZSgoaW5wdXRWYWx1ZSB8fCAnJykuc2xpY2UoMCwgc2VsZWN0aW9uU3RhcnQpKTsKICAgICAgICAgIHZhciBzdGFydFZhbHVlU3RyID0gc3RhcnRWYWx1ZSAhPT0gbnVsbCA/IHN0YXJ0VmFsdWUudG9TdHJpbmcoKSA6ICcnOwogICAgICAgICAgdmFyIHN0YXJ0RXhwciA9IHN0YXJ0VmFsdWVTdHIuc3BsaXQoJycpLmpvaW4oIigiLmNvbmNhdCh0aGlzLmdyb3VwQ2hhciwgIik/IikpOwogICAgICAgICAgdmFyIHNSZWdleCA9IG5ldyBSZWdFeHAoc3RhcnRFeHByLCAnZycpOwogICAgICAgICAgc1JlZ2V4LnRlc3QobmV3VmFsdWUpOwogICAgICAgICAgdmFyIHRFeHByID0gaW5zZXJ0ZWRWYWx1ZVN0ci5zcGxpdCgnJykuam9pbigiKCIuY29uY2F0KHRoaXMuZ3JvdXBDaGFyLCAiKT8iKSk7CiAgICAgICAgICB2YXIgdFJlZ2V4ID0gbmV3IFJlZ0V4cCh0RXhwciwgJ2cnKTsKICAgICAgICAgIHRSZWdleC50ZXN0KG5ld1ZhbHVlLnNsaWNlKHNSZWdleC5sYXN0SW5kZXgpKTsKICAgICAgICAgIF9zZWxlY3Rpb25FbmQgPSBzUmVnZXgubGFzdEluZGV4ICsgdFJlZ2V4Lmxhc3RJbmRleDsKICAgICAgICAgIHRoaXMuJHJlZnMuaW5wdXQuJGVsLnNldFNlbGVjdGlvblJhbmdlKF9zZWxlY3Rpb25FbmQsIF9zZWxlY3Rpb25FbmQpOwogICAgICAgIH0gZWxzZSBpZiAobmV3TGVuZ3RoID09PSBjdXJyZW50TGVuZ3RoKSB7CiAgICAgICAgICBpZiAob3BlcmF0aW9uID09PSAnaW5zZXJ0JyB8fCBvcGVyYXRpb24gPT09ICdkZWxldGUtYmFjay1zaW5nbGUnKSB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZXRTZWxlY3Rpb25SYW5nZShfc2VsZWN0aW9uRW5kICsgMSwgX3NlbGVjdGlvbkVuZCArIDEpO2Vsc2UgaWYgKG9wZXJhdGlvbiA9PT0gJ2RlbGV0ZS1zaW5nbGUnKSB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZXRTZWxlY3Rpb25SYW5nZShfc2VsZWN0aW9uRW5kIC0gMSwgX3NlbGVjdGlvbkVuZCAtIDEpO2Vsc2UgaWYgKG9wZXJhdGlvbiA9PT0gJ2RlbGV0ZS1yYW5nZScgfHwgb3BlcmF0aW9uID09PSAnc3BpbicpIHRoaXMuJHJlZnMuaW5wdXQuJGVsLnNldFNlbGVjdGlvblJhbmdlKF9zZWxlY3Rpb25FbmQsIF9zZWxlY3Rpb25FbmQpOwogICAgICAgIH0gZWxzZSBpZiAob3BlcmF0aW9uID09PSAnZGVsZXRlLWJhY2stc2luZ2xlJykgewogICAgICAgICAgdmFyIHByZXZDaGFyID0gaW5wdXRWYWx1ZS5jaGFyQXQoX3NlbGVjdGlvbkVuZCAtIDEpOwogICAgICAgICAgdmFyIG5leHRDaGFyID0gaW5wdXRWYWx1ZS5jaGFyQXQoX3NlbGVjdGlvbkVuZCk7CiAgICAgICAgICB2YXIgZGlmZiA9IGN1cnJlbnRMZW5ndGggLSBuZXdMZW5ndGg7CgogICAgICAgICAgdmFyIGlzR3JvdXBDaGFyID0gdGhpcy5fZ3JvdXAudGVzdChuZXh0Q2hhcik7CgogICAgICAgICAgaWYgKGlzR3JvdXBDaGFyICYmIGRpZmYgPT09IDEpIHsKICAgICAgICAgICAgX3NlbGVjdGlvbkVuZCArPSAxOwogICAgICAgICAgfSBlbHNlIGlmICghaXNHcm91cENoYXIgJiYgdGhpcy5pc051bWVyYWxDaGFyKHByZXZDaGFyKSkgewogICAgICAgICAgICBfc2VsZWN0aW9uRW5kICs9IC0xICogZGlmZiArIDE7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5fZ3JvdXAubGFzdEluZGV4ID0gMDsKICAgICAgICAgIHRoaXMuJHJlZnMuaW5wdXQuJGVsLnNldFNlbGVjdGlvblJhbmdlKF9zZWxlY3Rpb25FbmQsIF9zZWxlY3Rpb25FbmQpOwogICAgICAgIH0gZWxzZSBpZiAoaW5wdXRWYWx1ZSA9PT0gJy0nICYmIG9wZXJhdGlvbiA9PT0gJ2luc2VydCcpIHsKICAgICAgICAgIHRoaXMuJHJlZnMuaW5wdXQuJGVsLnNldFNlbGVjdGlvblJhbmdlKDAsIDApOwoKICAgICAgICAgIHZhciBfaW5kZXggPSB0aGlzLmluaXRDdXJzb3IoKTsKCiAgICAgICAgICB2YXIgX3NlbGVjdGlvbkVuZDIgPSBfaW5kZXggKyBpbnNlcnRlZFZhbHVlU3RyLmxlbmd0aCArIDE7CgogICAgICAgICAgdGhpcy4kcmVmcy5pbnB1dC4kZWwuc2V0U2VsZWN0aW9uUmFuZ2UoX3NlbGVjdGlvbkVuZDIsIF9zZWxlY3Rpb25FbmQyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3NlbGVjdGlvbkVuZCA9IF9zZWxlY3Rpb25FbmQgKyAobmV3TGVuZ3RoIC0gY3VycmVudExlbmd0aCk7CiAgICAgICAgICB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZXRTZWxlY3Rpb25SYW5nZShfc2VsZWN0aW9uRW5kLCBfc2VsZWN0aW9uRW5kKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuJHJlZnMuaW5wdXQuJGVsLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycsIHZhbHVlKTsKICAgIH0sCiAgICBjb25jYXRWYWx1ZXM6IGZ1bmN0aW9uIGNvbmNhdFZhbHVlcyh2YWwxLCB2YWwyKSB7CiAgICAgIGlmICh2YWwxICYmIHZhbDIpIHsKICAgICAgICB2YXIgZGVjaW1hbENoYXJJbmRleCA9IHZhbDIuc2VhcmNoKHRoaXMuX2RlY2ltYWwpOwogICAgICAgIHRoaXMuX2RlY2ltYWwubGFzdEluZGV4ID0gMDsKICAgICAgICByZXR1cm4gZGVjaW1hbENoYXJJbmRleCAhPT0gLTEgPyB2YWwxLnNwbGl0KHRoaXMuX2RlY2ltYWwpWzBdICsgdmFsMi5zbGljZShkZWNpbWFsQ2hhckluZGV4KSA6IHZhbDE7CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWwxOwogICAgfSwKICAgIGdldERlY2ltYWxMZW5ndGg6IGZ1bmN0aW9uIGdldERlY2ltYWxMZW5ndGgodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgdmFyIHZhbHVlU3BsaXQgPSB2YWx1ZS5zcGxpdCh0aGlzLl9kZWNpbWFsKTsKCiAgICAgICAgaWYgKHZhbHVlU3BsaXQubGVuZ3RoID09PSAyKSB7CiAgICAgICAgICByZXR1cm4gdmFsdWVTcGxpdFsxXS5yZXBsYWNlKHRoaXMuX3N1ZmZpeCwgJycpLnRyaW0oKS5yZXBsYWNlKC9ccy9nLCAnJykucmVwbGFjZSh0aGlzLl9jdXJyZW5jeSwgJycpLmxlbmd0aDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiAwOwogICAgfSwKICAgIHVwZGF0ZU1vZGVsOiBmdW5jdGlvbiB1cGRhdGVNb2RlbChldmVudCwgdmFsdWUpIHsKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCB2YWx1ZSk7CiAgICB9LAogICAgb25JbnB1dEZvY3VzOiBmdW5jdGlvbiBvbklucHV0Rm9jdXMoKSB7CiAgICAgIHRoaXMuZm9jdXNlZCA9IHRydWU7CiAgICB9LAogICAgb25JbnB1dEJsdXI6IGZ1bmN0aW9uIG9uSW5wdXRCbHVyKGV2ZW50KSB7CiAgICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlOwogICAgICB2YXIgaW5wdXQgPSBldmVudC50YXJnZXQ7CiAgICAgIHZhciBuZXdWYWx1ZSA9IHRoaXMudmFsaWRhdGVWYWx1ZSh0aGlzLnBhcnNlVmFsdWUoaW5wdXQudmFsdWUpKTsKICAgICAgaW5wdXQudmFsdWUgPSB0aGlzLmZvcm1hdFZhbHVlKG5ld1ZhbHVlKTsKICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLXZhbHVlbm93JywgbmV3VmFsdWUpOwogICAgICB0aGlzLnVwZGF0ZU1vZGVsKGV2ZW50LCBuZXdWYWx1ZSk7CiAgICB9LAogICAgY2xlYXJUaW1lcjogZnVuY3Rpb24gY2xlYXJUaW1lcigpIHsKICAgICAgaWYgKHRoaXMudGltZXIpIHsKICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOwogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgY29udGFpbmVyQ2xhc3M6IGZ1bmN0aW9uIGNvbnRhaW5lckNsYXNzKCkgewogICAgICByZXR1cm4gWydwLWlucHV0bnVtYmVyIHAtY29tcG9uZW50IHAtaW5wdXR3cmFwcGVyJywgdGhpcy5jbGFzcywgewogICAgICAgICdwLWlucHV0d3JhcHBlci1maWxsZWQnOiB0aGlzLmZpbGxlZCwKICAgICAgICAncC1pbnB1dHdyYXBwZXItZm9jdXMnOiB0aGlzLmZvY3VzZWQsCiAgICAgICAgJ3AtaW5wdXRudW1iZXItYnV0dG9ucy1zdGFja2VkJzogdGhpcy5zaG93QnV0dG9ucyAmJiB0aGlzLmJ1dHRvbkxheW91dCA9PT0gJ3N0YWNrZWQnLAogICAgICAgICdwLWlucHV0bnVtYmVyLWJ1dHRvbnMtaG9yaXpvbnRhbCc6IHRoaXMuc2hvd0J1dHRvbnMgJiYgdGhpcy5idXR0b25MYXlvdXQgPT09ICdob3Jpem9udGFsJywKICAgICAgICAncC1pbnB1dG51bWJlci1idXR0b25zLXZlcnRpY2FsJzogdGhpcy5zaG93QnV0dG9ucyAmJiB0aGlzLmJ1dHRvbkxheW91dCA9PT0gJ3ZlcnRpY2FsJwogICAgICB9XTsKICAgIH0sCiAgICB1cEJ1dHRvbkNsYXNzOiBmdW5jdGlvbiB1cEJ1dHRvbkNsYXNzKCkgewogICAgICByZXR1cm4gWydwLWlucHV0bnVtYmVyLWJ1dHRvbiBwLWlucHV0bnVtYmVyLWJ1dHRvbi11cCcsIHRoaXMuaW5jcmVtZW50QnV0dG9uQ2xhc3NdOwogICAgfSwKICAgIGRvd25CdXR0b25DbGFzczogZnVuY3Rpb24gZG93bkJ1dHRvbkNsYXNzKCkgewogICAgICByZXR1cm4gWydwLWlucHV0bnVtYmVyLWJ1dHRvbiBwLWlucHV0bnVtYmVyLWJ1dHRvbi1kb3duJywgdGhpcy5kZWNyZW1lbnRCdXR0b25DbGFzc107CiAgICB9LAogICAgZmlsbGVkOiBmdW5jdGlvbiBmaWxsZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLm1vZGVsVmFsdWUgIT0gbnVsbCAmJiB0aGlzLm1vZGVsVmFsdWUudG9TdHJpbmcoKS5sZW5ndGggPiAwOwogICAgfSwKICAgIHVwQnV0dG9uTGlzdGVuZXJzOiBmdW5jdGlvbiB1cEJ1dHRvbkxpc3RlbmVycygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gewogICAgICAgIG1vdXNlZG93bjogZnVuY3Rpb24gbW91c2Vkb3duKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMyLm9uVXBCdXR0b25Nb3VzZURvd24oZXZlbnQpOwogICAgICAgIH0sCiAgICAgICAgbW91c2V1cDogZnVuY3Rpb24gbW91c2V1cChldmVudCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMi5vblVwQnV0dG9uTW91c2VVcChldmVudCk7CiAgICAgICAgfSwKICAgICAgICBtb3VzZWxlYXZlOiBmdW5jdGlvbiBtb3VzZWxlYXZlKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMyLm9uVXBCdXR0b25Nb3VzZUxlYXZlKGV2ZW50KTsKICAgICAgICB9LAogICAgICAgIGtleWRvd246IGZ1bmN0aW9uIGtleWRvd24oZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBfdGhpczIub25VcEJ1dHRvbktleURvd24oZXZlbnQpOwogICAgICAgIH0sCiAgICAgICAga2V5dXA6IGZ1bmN0aW9uIGtleXVwKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMyLm9uVXBCdXR0b25LZXlVcChldmVudCk7CiAgICAgICAgfQogICAgICB9OwogICAgfSwKICAgIGRvd25CdXR0b25MaXN0ZW5lcnM6IGZ1bmN0aW9uIGRvd25CdXR0b25MaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIHsKICAgICAgICBtb3VzZWRvd246IGZ1bmN0aW9uIG1vdXNlZG93bihldmVudCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMy5vbkRvd25CdXR0b25Nb3VzZURvd24oZXZlbnQpOwogICAgICAgIH0sCiAgICAgICAgbW91c2V1cDogZnVuY3Rpb24gbW91c2V1cChldmVudCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMy5vbkRvd25CdXR0b25Nb3VzZVVwKGV2ZW50KTsKICAgICAgICB9LAogICAgICAgIG1vdXNlbGVhdmU6IGZ1bmN0aW9uIG1vdXNlbGVhdmUoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBfdGhpczMub25Eb3duQnV0dG9uTW91c2VMZWF2ZShldmVudCk7CiAgICAgICAgfSwKICAgICAgICBrZXlkb3duOiBmdW5jdGlvbiBrZXlkb3duKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMzLm9uRG93bkJ1dHRvbktleURvd24oZXZlbnQpOwogICAgICAgIH0sCiAgICAgICAga2V5dXA6IGZ1bmN0aW9uIGtleXVwKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMzLm9uRG93bkJ1dHRvbktleVVwKGV2ZW50KTsKICAgICAgICB9CiAgICAgIH07CiAgICB9LAogICAgZm9ybWF0dGVkVmFsdWU6IGZ1bmN0aW9uIGZvcm1hdHRlZFZhbHVlKCkgewogICAgICB2YXIgdmFsID0gIXRoaXMubW9kZWxWYWx1ZSAmJiAhdGhpcy5hbGxvd0VtcHR5ID8gMCA6IHRoaXMubW9kZWxWYWx1ZTsKICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0VmFsdWUodmFsKTsKICAgIH0sCiAgICBnZXRGb3JtYXR0ZXI6IGZ1bmN0aW9uIGdldEZvcm1hdHRlcigpIHsKICAgICAgcmV0dXJuIHRoaXMubnVtYmVyRm9ybWF0OwogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgJ0lOSW5wdXRUZXh0JzogSW5wdXRUZXh0LAogICAgJ0lOQnV0dG9uJzogQnV0dG9uCiAgfQp9Ow=="},{"version":3,"sources":["/Users/crocslut/Desktop/Git/main-cleanaway-pwa/src/components/inputnumber/InputNumber.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <span :class=\"containerClass\" :style=\"style\">\n        <INInputText ref=\"input\" :class=\"['p-inputnumber-input', inputClass]\" :style=\"inputStyle\" :value=\"formattedValue\" v-bind=\"$attrs\" :aria-valumin=\"min\" :aria-valuemax=\"max\"\n           @input=\"onUserInput\" @keydown=\"onInputKeyDown\" @keypress=\"onInputKeyPress\" @paste=\"onPaste\" @click=\"onInputClick\" @focus=\"onInputFocus\" @blur=\"onInputBlur\"/>\n        <span class=\"p-inputnumber-button-group\" v-if=\"showButtons && buttonLayout === 'stacked'\">\n            <INButton :class=\"upButtonClass\" :icon=\"incrementButtonIcon\" v-on=\"upButtonListeners\" :disabled=\"$attrs.disabled\" />\n            <INButton :class=\"downButtonClass\" :icon=\"decrementButtonIcon\" v-on=\"downButtonListeners\" :disabled=\"$attrs.disabled\" />\n        </span>\n        <INButton :class=\"upButtonClass\" :icon=\"incrementButtonIcon\" v-on=\"upButtonListeners\" v-if=\"showButtons && buttonLayout !== 'stacked'\" :disabled=\"$attrs.disabled\" />\n        <INButton :class=\"downButtonClass\" :icon=\"decrementButtonIcon\" v-on=\"downButtonListeners\" v-if=\"showButtons && buttonLayout !== 'stacked'\" :disabled=\"$attrs.disabled\" />\n    </span>\n</template>\n\n<script>\nimport InputText from 'primevue/inputtext';\nimport Button from 'primevue/button';\n\nexport default {\n    name: 'InputNumber',\n    inheritAttrs: false,\n    emits: ['update:modelValue', 'input'],\n    props: {\n        modelValue: {\n            type: Number,\n            default: null\n        },\n        format: {\n            type: Boolean,\n            default: true\n        },\n        showButtons: {\n            type: Boolean,\n            default: false\n        },\n        buttonLayout: {\n            type: String,\n            default: 'stacked'\n        },\n        incrementButtonClass: {\n            type: String,\n            default: null,\n        },\n        decrementButtonClass: {\n            type: String,\n            default: null,\n        },\n        incrementButtonIcon: {\n            type: String,\n            default: 'pi pi-angle-up',\n        },\n        decrementButtonIcon: {\n            type: String,\n            default: 'pi pi-angle-down',\n        },\n        locale: {\n            type: String,\n            default: undefined\n        },\n        localeMatcher: {\n            type: String,\n            default: undefined\n        },\n        mode: {\n            type: String,\n            default: 'decimal'\n        },\n        prefix: {\n            type: String,\n            default: null\n        },\n        suffix: {\n            type: String,\n            default: null\n        },\n        currency: {\n            type: String,\n            default: undefined\n        },\n        currencyDisplay: {\n            type: String,\n            default: undefined\n        },\n        useGrouping: {\n            type: Boolean,\n            default: true\n        },\n        minFractionDigits: {\n            type: Number,\n            default: undefined\n        },\n        maxFractionDigits: {\n            type: Number,\n            default: undefined\n        },\n        min: {\n            type: Number,\n            default: null\n        },\n        max: {\n            type: Number,\n            default: null\n        },\n        step: {\n            type: Number,\n            default: 1\n        },\n        allowEmpty: {\n            type: Boolean,\n            default: true\n        },\n        style: null,\n        class: null,\n        inputStyle: null,\n        inputClass: null\n    },\n    numberFormat: null,\n    _numeral: null,\n    _decimal: null,\n    _group: null,\n    _minusSign: null,\n    _currency: null,\n    _suffix: null,\n    _prefix: null,\n    _index: null,\n    groupChar: '',\n    isSpecialChar: null,\n    prefixChar: null,\n    suffixChar: null,\n    timer: null,\n    data() {\n        return {\n            focused: false\n        }\n    },\n    watch: {\n\t\tlocale(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        },\n        localeMatcher(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        },\n        mode(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        },\n        currency(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        },\n        currencyDisplay(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        },\n        useGrouping(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        },\n        minFractionDigits(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        },\n        maxFractionDigits(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        },\n        suffix(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        },\n        prefix(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        }\n    },\n    created() {\n        this.constructParser();\n    },\n    methods: {\n        getOptions() {\n            return {\n                localeMatcher: this.localeMatcher,\n                style: this.mode,\n                currency: this.currency,\n                currencyDisplay: this.currencyDisplay,\n                useGrouping: this.useGrouping,\n                minimumFractionDigits: this.minFractionDigits,\n                maximumFractionDigits: this.maxFractionDigits\n            };\n        },\n        constructParser() {\n            this.numberFormat = new Intl.NumberFormat(this.locale, this.getOptions());\n            const numerals = [...new Intl.NumberFormat(this.locale, {useGrouping: false}).format(9876543210)].reverse();\n            const index = new Map(numerals.map((d, i) => [d, i]));\n            this._numeral = new RegExp(`[${numerals.join('')}]`, 'g');\n            this._group = this.getGroupingExpression();\n            this._minusSign = this.getMinusSignExpression();\n            this._currency = this.getCurrencyExpression();\n            this._decimal = this.getDecimalExpression();\n            this._suffix = this.getSuffixExpression();\n            this._prefix = this.getPrefixExpression();\n            this._index = d => index.get(d);\n        },\n        updateConstructParser(newValue, oldValue) {\n            if (newValue !== oldValue) {\n                this.constructParser();\n            }\n        },\n        escapeRegExp(text) {\n            return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n        },\n        getDecimalExpression() {\n            const formatter = new Intl.NumberFormat(this.locale, {...this.getOptions(), useGrouping: false});\n            return new RegExp(`[${formatter.format(1.1).replace(this._currency, '').trim().replace(this._numeral, '')}]`, 'g');\n        },\n        getGroupingExpression() {\n            const formatter = new Intl.NumberFormat(this.locale, {useGrouping: true});\n            this.groupChar = formatter.format(1000000).trim().replace(this._numeral, '').charAt(0);\n            return new RegExp(`[${this.groupChar}]`, 'g');\n        },\n        getMinusSignExpression() {\n            const formatter = new Intl.NumberFormat(this.locale, {useGrouping: false});\n            return new RegExp(`[${formatter.format(-1).trim().replace(this._numeral, '')}]`, 'g');\n        },\n        getCurrencyExpression() {\n            if (this.currency) {\n                const formatter = new Intl.NumberFormat(this.locale, {style: 'currency', currency: this.currency, currencyDisplay: this.currencyDisplay,\n                    minimumFractionDigits: 0, maximumFractionDigits: 0});\n                return new RegExp(`[${formatter.format(1).replace(/\\s/g, '').replace(this._numeral, '').replace(this._group, '')}]`, 'g');\n            }\n\n            return new RegExp(`[]`,'g');\n        },\n        getPrefixExpression() {\n            if (this.prefix) {\n                this.prefixChar = this.prefix;\n            }\n            else {\n                const formatter = new Intl.NumberFormat(this.locale, {style: this.mode, currency: this.currency, currencyDisplay: this.currencyDisplay});\n                this.prefixChar = formatter.format(1).split('1')[0];\n            }\n\n            return new RegExp(`${this.escapeRegExp(this.prefixChar||'')}`, 'g');\n        },\n        getSuffixExpression() {\n            if (this.suffix) {\n                this.suffixChar = this.suffix;\n            }\n            else {\n                const formatter = new Intl.NumberFormat(this.locale, {style: this.mode, currency: this.currency, currencyDisplay: this.currencyDisplay,\n                    minimumFractionDigits: 0, maximumFractionDigits: 0});\n                this.suffixChar = formatter.format(1).split('1')[1];\n            }\n\n            return new RegExp(`${this.escapeRegExp(this.suffixChar||'')}`, 'g');\n        },\n        formatValue(value) {\n            if (value != null) {\n                if (value === '-') { // Minus sign\n                    return value;\n                }\n\n                if (this.format) {\n                    let formatter = new Intl.NumberFormat(this.locale, this.getOptions());\n                    let formattedValue = formatter.format(value);\n                    if (this.prefix) {\n                        formattedValue = this.prefix + formattedValue;\n                    }\n\n                    if (this.suffix) {\n                        formattedValue = formattedValue + this.suffix;\n                    }\n\n                    return formattedValue;\n                }\n\n                return value.toString();\n            }\n\n            return '';\n        },\n        parseValue(text) {\n            let filteredText = text\n                                .replace(this._suffix, '')\n                                .replace(this._prefix, '')\n                                .trim()\n                                .replace(/\\s/g, '')\n                                .replace(this._currency, '')\n                                .replace(this._group, '')\n                                .replace(this._minusSign, '-')\n                                .replace(this._decimal, '.')\n                                .replace(this._numeral, this._index);\n\n            if (filteredText) {\n                if (filteredText === '-') // Minus sign\n                    return filteredText;\n\n                let parsedValue = +filteredText;\n                return isNaN(parsedValue) ? null : parsedValue;\n            }\n\n            return null;\n        },\n        repeat(event, interval, dir) {\n            let i = interval || 500;\n\n            this.clearTimer();\n            this.timer = setTimeout(() => {\n                this.repeat(event, 40, dir);\n            }, i);\n\n            this.spin(event, dir);\n        },\n        spin(event, dir) {\n            if (this.$refs.input) {\n                let step = this.step * dir;\n                let currentValue = this.parseValue(this.$refs.input.$el.value) || 0;\n                let newValue = this.validateValue(currentValue + step);\n\n                this.updateInput(newValue, null, 'spin');\n                this.updateModel(event, newValue);\n\n                this.handleOnInput(event, currentValue, newValue);\n            }\n        },\n        onUpButtonMouseDown(event) {\n            if (!this.$attrs.disabled) {\n                this.$refs.input.$el.focus();\n                this.repeat(event, null, 1);\n                event.preventDefault();\n            }\n        },\n        onUpButtonMouseUp() {\n            if (!this.$attrs.disabled) {\n                this.clearTimer();\n            }\n        },\n        onUpButtonMouseLeave() {\n            if (!this.$attrs.disabled) {\n                this.clearTimer();\n            }\n        },\n        onUpButtonKeyUp() {\n            if (!this.$attrs.disabled) {\n                this.clearTimer();\n            }\n        },\n        onUpButtonKeyDown(event) {\n            if (event.keyCode === 32 || event.keyCode === 13) {\n                this.repeat(event, null, 1);\n            }\n        },\n        onDownButtonMouseDown(event) {\n            if (!this.$attrs.disabled) {\n                this.$refs.input.$el.focus();\n                this.repeat(event, null, -1);\n                event.preventDefault();\n            }\n        },\n        onDownButtonMouseUp() {\n            if (!this.$attrs.disabled) {\n                this.clearTimer();\n            }\n        },\n        onDownButtonMouseLeave() {\n            if (!this.$attrs.disabled) {\n                this.clearTimer();\n            }\n        },\n        onDownButtonKeyUp() {\n            if (!this.$attrs.disabled) {\n                this.clearTimer();\n            }\n        },\n        onDownButtonKeyDown(event) {\n            if (event.keyCode === 32 || event.keyCode === 13) {\n                this.repeat(event, null, -1);\n            }\n        },\n        onUserInput() {\n            if (this.isSpecialChar) {\n                this.$refs.input.$el.value = this.lastValue;\n            }\n            this.isSpecialChar = false;\n        },\n        onInputKeyDown(event) {\n            this.lastValue = event.target.value;\n            if (event.shiftKey || event.altKey) {\n                this.isSpecialChar = true;\n                return;\n            }\n\n            let selectionStart = event.target.selectionStart;\n            let selectionEnd = event.target.selectionEnd;\n            let inputValue = event.target.value;\n            let newValueStr = null;\n\n            if (event.altKey) {\n                event.preventDefault();\n            }\n\n            switch (event.which) {\n                //up\n                case 38:\n                    this.spin(event, 1);\n                    event.preventDefault();\n                break;\n\n                //down\n                case 40:\n                    this.spin(event, -1);\n                    event.preventDefault();\n                break;\n\n                //left\n                case 37:\n                    if (!this.isNumeralChar(inputValue.charAt(selectionStart - 1))) {\n                        event.preventDefault();\n                    }\n                break;\n\n                //right\n                case 39:\n                    if (!this.isNumeralChar(inputValue.charAt(selectionStart))) {\n                        event.preventDefault();\n                    }\n                break;\n\n                //enter\n                case 13:\n                    newValueStr = this.validateValue(this.parseValue(inputValue));\n                    this.$refs.input.$el.value = this.formatValue(newValueStr);\n                    this.$refs.input.$el.setAttribute('aria-valuenow', newValueStr);\n                    this.updateModel(event, newValueStr);\n                break;\n\n                //backspace\n                case 8: {\n                    event.preventDefault();\n\n                    if (selectionStart === selectionEnd) {\n                        const deleteChar = inputValue.charAt(selectionStart - 1);\n                        const { decimalCharIndex, decimalCharIndexWithoutPrefix } = this.getDecimalCharIndexes(inputValue);\n\n                        if (this.isNumeralChar(deleteChar)) {\n                            const decimalLength = this.getDecimalLength(inputValue);\n\n                            if (this._group.test(deleteChar)) {\n                                this._group.lastIndex = 0;\n                                newValueStr = inputValue.slice(0, selectionStart - 2) + inputValue.slice(selectionStart - 1);\n                            }\n                            else if (this._decimal.test(deleteChar)) {\n                                this._decimal.lastIndex = 0;\n\n                                if (decimalLength) {\n                                    this.$refs.input.$el.setSelectionRange(selectionStart - 1, selectionStart - 1);\n                                }\n                                else {\n                                    newValueStr = inputValue.slice(0, selectionStart - 1) + inputValue.slice(selectionStart);\n                                }\n                            }\n                            else if (decimalCharIndex > 0 && selectionStart > decimalCharIndex) {\n                                const insertedText = this.isDecimalMode() && (this.minFractionDigits || 0) < decimalLength ? '' : '0';\n                                newValueStr = inputValue.slice(0, selectionStart - 1) + insertedText + inputValue.slice(selectionStart);\n                            }\n                            else if (decimalCharIndexWithoutPrefix === 1) {\n                                newValueStr = inputValue.slice(0, selectionStart - 1) + '0' + inputValue.slice(selectionStart);\n                                newValueStr = this.parseValue(newValueStr) > 0 ? newValueStr : '';\n                            }\n                            else {\n                                newValueStr = inputValue.slice(0, selectionStart - 1) + inputValue.slice(selectionStart);\n                            }\n                        }\n\n                        this.updateValue(event, newValueStr, null, 'delete-single');\n                    }\n                    else {\n                        newValueStr = this.deleteRange(inputValue, selectionStart, selectionEnd);\n                        this.updateValue(event, newValueStr, null, 'delete-range');\n                    }\n\n                    break;\n                }\n\n                // del\n                case 46:\n                    event.preventDefault();\n\n                    if (selectionStart === selectionEnd) {\n                        const deleteChar = inputValue.charAt(selectionStart);\n                        const { decimalCharIndex, decimalCharIndexWithoutPrefix } = this.getDecimalCharIndexes(inputValue);\n\n                        if (this.isNumeralChar(deleteChar)) {\n                            const decimalLength = this.getDecimalLength(inputValue);\n\n                            if (this._group.test(deleteChar)) {\n                                this._group.lastIndex = 0;\n                                newValueStr = inputValue.slice(0, selectionStart) + inputValue.slice(selectionStart + 2);\n                            }\n                            else if (this._decimal.test(deleteChar)) {\n                                this._decimal.lastIndex = 0;\n\n                                if (decimalLength) {\n                                    this.$refs.input.$el.setSelectionRange(selectionStart + 1, selectionStart + 1);\n                                }\n                                else {\n                                    newValueStr = inputValue.slice(0, selectionStart) + inputValue.slice(selectionStart + 1);\n                                }\n                            }\n                            else if (decimalCharIndex > 0 && selectionStart > decimalCharIndex) {\n                                const insertedText = this.isDecimalMode() && (this.minFractionDigits || 0) < decimalLength ? '' : '0';\n                                newValueStr = inputValue.slice(0, selectionStart) + insertedText + inputValue.slice(selectionStart + 1);\n                            }\n                            else if (decimalCharIndexWithoutPrefix === 1) {\n                                newValueStr = inputValue.slice(0, selectionStart) + '0' + inputValue.slice(selectionStart + 1);\n                                newValueStr = this.parseValue(newValueStr) > 0 ? newValueStr : '';\n                            }\n                            else {\n                                newValueStr = inputValue.slice(0, selectionStart) + inputValue.slice(selectionStart + 1);\n                            }\n                        }\n\n                        this.updateValue(event, newValueStr, null, 'delete-back-single');\n                    }\n                    else {\n                        newValueStr = this.deleteRange(inputValue, selectionStart, selectionEnd);\n                        this.updateValue(event, newValueStr, null, 'delete-range');\n                    }\n                break;\n\n                default:\n                break;\n            }\n        },\n        onInputKeyPress(event) {\n            event.preventDefault();\n            let code = event.which || event.keyCode;\n            let char = String.fromCharCode(code);\n            const isDecimalSign = this.isDecimalSign(char);\n            const isMinusSign = this.isMinusSign(char);\n\n            if ((48 <= code && code <= 57) || isMinusSign || isDecimalSign) {\n                this.insert(event, char, { isDecimalSign, isMinusSign });\n            }\n        },\n        onPaste(event) {\n            event.preventDefault();\n            let data = (event.clipboardData || window['clipboardData']).getData('Text');\n            if (data) {\n                let filteredData = this.parseValue(data);\n                if (filteredData != null) {\n                    this.insert(event, filteredData.toString());\n                }\n            }\n        },\n        allowMinusSign() {\n            return this.min === null || this.min < 0;\n        },\n        isMinusSign(char) {\n            if (this._minusSign.test(char) || char === '-') {\n                this._minusSign.lastIndex = 0;\n                return true;\n            }\n\n            return false;\n        },\n        isDecimalSign(char) {\n            if (this._decimal.test(char)) {\n                this._decimal.lastIndex = 0;\n                return true;\n            }\n\n            return false;\n        },\n        isDecimalMode() {\n            return this.mode === 'decimal';\n        },\n        getDecimalCharIndexes(val) {\n            let decimalCharIndex = val.search(this._decimal);\n            this._decimal.lastIndex = 0;\n\n            const filteredVal = val.replace(this._prefix, '').trim().replace(/\\s/g, '').replace(this._currency, '');\n            const decimalCharIndexWithoutPrefix = filteredVal.search(this._decimal);\n            this._decimal.lastIndex = 0;\n\n            return { decimalCharIndex, decimalCharIndexWithoutPrefix };\n        },\n        getCharIndexes(val) {\n            const decimalCharIndex = val.search(this._decimal);\n            this._decimal.lastIndex = 0;\n            const minusCharIndex = val.search(this._minusSign);\n            this._minusSign.lastIndex = 0;\n            const suffixCharIndex = val.search(this._suffix);\n            this._suffix.lastIndex = 0;\n            const currencyCharIndex = val.search(this._currency);\n            this._currency.lastIndex = 0;\n\n            return { decimalCharIndex, minusCharIndex, suffixCharIndex, currencyCharIndex };\n        },\n        insert(event, text, sign = { isDecimalSign: false, isMinusSign: false }) {\n            const minusCharIndexOnText = text.search(this._minusSign);\n            this._minusSign.lastIndex = 0;\n            if (!this.allowMinusSign() && minusCharIndexOnText !== -1) {\n                return;\n            }\n\n            const selectionStart = this.$refs.input.$el.selectionStart;\n            const selectionEnd = this.$refs.input.$el.selectionEnd;\n            let inputValue = this.$refs.input.$el.value.trim();\n            const { decimalCharIndex, minusCharIndex, suffixCharIndex, currencyCharIndex } = this.getCharIndexes(inputValue);\n            let newValueStr;\n\n            if (sign.isMinusSign) {\n                if (selectionStart === 0) {\n                    newValueStr = inputValue;\n                    if (minusCharIndex === -1 || selectionEnd !== 0) {\n                        newValueStr = this.insertText(inputValue, text, 0, selectionEnd);\n                    }\n\n                    this.updateValue(event, newValueStr, text, 'insert');\n                }\n            }\n            else if (sign.isDecimalSign) {\n                if (decimalCharIndex > 0 && selectionStart === decimalCharIndex) {\n                    this.updateValue(event, inputValue, text, 'insert');\n                }\n                else if (decimalCharIndex > selectionStart && decimalCharIndex < selectionEnd) {\n                    newValueStr = this.insertText(inputValue, text, selectionStart, selectionEnd);\n                    this.updateValue(event, newValueStr, text, 'insert');\n                }\n                else if (decimalCharIndex === -1 && this.maxFractionDigits) {\n                    newValueStr = this.insertText(inputValue, text, selectionStart, selectionEnd);\n                    this.updateValue(event, newValueStr, text, 'insert');\n                }\n            }\n            else {\n                const maxFractionDigits = this.numberFormat.resolvedOptions().maximumFractionDigits;\n                const operation = selectionStart !== selectionEnd ? 'range-insert' : 'insert';\n\n                if (decimalCharIndex > 0 && selectionStart > decimalCharIndex) {\n                    if ((selectionStart + text.length - (decimalCharIndex + 1)) <= maxFractionDigits) {\n                        const charIndex = currencyCharIndex >= selectionStart ? currencyCharIndex - 1 : (suffixCharIndex >= selectionStart ? suffixCharIndex : inputValue.length);\n\n                        newValueStr = inputValue.slice(0, selectionStart) + text + inputValue.slice(selectionStart + text.length, charIndex) + inputValue.slice(charIndex);\n                        this.updateValue(event, newValueStr, text, operation);\n                    }\n                }\n                else {\n                    newValueStr = this.insertText(inputValue, text, selectionStart, selectionEnd);\n                    this.updateValue(event, newValueStr, text, operation);\n                }\n            }\n        },\n        insertText(value, text, start, end) {\n            let textSplit = text === '.' ? text : text.split('.');\n\n            if (textSplit.length === 2) {\n                const decimalCharIndex = value.slice(start, end).search(this._decimal);\n                this._decimal.lastIndex = 0;\n                return (decimalCharIndex > 0) ? value.slice(0, start) + this.formatValue(text) + value.slice(end) : (value || this.formatValue(text));\n            }\n            else if ((end - start) === value.length) {\n                return this.formatValue(text);\n            }\n            else if (start === 0) {\n                return text + value.slice(end);\n            }\n            else if (end === value.length) {\n                return value.slice(0, start) + text;\n            }\n            else {\n                return value.slice(0, start) + text + value.slice(end);\n            }\n        },\n        deleteRange(value, start, end) {\n            let newValueStr;\n\n            if ((end - start) === value.length)\n                newValueStr = '';\n            else if (start === 0)\n                newValueStr = value.slice(end);\n            else if (end === value.length)\n                newValueStr = value.slice(0, start);\n            else\n                newValueStr = value.slice(0, start) + value.slice(end);\n\n            return newValueStr;\n        },\n        initCursor() {\n            let selectionStart = this.$refs.input.$el.selectionStart;\n            let inputValue = this.$refs.input.$el.value;\n            let valueLength = inputValue.length;\n            let index = null;\n\n            // remove prefix\n            let prefixLength = (this.prefixChar || '').length;\n            inputValue = inputValue.replace(this._prefix, '');\n            selectionStart = selectionStart - prefixLength;\n\n            let char = inputValue.charAt(selectionStart);\n            if (this.isNumeralChar(char)) {\n                return selectionStart + prefixLength;\n            }\n\n            //left\n            let i = selectionStart - 1;\n            while (i >= 0) {\n                char = inputValue.charAt(i);\n                if (this.isNumeralChar(char)) {\n                    index = i + prefixLength;\n                    break;\n                }\n                else {\n                    i--;\n                }\n            }\n\n            if (index !== null) {\n                this.$refs.input.$el.setSelectionRange(index + 1, index + 1);\n            }\n            else {\n                i = selectionStart;\n                while (i < valueLength) {\n                    char = inputValue.charAt(i);\n                    if (this.isNumeralChar(char)) {\n                        index = i + prefixLength;\n                        break;\n                    }\n                    else {\n                        i++;\n                    }\n                }\n\n                if (index !== null) {\n                    this.$refs.input.$el.setSelectionRange(index, index);\n                }\n            }\n\n            return index || 0;\n        },\n        onInputClick() {\n            this.initCursor();\n        },\n        isNumeralChar(char) {\n            if (char.length === 1 && (this._numeral.test(char) || this._decimal.test(char) || this._group.test(char) || this._minusSign.test(char))) {\n                this.resetRegex();\n                return true;\n            }\n\n            return false;\n        },\n        resetRegex() {\n            this._numeral.lastIndex =  0;\n            this._decimal.lastIndex =  0;\n            this._group.lastIndex =  0;\n            this._minusSign.lastIndex =  0;\n        },\n        updateValue(event, valueStr, insertedValueStr, operation) {\n            let currentValue = this.$refs.input.$el.value;\n            let newValue = null;\n\n            if (valueStr != null) {\n                newValue = this.parseValue(valueStr);\n                newValue = !newValue && !this.allowEmpty ? 0 : newValue;\n                this.updateInput(newValue, insertedValueStr, operation, valueStr);\n\n                this.handleOnInput(event, currentValue, newValue);\n            }\n        },\n        handleOnInput(event, currentValue, newValue) {\n            if (this.isValueChanged(currentValue, newValue)) {\n                this.$emit('input', { originalEvent: event, value: newValue });\n            }\n        },\n        isValueChanged(currentValue, newValue) {\n            if (newValue === null && currentValue !== null) {\n                return true;\n            }\n\n            if (newValue != null) {\n                let parsedCurrentValue = (typeof currentValue === 'string') ? this.parseValue(currentValue) : currentValue;\n                return newValue !== parsedCurrentValue;\n            }\n\n            return false;\n        },\n        validateValue(value) {\n            if (value === '-' || value == null) {\n                return null;\n            }\n\n            if (this.min != null && value < this.min) {\n                return this.min;\n            }\n\n            if (this.max != null && value > this.max) {\n                return this.max;\n            }\n\n            return value;\n        },\n        updateInput(value, insertedValueStr, operation, valueStr) {\n            insertedValueStr = insertedValueStr || '';\n\n            let inputValue = this.$refs.input.$el.value;\n            let newValue = this.formatValue(value);\n            let currentLength = inputValue.length;\n\n            if (newValue !== valueStr) {\n                newValue = this.concatValues(newValue, valueStr);\n            }\n\n            if (currentLength === 0) {\n                this.$refs.input.$el.value = newValue;\n                this.$refs.input.$el.setSelectionRange(0, 0);\n                const index = this.initCursor();\n                const selectionEnd = index + insertedValueStr.length;\n                this.$refs.input.$el.setSelectionRange(selectionEnd, selectionEnd);\n            }\n            else {\n                let selectionStart = this.$refs.input.$el.selectionStart;\n                let selectionEnd = this.$refs.input.$el.selectionEnd;\n                this.$refs.input.$el.value = newValue;\n                let newLength = newValue.length;\n\n                if (operation === 'range-insert') {\n                    const startValue = this.parseValue((inputValue || '').slice(0, selectionStart));\n                    const startValueStr = startValue !== null ? startValue.toString() : '';\n                    const startExpr = startValueStr.split('').join(`(${this.groupChar})?`);\n                    const sRegex = new RegExp(startExpr, 'g');\n                    sRegex.test(newValue);\n\n                    const tExpr = insertedValueStr.split('').join(`(${this.groupChar})?`);\n                    const tRegex = new RegExp(tExpr, 'g');\n                    tRegex.test(newValue.slice(sRegex.lastIndex));\n\n                    selectionEnd = sRegex.lastIndex + tRegex.lastIndex;\n                    this.$refs.input.$el.setSelectionRange(selectionEnd, selectionEnd);\n                }\n                else if (newLength === currentLength) {\n                    if (operation === 'insert' || operation === 'delete-back-single')\n                        this.$refs.input.$el.setSelectionRange(selectionEnd + 1, selectionEnd + 1);\n                    else if (operation === 'delete-single')\n                        this.$refs.input.$el.setSelectionRange(selectionEnd - 1, selectionEnd - 1);\n                    else if (operation === 'delete-range' || operation === 'spin')\n                        this.$refs.input.$el.setSelectionRange(selectionEnd, selectionEnd);\n                }\n                else if (operation === 'delete-back-single') {\n                    let prevChar = inputValue.charAt(selectionEnd - 1);\n                    let nextChar = inputValue.charAt(selectionEnd);\n                    let diff = currentLength - newLength;\n                    let isGroupChar = this._group.test(nextChar);\n\n                    if (isGroupChar && diff === 1) {\n                        selectionEnd += 1;\n                    }\n                    else if (!isGroupChar && this.isNumeralChar(prevChar)) {\n                        selectionEnd += (-1 * diff) + 1;\n                    }\n\n                    this._group.lastIndex = 0;\n                    this.$refs.input.$el.setSelectionRange(selectionEnd, selectionEnd);\n                }\n                else if (inputValue === '-' && operation === 'insert') {\n                    this.$refs.input.$el.setSelectionRange(0, 0);\n                    const index = this.initCursor();\n                    const selectionEnd = index + insertedValueStr.length + 1;\n                    this.$refs.input.$el.setSelectionRange(selectionEnd, selectionEnd);\n                }\n                else {\n                    selectionEnd = selectionEnd + (newLength - currentLength);\n                    this.$refs.input.$el.setSelectionRange(selectionEnd, selectionEnd);\n                }\n            }\n\n            this.$refs.input.$el.setAttribute('aria-valuenow', value);\n        },\n        concatValues(val1, val2) {\n            if (val1 && val2) {\n                let decimalCharIndex = val2.search(this._decimal);\n                this._decimal.lastIndex = 0;\n\n                return decimalCharIndex !== -1 ? (val1.split(this._decimal)[0] + val2.slice(decimalCharIndex)) : val1;\n            }\n\n            return val1;\n        },\n        getDecimalLength(value) {\n            if (value) {\n                const valueSplit = value.split(this._decimal);\n\n                if (valueSplit.length === 2) {\n                    return valueSplit[1].replace(this._suffix, '')\n                                .trim()\n                                .replace(/\\s/g, '')\n                                .replace(this._currency, '').length;\n                }\n            }\n\n            return 0;\n        },\n        updateModel(event, value) {\n            this.$emit('update:modelValue', value);\n        },\n        onInputFocus() {\n            this.focused = true;\n        },\n        onInputBlur(event) {\n            this.focused = false;\n\n            let input = event.target;\n            let newValue = this.validateValue(this.parseValue(input.value));\n            input.value = this.formatValue(newValue);\n            input.setAttribute('aria-valuenow', newValue);\n            this.updateModel(event, newValue);\n        },\n        clearTimer() {\n            if (this.timer) {\n                clearInterval(this.timer);\n            }\n        }\n    },\n    computed: {\n        containerClass() {\n            return ['p-inputnumber p-component p-inputwrapper', this.class, {\n                'p-inputwrapper-filled': this.filled,\n                'p-inputwrapper-focus': this.focused,\n                'p-inputnumber-buttons-stacked': this.showButtons && this.buttonLayout === 'stacked',\n                'p-inputnumber-buttons-horizontal': this.showButtons && this.buttonLayout === 'horizontal',\n                'p-inputnumber-buttons-vertical': this.showButtons && this.buttonLayout === 'vertical'\n            }];\n        },\n        upButtonClass() {\n            return ['p-inputnumber-button p-inputnumber-button-up', this.incrementButtonClass];\n        },\n        downButtonClass() {\n            return ['p-inputnumber-button p-inputnumber-button-down', this.decrementButtonClass];\n        },\n        filled() {\n            return (this.modelValue != null && this.modelValue.toString().length > 0)\n        },\n        upButtonListeners() {\n            return {\n                mousedown: event => this.onUpButtonMouseDown(event),\n                mouseup: event => this.onUpButtonMouseUp(event),\n                mouseleave: event => this.onUpButtonMouseLeave(event),\n                keydown: event => this.onUpButtonKeyDown(event),\n                keyup: event => this.onUpButtonKeyUp(event)\n            }\n        },\n        downButtonListeners() {\n            return {\n                mousedown: event => this.onDownButtonMouseDown(event),\n                mouseup: event => this.onDownButtonMouseUp(event),\n                mouseleave: event => this.onDownButtonMouseLeave(event),\n                keydown: event => this.onDownButtonKeyDown(event),\n                keyup: event => this.onDownButtonKeyUp(event)\n            }\n        },\n        formattedValue() {\n            const val = !this.modelValue && !this.allowEmpty ? 0 : this.modelValue;\n            return this.formatValue(val);\n        },\n        getFormatter() {\n            return this.numberFormat;\n        }\n    },\n    components: {\n        'INInputText': InputText,\n        'INButton': Button\n    }\n}\n</script>\n\n<style>\n.p-inputnumber {\n    display: inline-flex;\n}\n\n.p-inputnumber-button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex: 0 0 auto;\n}\n\n.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,\n.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label {\n    display: none;\n}\n\n.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    padding: 0;\n}\n\n.p-inputnumber-buttons-stacked .p-inputnumber-input {\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n}\n\n.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down {\n    border-top-left-radius: 0;\n    border-top-right-radius: 0;\n    border-bottom-left-radius: 0;\n    padding: 0;\n}\n\n.p-inputnumber-buttons-stacked .p-inputnumber-button-group {\n    display: flex;\n    flex-direction: column;\n}\n\n.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button {\n    flex: 1 1 auto;\n}\n\n.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up {\n    order: 3;\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n}\n\n.p-inputnumber-buttons-horizontal .p-inputnumber-input {\n    order: 2;\n    border-radius: 0;\n}\n\n.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down {\n    order: 1;\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n}\n\n.p-inputnumber-buttons-vertical {\n    flex-direction: column;\n}\n\n.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up {\n    order: 1;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    width: 100%;\n}\n\n.p-inputnumber-buttons-vertical .p-inputnumber-input {\n    order: 2;\n    border-radius: 0;\n    text-align: center;\n}\n\n.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down {\n    order: 3;\n    border-top-left-radius: 0;\n    border-top-right-radius: 0;\n    width: 100%;\n}\n\n.p-inputnumber-input {\n    flex: 1 1 auto;\n}\n\n.p-fluid .p-inputnumber {\n    width: 100%;\n}\n\n.p-fluid .p-inputnumber .p-inputnumber-input {\n    width: 1%;\n}\n\n.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input {\n    width: 100%;\n}\n</style>\n"],"sourceRoot":""}]}