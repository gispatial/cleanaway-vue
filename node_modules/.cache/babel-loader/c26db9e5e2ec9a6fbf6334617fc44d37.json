{"remainingRequest":"/Users/crocslut/Desktop/Git/main-cleanaway-pwa/node_modules/babel-loader/lib/index.js!/Users/crocslut/Desktop/Git/main-cleanaway-pwa/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/crocslut/Desktop/Git/main-cleanaway-pwa/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/crocslut/Desktop/Git/main-cleanaway-pwa/src/components/calendar/Calendar.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/crocslut/Desktop/Git/main-cleanaway-pwa/src/components/calendar/Calendar.vue","mtime":1634589566209},{"path":"/Users/crocslut/Desktop/Git/main-cleanaway-pwa/node_modules/cache-loader/dist/cjs.js","mtime":1634585934434},{"path":"/Users/crocslut/Desktop/Git/main-cleanaway-pwa/node_modules/babel-loader/lib/index.js","mtime":1634585934594},{"path":"/Users/crocslut/Desktop/Git/main-cleanaway-pwa/node_modules/cache-loader/dist/cjs.js","mtime":1634585934434},{"path":"/Users/crocslut/Desktop/Git/main-cleanaway-pwa/node_modules/vue-loader-v16/dist/index.js","mtime":1634585949898}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL2Nyb2NzbHV0L0Rlc2t0b3AvR2l0L21haW4tY2xlYW5hd2F5LXB3YS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvY3JvY3NsdXQvRGVza3RvcC9HaXQvbWFpbi1jbGVhbmF3YXktcHdhL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciBmcm9tICIvVXNlcnMvY3JvY3NsdXQvRGVza3RvcC9HaXQvbWFpbi1jbGVhbmF3YXktcHdhL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwZWF0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIjsKaW1wb3J0IHsgQ29ubmVjdGVkT3ZlcmxheVNjcm9sbEhhbmRsZXIsIERvbUhhbmRsZXIsIFpJbmRleFV0aWxzIH0gZnJvbSAncHJpbWV2dWUvdXRpbHMnOwppbXBvcnQgT3ZlcmxheUV2ZW50QnVzIGZyb20gJ3ByaW1ldnVlL292ZXJsYXlldmVudGJ1cyc7CmltcG9ydCBJbnB1dFRleHQgZnJvbSAncHJpbWV2dWUvaW5wdXR0ZXh0JzsKaW1wb3J0IEJ1dHRvbiBmcm9tICdwcmltZXZ1ZS9idXR0b24nOwppbXBvcnQgUmlwcGxlIGZyb20gJ3ByaW1ldnVlL3JpcHBsZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2FsZW5kYXInLAogIGluaGVyaXRBdHRyczogZmFsc2UsCiAgZW1pdHM6IFsnc2hvdycsICdoaWRlJywgJ21vbnRoLWNoYW5nZScsICd5ZWFyLWNoYW5nZScsICdkYXRlLXNlbGVjdCcsICd1cGRhdGU6bW9kZWxWYWx1ZScsICd0b2RheS1jbGljaycsICdjbGVhci1jbGljayddLAogIHByb3BzOiB7CiAgICBtb2RlbFZhbHVlOiBudWxsLAogICAgc2VsZWN0aW9uTW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdzaW5nbGUnCiAgICB9LAogICAgZGF0ZUZvcm1hdDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBpbmxpbmU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBzaG93T3RoZXJNb250aHM6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHNlbGVjdE90aGVyTW9udGhzOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgc2hvd0ljb246IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBpY29uOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ3BpIHBpLWNhbGVuZGFyJwogICAgfSwKICAgIG51bWJlck9mTW9udGhzOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMQogICAgfSwKICAgIHZpZXc6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnZGF0ZScKICAgIH0sCiAgICB0b3VjaFVJOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgbW9udGhOYXZpZ2F0b3I6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICB5ZWFyTmF2aWdhdG9yOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgeWVhclJhbmdlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIHBhbmVsQ2xhc3M6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgbWluRGF0ZTogewogICAgICB0eXBlOiBEYXRlLAogICAgICB2YWx1ZTogbnVsbAogICAgfSwKICAgIG1heERhdGU6IHsKICAgICAgdHlwZTogRGF0ZSwKICAgICAgdmFsdWU6IG51bGwKICAgIH0sCiAgICBkaXNhYmxlZERhdGVzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICB2YWx1ZTogbnVsbAogICAgfSwKICAgIGRpc2FibGVkRGF5czogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgdmFsdWU6IG51bGwKICAgIH0sCiAgICBtYXhEYXRlQ291bnQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICB2YWx1ZTogbnVsbAogICAgfSwKICAgIHNob3dPbkZvY3VzOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBhdXRvWkluZGV4OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBiYXNlWkluZGV4OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMAogICAgfSwKICAgIHNob3dCdXR0b25CYXI6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBzaG9ydFllYXJDdXRvZmY6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnKzEwJwogICAgfSwKICAgIHNob3dUaW1lOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgdGltZU9ubHk6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBob3VyRm9ybWF0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJzI0JwogICAgfSwKICAgIHN0ZXBIb3VyOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMQogICAgfSwKICAgIHN0ZXBNaW51dGU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAxCiAgICB9LAogICAgc3RlcFNlY29uZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDEKICAgIH0sCiAgICBzaG93U2Vjb25kczogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGhpZGVPbkRhdGVUaW1lU2VsZWN0OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgdGltZVNlcGFyYXRvcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICc6JwogICAgfSwKICAgIHNob3dXZWVrOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgbWFudWFsSW5wdXQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIGFwcGVuZFRvOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2JvZHknCiAgICB9LAogICAga2VlcEludmFsaWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBpbnB1dENsYXNzOiBudWxsLAogICAgaW5wdXRTdHlsZTogbnVsbCwKICAgIGNsYXNzOiBudWxsLAogICAgc3R5bGU6IG51bGwKICB9LAogIG5hdmlnYXRpb25TdGF0ZTogbnVsbCwKICBzY3JvbGxIYW5kbGVyOiBudWxsLAogIG91dHNpZGVDbGlja0xpc3RlbmVyOiBudWxsLAogIG1hc2tDbGlja0xpc3RlbmVyOiBudWxsLAogIHJlc2l6ZUxpc3RlbmVyOiBudWxsLAogIG92ZXJsYXk6IG51bGwsCiAgbWFzazogbnVsbCwKICB0aW1lUGlja2VyVGltZXI6IG51bGwsCiAgaXNLZXlkb3duOiBmYWxzZSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy51cGRhdGVDdXJyZW50TWV0YURhdGEoKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy5pbmxpbmUgJiYgIXRoaXMuJGF0dHJzLmRpc2FibGVkKSB7CiAgICAgIHRoaXMuaW5pdEZvY3VzYWJsZUNlbGwoKTsKICAgIH0KICB9LAogIHVwZGF0ZWQ6IGZ1bmN0aW9uIHVwZGF0ZWQoKSB7CiAgICBpZiAodGhpcy5vdmVybGF5KSB7CiAgICAgIHRoaXMudXBkYXRlRm9jdXMoKTsKICAgIH0KCiAgICBpZiAodGhpcy4kcmVmcy5pbnB1dCAmJiB0aGlzLnNlbGVjdGlvblN0YXJ0ICE9IG51bGwgJiYgdGhpcy5zZWxlY3Rpb25FbmQgIT0gbnVsbCkgewogICAgICB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZWxlY3Rpb25TdGFydCA9IHRoaXMuc2VsZWN0aW9uU3RhcnQ7CiAgICAgIHRoaXMuJHJlZnMuaW5wdXQuJGVsLnNlbGVjdGlvbkVuZCA9IHRoaXMuc2VsZWN0aW9uRW5kOwogICAgICB0aGlzLnNlbGVjdGlvblN0YXJ0ID0gbnVsbDsKICAgICAgdGhpcy5zZWxlY3Rpb25FbmQgPSBudWxsOwogICAgfQogIH0sCiAgYmVmb3JlVW5tb3VudDogZnVuY3Rpb24gYmVmb3JlVW5tb3VudCgpIHsKICAgIGlmICh0aGlzLnRpbWVQaWNrZXJUaW1lcikgewogICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lUGlja2VyVGltZXIpOwogICAgfQoKICAgIGlmICh0aGlzLm1hc2spIHsKICAgICAgdGhpcy5kZXN0cm95TWFzaygpOwogICAgfQoKICAgIHRoaXMudW5iaW5kT3V0c2lkZUNsaWNrTGlzdGVuZXIoKTsKICAgIHRoaXMudW5iaW5kUmVzaXplTGlzdGVuZXIoKTsKCiAgICBpZiAodGhpcy5zY3JvbGxIYW5kbGVyKSB7CiAgICAgIHRoaXMuc2Nyb2xsSGFuZGxlci5kZXN0cm95KCk7CiAgICAgIHRoaXMuc2Nyb2xsSGFuZGxlciA9IG51bGw7CiAgICB9CgogICAgaWYgKHRoaXMub3ZlcmxheSAmJiB0aGlzLmF1dG9aSW5kZXgpIHsKICAgICAgWkluZGV4VXRpbHMuY2xlYXIodGhpcy5vdmVybGF5KTsKICAgIH0KCiAgICB0aGlzLm92ZXJsYXkgPSBudWxsOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGN1cnJlbnRNb250aDogbnVsbCwKICAgICAgY3VycmVudFllYXI6IG51bGwsCiAgICAgIGN1cnJlbnRIb3VyOiBudWxsLAogICAgICBjdXJyZW50TWludXRlOiBudWxsLAogICAgICBjdXJyZW50U2Vjb25kOiBudWxsLAogICAgICBwbTogbnVsbCwKICAgICAgZm9jdXNlZDogZmFsc2UsCiAgICAgIG92ZXJsYXlWaXNpYmxlOiBmYWxzZQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBtb2RlbFZhbHVlOiBmdW5jdGlvbiBtb2RlbFZhbHVlKCkgewogICAgICB0aGlzLnVwZGF0ZUN1cnJlbnRNZXRhRGF0YSgpOwogICAgfSwKICAgIHNob3dUaW1lOiBmdW5jdGlvbiBzaG93VGltZSgpIHsKICAgICAgdGhpcy51cGRhdGVDdXJyZW50TWV0YURhdGEoKTsKICAgIH0sCiAgICBtb250aHM6IGZ1bmN0aW9uIG1vbnRocygpIHsKICAgICAgaWYgKHRoaXMub3ZlcmxheSkgewogICAgICAgIHNldFRpbWVvdXQodGhpcy51cGRhdGVGb2N1cywgMCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGlzQ29tcGFyYWJsZTogZnVuY3Rpb24gaXNDb21wYXJhYmxlKCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlbFZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHRoaXMubW9kZWxWYWx1ZSAhPT0gJ3N0cmluZyc7CiAgICB9LAogICAgaXNTZWxlY3RlZDogZnVuY3Rpb24gaXNTZWxlY3RlZChkYXRlTWV0YSkgewogICAgICBpZiAoIXRoaXMuaXNDb21wYXJhYmxlKCkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm1vZGVsVmFsdWUpIHsKICAgICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbGVjdGlvbigpKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5pc0RhdGVFcXVhbHModGhpcy5tb2RlbFZhbHVlLCBkYXRlTWV0YSk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzTXVsdGlwbGVTZWxlY3Rpb24oKSkgewogICAgICAgICAgdmFyIHNlbGVjdGVkID0gZmFsc2U7CgogICAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMubW9kZWxWYWx1ZSksCiAgICAgICAgICAgICAgX3N0ZXA7CgogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICB2YXIgZGF0ZSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICAgIHNlbGVjdGVkID0gdGhpcy5pc0RhdGVFcXVhbHMoZGF0ZSwgZGF0ZU1ldGEpOwoKICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBzZWxlY3RlZDsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNSYW5nZVNlbGVjdGlvbigpKSB7CiAgICAgICAgICBpZiAodGhpcy5tb2RlbFZhbHVlWzFdKSByZXR1cm4gdGhpcy5pc0RhdGVFcXVhbHModGhpcy5tb2RlbFZhbHVlWzBdLCBkYXRlTWV0YSkgfHwgdGhpcy5pc0RhdGVFcXVhbHModGhpcy5tb2RlbFZhbHVlWzFdLCBkYXRlTWV0YSkgfHwgdGhpcy5pc0RhdGVCZXR3ZWVuKHRoaXMubW9kZWxWYWx1ZVswXSwgdGhpcy5tb2RlbFZhbHVlWzFdLCBkYXRlTWV0YSk7ZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzRGF0ZUVxdWFscyh0aGlzLm1vZGVsVmFsdWVbMF0sIGRhdGVNZXRhKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBpc01vbnRoU2VsZWN0ZWQ6IGZ1bmN0aW9uIGlzTW9udGhTZWxlY3RlZChtb250aCkgewogICAgICByZXR1cm4gdGhpcy5pc0NvbXBhcmFibGUoKSA/IHRoaXMubW9kZWxWYWx1ZS5nZXRNb250aCgpID09PSBtb250aCAmJiB0aGlzLm1vZGVsVmFsdWUuZ2V0RnVsbFllYXIoKSA9PT0gdGhpcy5jdXJyZW50WWVhciA6IGZhbHNlOwogICAgfSwKICAgIGlzRGF0ZUVxdWFsczogZnVuY3Rpb24gaXNEYXRlRXF1YWxzKHZhbHVlLCBkYXRlTWV0YSkgewogICAgICBpZiAodmFsdWUpIHJldHVybiB2YWx1ZS5nZXREYXRlKCkgPT09IGRhdGVNZXRhLmRheSAmJiB2YWx1ZS5nZXRNb250aCgpID09PSBkYXRlTWV0YS5tb250aCAmJiB2YWx1ZS5nZXRGdWxsWWVhcigpID09PSBkYXRlTWV0YS55ZWFyO2Vsc2UgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIGlzRGF0ZUJldHdlZW46IGZ1bmN0aW9uIGlzRGF0ZUJldHdlZW4oc3RhcnQsIGVuZCwgZGF0ZU1ldGEpIHsKICAgICAgdmFyIGJldHdlZW4gPSBmYWxzZTsKCiAgICAgIGlmIChzdGFydCAmJiBlbmQpIHsKICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGRhdGVNZXRhLnllYXIsIGRhdGVNZXRhLm1vbnRoLCBkYXRlTWV0YS5kYXkpOwogICAgICAgIHJldHVybiBzdGFydC5nZXRUaW1lKCkgPD0gZGF0ZS5nZXRUaW1lKCkgJiYgZW5kLmdldFRpbWUoKSA+PSBkYXRlLmdldFRpbWUoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGJldHdlZW47CiAgICB9LAogICAgZ2V0Rmlyc3REYXlPZk1vbnRoSW5kZXg6IGZ1bmN0aW9uIGdldEZpcnN0RGF5T2ZNb250aEluZGV4KG1vbnRoLCB5ZWFyKSB7CiAgICAgIHZhciBkYXkgPSBuZXcgRGF0ZSgpOwogICAgICBkYXkuc2V0RGF0ZSgxKTsKICAgICAgZGF5LnNldE1vbnRoKG1vbnRoKTsKICAgICAgZGF5LnNldEZ1bGxZZWFyKHllYXIpOwogICAgICB2YXIgZGF5SW5kZXggPSBkYXkuZ2V0RGF5KCkgKyB0aGlzLnN1bmRheUluZGV4OwogICAgICByZXR1cm4gZGF5SW5kZXggPj0gNyA/IGRheUluZGV4IC0gNyA6IGRheUluZGV4OwogICAgfSwKICAgIGdldERheXNDb3VudEluTW9udGg6IGZ1bmN0aW9uIGdldERheXNDb3VudEluTW9udGgobW9udGgsIHllYXIpIHsKICAgICAgcmV0dXJuIDMyIC0gdGhpcy5kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMzIpKS5nZXREYXRlKCk7CiAgICB9LAogICAgZ2V0RGF5c0NvdW50SW5QcmV2TW9udGg6IGZ1bmN0aW9uIGdldERheXNDb3VudEluUHJldk1vbnRoKG1vbnRoLCB5ZWFyKSB7CiAgICAgIHZhciBwcmV2ID0gdGhpcy5nZXRQcmV2aW91c01vbnRoQW5kWWVhcihtb250aCwgeWVhcik7CiAgICAgIHJldHVybiB0aGlzLmdldERheXNDb3VudEluTW9udGgocHJldi5tb250aCwgcHJldi55ZWFyKTsKICAgIH0sCiAgICBnZXRQcmV2aW91c01vbnRoQW5kWWVhcjogZnVuY3Rpb24gZ2V0UHJldmlvdXNNb250aEFuZFllYXIobW9udGgsIHllYXIpIHsKICAgICAgdmFyIG0sIHk7CgogICAgICBpZiAobW9udGggPT09IDApIHsKICAgICAgICBtID0gMTE7CiAgICAgICAgeSA9IHllYXIgLSAxOwogICAgICB9IGVsc2UgewogICAgICAgIG0gPSBtb250aCAtIDE7CiAgICAgICAgeSA9IHllYXI7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgJ21vbnRoJzogbSwKICAgICAgICAneWVhcic6IHkKICAgICAgfTsKICAgIH0sCiAgICBnZXROZXh0TW9udGhBbmRZZWFyOiBmdW5jdGlvbiBnZXROZXh0TW9udGhBbmRZZWFyKG1vbnRoLCB5ZWFyKSB7CiAgICAgIHZhciBtLCB5OwoKICAgICAgaWYgKG1vbnRoID09PSAxMSkgewogICAgICAgIG0gPSAwOwogICAgICAgIHkgPSB5ZWFyICsgMTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtID0gbW9udGggKyAxOwogICAgICAgIHkgPSB5ZWFyOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgICdtb250aCc6IG0sCiAgICAgICAgJ3llYXInOiB5CiAgICAgIH07CiAgICB9LAogICAgZGF5bGlnaHRTYXZpbmdBZGp1c3Q6IGZ1bmN0aW9uIGRheWxpZ2h0U2F2aW5nQWRqdXN0KGRhdGUpIHsKICAgICAgaWYgKCFkYXRlKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIGRhdGUuc2V0SG91cnMoZGF0ZS5nZXRIb3VycygpID4gMTIgPyBkYXRlLmdldEhvdXJzKCkgKyAyIDogMCk7CiAgICAgIHJldHVybiBkYXRlOwogICAgfSwKICAgIGlzVG9kYXk6IGZ1bmN0aW9uIGlzVG9kYXkodG9kYXksIGRheSwgbW9udGgsIHllYXIpIHsKICAgICAgcmV0dXJuIHRvZGF5LmdldERhdGUoKSA9PT0gZGF5ICYmIHRvZGF5LmdldE1vbnRoKCkgPT09IG1vbnRoICYmIHRvZGF5LmdldEZ1bGxZZWFyKCkgPT09IHllYXI7CiAgICB9LAogICAgaXNTZWxlY3RhYmxlOiBmdW5jdGlvbiBpc1NlbGVjdGFibGUoZGF5LCBtb250aCwgeWVhciwgb3RoZXJNb250aCkgewogICAgICB2YXIgdmFsaWRNaW4gPSB0cnVlOwogICAgICB2YXIgdmFsaWRNYXggPSB0cnVlOwogICAgICB2YXIgdmFsaWREYXRlID0gdHJ1ZTsKICAgICAgdmFyIHZhbGlkRGF5ID0gdHJ1ZTsKCiAgICAgIGlmIChvdGhlck1vbnRoICYmICF0aGlzLnNlbGVjdE90aGVyTW9udGhzKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBpZiAodGhpcy5taW5EYXRlKSB7CiAgICAgICAgaWYgKHRoaXMubWluRGF0ZS5nZXRGdWxsWWVhcigpID4geWVhcikgewogICAgICAgICAgdmFsaWRNaW4gPSBmYWxzZTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMubWluRGF0ZS5nZXRGdWxsWWVhcigpID09PSB5ZWFyKSB7CiAgICAgICAgICBpZiAodGhpcy5taW5EYXRlLmdldE1vbnRoKCkgPiBtb250aCkgewogICAgICAgICAgICB2YWxpZE1pbiA9IGZhbHNlOwogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1pbkRhdGUuZ2V0TW9udGgoKSA9PT0gbW9udGgpIHsKICAgICAgICAgICAgaWYgKHRoaXMubWluRGF0ZS5nZXREYXRlKCkgPiBkYXkpIHsKICAgICAgICAgICAgICB2YWxpZE1pbiA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5tYXhEYXRlKSB7CiAgICAgICAgaWYgKHRoaXMubWF4RGF0ZS5nZXRGdWxsWWVhcigpIDwgeWVhcikgewogICAgICAgICAgdmFsaWRNYXggPSBmYWxzZTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMubWF4RGF0ZS5nZXRGdWxsWWVhcigpID09PSB5ZWFyKSB7CiAgICAgICAgICBpZiAodGhpcy5tYXhEYXRlLmdldE1vbnRoKCkgPCBtb250aCkgewogICAgICAgICAgICB2YWxpZE1heCA9IGZhbHNlOwogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1heERhdGUuZ2V0TW9udGgoKSA9PT0gbW9udGgpIHsKICAgICAgICAgICAgaWYgKHRoaXMubWF4RGF0ZS5nZXREYXRlKCkgPCBkYXkpIHsKICAgICAgICAgICAgICB2YWxpZE1heCA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5kaXNhYmxlZERhdGVzKSB7CiAgICAgICAgdmFsaWREYXRlID0gIXRoaXMuaXNEYXRlRGlzYWJsZWQoZGF5LCBtb250aCwgeWVhcik7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmRpc2FibGVkRGF5cykgewogICAgICAgIHZhbGlkRGF5ID0gIXRoaXMuaXNEYXlEaXNhYmxlZChkYXksIG1vbnRoLCB5ZWFyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbGlkTWluICYmIHZhbGlkTWF4ICYmIHZhbGlkRGF0ZSAmJiB2YWxpZERheTsKICAgIH0sCiAgICBvbk92ZXJsYXlFbnRlcjogZnVuY3Rpb24gb25PdmVybGF5RW50ZXIoZWwpIHsKICAgICAgaWYgKHRoaXMuYXV0b1pJbmRleCkgewogICAgICAgIGlmICh0aGlzLnRvdWNoVUkpIFpJbmRleFV0aWxzLnNldCgnbW9kYWwnLCBlbCwgdGhpcy5iYXNlWkluZGV4IHx8IHRoaXMuJHByaW1ldnVlLmNvbmZpZy56SW5kZXgubW9kYWwpO2Vsc2UgWkluZGV4VXRpbHMuc2V0KCdvdmVybGF5JywgZWwsIHRoaXMuYmFzZVpJbmRleCB8fCB0aGlzLiRwcmltZXZ1ZS5jb25maWcuekluZGV4Lm92ZXJsYXkpOwogICAgICB9CgogICAgICB0aGlzLmFsaWduT3ZlcmxheSgpOwogICAgICB0aGlzLiRlbWl0KCdzaG93Jyk7CiAgICB9LAogICAgb25PdmVybGF5RW50ZXJDb21wbGV0ZTogZnVuY3Rpb24gb25PdmVybGF5RW50ZXJDb21wbGV0ZSgpIHsKICAgICAgdGhpcy5iaW5kT3V0c2lkZUNsaWNrTGlzdGVuZXIoKTsKICAgICAgdGhpcy5iaW5kU2Nyb2xsTGlzdGVuZXIoKTsKICAgICAgdGhpcy5iaW5kUmVzaXplTGlzdGVuZXIoKTsKICAgIH0sCiAgICBvbk92ZXJsYXlBZnRlckxlYXZlOiBmdW5jdGlvbiBvbk92ZXJsYXlBZnRlckxlYXZlKGVsKSB7CiAgICAgIGlmICh0aGlzLmF1dG9aSW5kZXgpIHsKICAgICAgICBaSW5kZXhVdGlscy5jbGVhcihlbCk7CiAgICAgIH0KICAgIH0sCiAgICBvbk92ZXJsYXlMZWF2ZTogZnVuY3Rpb24gb25PdmVybGF5TGVhdmUoKSB7CiAgICAgIHRoaXMudW5iaW5kT3V0c2lkZUNsaWNrTGlzdGVuZXIoKTsKICAgICAgdGhpcy51bmJpbmRTY3JvbGxMaXN0ZW5lcigpOwogICAgICB0aGlzLnVuYmluZFJlc2l6ZUxpc3RlbmVyKCk7CiAgICAgIHRoaXMuJGVtaXQoJ2hpZGUnKTsKCiAgICAgIGlmICh0aGlzLm1hc2spIHsKICAgICAgICB0aGlzLmRpc2FibGVNb2RhbGl0eSgpOwogICAgICB9CgogICAgICB0aGlzLm92ZXJsYXkgPSBudWxsOwogICAgfSwKICAgIG9uUHJldkJ1dHRvbkNsaWNrOiBmdW5jdGlvbiBvblByZXZCdXR0b25DbGljayhldmVudCkgewogICAgICBpZiAodGhpcy5zaG93T3RoZXJNb250aHMpIHsKICAgICAgICB0aGlzLm5hdmlnYXRpb25TdGF0ZSA9IHsKICAgICAgICAgIGJhY2t3YXJkOiB0cnVlLAogICAgICAgICAgYnV0dG9uOiB0cnVlCiAgICAgICAgfTsKICAgICAgICB0aGlzLm5hdkJhY2t3YXJkKGV2ZW50KTsKICAgICAgfQogICAgfSwKICAgIG9uTmV4dEJ1dHRvbkNsaWNrOiBmdW5jdGlvbiBvbk5leHRCdXR0b25DbGljayhldmVudCkgewogICAgICBpZiAodGhpcy5zaG93T3RoZXJNb250aHMpIHsKICAgICAgICB0aGlzLm5hdmlnYXRpb25TdGF0ZSA9IHsKICAgICAgICAgIGJhY2t3YXJkOiBmYWxzZSwKICAgICAgICAgIGJ1dHRvbjogdHJ1ZQogICAgICAgIH07CiAgICAgICAgdGhpcy5uYXZGb3J3YXJkKGV2ZW50KTsKICAgICAgfQogICAgfSwKICAgIG5hdkJhY2t3YXJkOiBmdW5jdGlvbiBuYXZCYWNrd2FyZChldmVudCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgaWYgKCF0aGlzLmlzRW5hYmxlZCgpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy52aWV3ID09PSAnbW9udGgnKSB7CiAgICAgICAgdGhpcy5kZWNyZW1lbnRZZWFyKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMuY3VycmVudE1vbnRoID09PSAwKSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRNb250aCA9IDExOwogICAgICAgICAgdGhpcy5kZWNyZW1lbnRZZWFyKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuY3VycmVudE1vbnRoLS07CiAgICAgICAgfQoKICAgICAgICB0aGlzLiRlbWl0KCdtb250aC1jaGFuZ2UnLCB7CiAgICAgICAgICBtb250aDogdGhpcy5jdXJyZW50TW9udGgsCiAgICAgICAgICB5ZWFyOiB0aGlzLmN1cnJlbnRZZWFyCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBuYXZGb3J3YXJkOiBmdW5jdGlvbiBuYXZGb3J3YXJkKGV2ZW50KSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICBpZiAoIXRoaXMuaXNFbmFibGVkKCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnZpZXcgPT09ICdtb250aCcpIHsKICAgICAgICB0aGlzLmluY3JlbWVudFllYXIoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy5jdXJyZW50TW9udGggPT09IDExKSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRNb250aCA9IDA7CiAgICAgICAgICB0aGlzLmluY3JlbWVudFllYXIoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5jdXJyZW50TW9udGgrKzsKICAgICAgICB9CgogICAgICAgIHRoaXMuJGVtaXQoJ21vbnRoLWNoYW5nZScsIHsKICAgICAgICAgIG1vbnRoOiB0aGlzLmN1cnJlbnRNb250aCwKICAgICAgICAgIHllYXI6IHRoaXMuY3VycmVudFllYXIKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGRlY3JlbWVudFllYXI6IGZ1bmN0aW9uIGRlY3JlbWVudFllYXIoKSB7CiAgICAgIHRoaXMuY3VycmVudFllYXItLTsKICAgIH0sCiAgICBpbmNyZW1lbnRZZWFyOiBmdW5jdGlvbiBpbmNyZW1lbnRZZWFyKCkgewogICAgICB0aGlzLmN1cnJlbnRZZWFyKys7CiAgICB9LAogICAgaXNFbmFibGVkOiBmdW5jdGlvbiBpc0VuYWJsZWQoKSB7CiAgICAgIHJldHVybiAhdGhpcy4kYXR0cnMuZGlzYWJsZWQgJiYgIXRoaXMuJGF0dHJzLnJlYWRvbmx5OwogICAgfSwKICAgIHVwZGF0ZUN1cnJlbnRUaW1lTWV0YTogZnVuY3Rpb24gdXBkYXRlQ3VycmVudFRpbWVNZXRhKGRhdGUpIHsKICAgICAgdmFyIGN1cnJlbnRIb3VyID0gZGF0ZS5nZXRIb3VycygpOwoKICAgICAgaWYgKHRoaXMuaG91ckZvcm1hdCA9PT0gJzEyJykgewogICAgICAgIHRoaXMucG0gPSBjdXJyZW50SG91ciA+IDExOwogICAgICAgIGlmIChjdXJyZW50SG91ciA+PSAxMikgY3VycmVudEhvdXIgPSBjdXJyZW50SG91ciA9PSAxMiA/IDEyIDogY3VycmVudEhvdXIgLSAxMjtlbHNlIGN1cnJlbnRIb3VyID0gY3VycmVudEhvdXIgPT0gMCA/IDEyIDogY3VycmVudEhvdXI7CiAgICAgIH0KCiAgICAgIHRoaXMuY3VycmVudEhvdXIgPSBNYXRoLmZsb29yKGN1cnJlbnRIb3VyIC8gdGhpcy5zdGVwSG91cikgKiB0aGlzLnN0ZXBIb3VyOwogICAgICB0aGlzLmN1cnJlbnRNaW51dGUgPSBNYXRoLmZsb29yKGRhdGUuZ2V0TWludXRlcygpIC8gdGhpcy5zdGVwTWludXRlKSAqIHRoaXMuc3RlcE1pbnV0ZTsKICAgICAgdGhpcy5jdXJyZW50U2Vjb25kID0gTWF0aC5mbG9vcihkYXRlLmdldFNlY29uZHMoKSAvIHRoaXMuc3RlcFNlY29uZCkgKiB0aGlzLnN0ZXBTZWNvbmQ7CiAgICB9LAogICAgYmluZE91dHNpZGVDbGlja0xpc3RlbmVyOiBmdW5jdGlvbiBiaW5kT3V0c2lkZUNsaWNrTGlzdGVuZXIoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMub3V0c2lkZUNsaWNrTGlzdGVuZXIpIHsKICAgICAgICB0aGlzLm91dHNpZGVDbGlja0xpc3RlbmVyID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICBpZiAoX3RoaXMub3ZlcmxheVZpc2libGUgJiYgX3RoaXMuaXNPdXRzaWRlQ2xpY2tlZChldmVudCkpIHsKICAgICAgICAgICAgX3RoaXMub3ZlcmxheVZpc2libGUgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm91dHNpZGVDbGlja0xpc3RlbmVyKTsKICAgICAgfQogICAgfSwKICAgIHVuYmluZE91dHNpZGVDbGlja0xpc3RlbmVyOiBmdW5jdGlvbiB1bmJpbmRPdXRzaWRlQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgaWYgKHRoaXMub3V0c2lkZUNsaWNrTGlzdGVuZXIpIHsKICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm91dHNpZGVDbGlja0xpc3RlbmVyKTsKICAgICAgICB0aGlzLm91dHNpZGVDbGlja0xpc3RlbmVyID0gbnVsbDsKICAgICAgfQogICAgfSwKICAgIGJpbmRTY3JvbGxMaXN0ZW5lcjogZnVuY3Rpb24gYmluZFNjcm9sbExpc3RlbmVyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICghdGhpcy5zY3JvbGxIYW5kbGVyKSB7CiAgICAgICAgdGhpcy5zY3JvbGxIYW5kbGVyID0gbmV3IENvbm5lY3RlZE92ZXJsYXlTY3JvbGxIYW5kbGVyKHRoaXMuJHJlZnMuY29udGFpbmVyLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoX3RoaXMyLm92ZXJsYXlWaXNpYmxlKSB7CiAgICAgICAgICAgIF90aGlzMi5vdmVybGF5VmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLnNjcm9sbEhhbmRsZXIuYmluZFNjcm9sbExpc3RlbmVyKCk7CiAgICB9LAogICAgdW5iaW5kU2Nyb2xsTGlzdGVuZXI6IGZ1bmN0aW9uIHVuYmluZFNjcm9sbExpc3RlbmVyKCkgewogICAgICBpZiAodGhpcy5zY3JvbGxIYW5kbGVyKSB7CiAgICAgICAgdGhpcy5zY3JvbGxIYW5kbGVyLnVuYmluZFNjcm9sbExpc3RlbmVyKCk7CiAgICAgIH0KICAgIH0sCiAgICBiaW5kUmVzaXplTGlzdGVuZXI6IGZ1bmN0aW9uIGJpbmRSZXNpemVMaXN0ZW5lcigpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMucmVzaXplTGlzdGVuZXIpIHsKICAgICAgICB0aGlzLnJlc2l6ZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKF90aGlzMy5vdmVybGF5VmlzaWJsZSkgewogICAgICAgICAgICBfdGhpczMub3ZlcmxheVZpc2libGUgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZXNpemVMaXN0ZW5lcik7CiAgICAgIH0KICAgIH0sCiAgICB1bmJpbmRSZXNpemVMaXN0ZW5lcjogZnVuY3Rpb24gdW5iaW5kUmVzaXplTGlzdGVuZXIoKSB7CiAgICAgIGlmICh0aGlzLnJlc2l6ZUxpc3RlbmVyKSB7CiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucmVzaXplTGlzdGVuZXIpOwogICAgICAgIHRoaXMucmVzaXplTGlzdGVuZXIgPSBudWxsOwogICAgICB9CiAgICB9LAogICAgaXNPdXRzaWRlQ2xpY2tlZDogZnVuY3Rpb24gaXNPdXRzaWRlQ2xpY2tlZChldmVudCkgewogICAgICByZXR1cm4gISh0aGlzLiRlbC5pc1NhbWVOb2RlKGV2ZW50LnRhcmdldCkgfHwgdGhpcy5pc05hdkljb25DbGlja2VkKGV2ZW50KSB8fCB0aGlzLiRlbC5jb250YWlucyhldmVudC50YXJnZXQpIHx8IHRoaXMub3ZlcmxheSAmJiB0aGlzLm92ZXJsYXkuY29udGFpbnMoZXZlbnQudGFyZ2V0KSk7CiAgICB9LAogICAgaXNOYXZJY29uQ2xpY2tlZDogZnVuY3Rpb24gaXNOYXZJY29uQ2xpY2tlZChldmVudCkgewogICAgICByZXR1cm4gRG9tSGFuZGxlci5oYXNDbGFzcyhldmVudC50YXJnZXQsICdwLWRhdGVwaWNrZXItcHJldicpIHx8IERvbUhhbmRsZXIuaGFzQ2xhc3MoZXZlbnQudGFyZ2V0LCAncC1kYXRlcGlja2VyLXByZXYtaWNvbicpIHx8IERvbUhhbmRsZXIuaGFzQ2xhc3MoZXZlbnQudGFyZ2V0LCAncC1kYXRlcGlja2VyLW5leHQnKSB8fCBEb21IYW5kbGVyLmhhc0NsYXNzKGV2ZW50LnRhcmdldCwgJ3AtZGF0ZXBpY2tlci1uZXh0LWljb24nKTsKICAgIH0sCiAgICBhbGlnbk92ZXJsYXk6IGZ1bmN0aW9uIGFsaWduT3ZlcmxheSgpIHsKICAgICAgaWYgKHRoaXMudG91Y2hVSSkgewogICAgICAgIHRoaXMuZW5hYmxlTW9kYWxpdHkoKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLm92ZXJsYXkpIHsKICAgICAgICBpZiAodGhpcy5hcHBlbmREaXNhYmxlZCkgewogICAgICAgICAgRG9tSGFuZGxlci5yZWxhdGl2ZVBvc2l0aW9uKHRoaXMub3ZlcmxheSwgdGhpcy4kZWwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm92ZXJsYXkuc3R5bGUubWluV2lkdGggPSBEb21IYW5kbGVyLmdldE91dGVyV2lkdGgodGhpcy4kZWwpICsgJ3B4JzsKICAgICAgICAgIERvbUhhbmRsZXIuYWJzb2x1dGVQb3NpdGlvbih0aGlzLm92ZXJsYXksIHRoaXMuJGVsKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBvbkJ1dHRvbkNsaWNrOiBmdW5jdGlvbiBvbkJ1dHRvbkNsaWNrKCkgewogICAgICBpZiAodGhpcy5pc0VuYWJsZWQoKSkgewogICAgICAgIGlmICghdGhpcy5vdmVybGF5VmlzaWJsZSkgewogICAgICAgICAgdGhpcy4kcmVmcy5pbnB1dC4kZWwuZm9jdXMoKTsKICAgICAgICAgIHRoaXMub3ZlcmxheVZpc2libGUgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm92ZXJsYXlWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgaXNEYXRlRGlzYWJsZWQ6IGZ1bmN0aW9uIGlzRGF0ZURpc2FibGVkKGRheSwgbW9udGgsIHllYXIpIHsKICAgICAgaWYgKHRoaXMuZGlzYWJsZWREYXRlcykgewogICAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5kaXNhYmxlZERhdGVzKSwKICAgICAgICAgICAgX3N0ZXAyOwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIGRpc2FibGVkRGF0ZSA9IF9zdGVwMi52YWx1ZTsKCiAgICAgICAgICAgIGlmIChkaXNhYmxlZERhdGUuZ2V0RnVsbFllYXIoKSA9PT0geWVhciAmJiBkaXNhYmxlZERhdGUuZ2V0TW9udGgoKSA9PT0gbW9udGggJiYgZGlzYWJsZWREYXRlLmdldERhdGUoKSA9PT0gZGF5KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBpc0RheURpc2FibGVkOiBmdW5jdGlvbiBpc0RheURpc2FibGVkKGRheSwgbW9udGgsIHllYXIpIHsKICAgICAgaWYgKHRoaXMuZGlzYWJsZWREYXlzKSB7CiAgICAgICAgdmFyIHdlZWtkYXkgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTsKICAgICAgICB2YXIgd2Vla2RheU51bWJlciA9IHdlZWtkYXkuZ2V0RGF5KCk7CiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWREYXlzLmluZGV4T2Yod2Vla2RheU51bWJlcikgIT09IC0xOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgb25Nb250aERyb3Bkb3duQ2hhbmdlOiBmdW5jdGlvbiBvbk1vbnRoRHJvcGRvd25DaGFuZ2UodmFsdWUpIHsKICAgICAgdGhpcy5jdXJyZW50TW9udGggPSBwYXJzZUludCh2YWx1ZSk7CiAgICAgIHRoaXMuJGVtaXQoJ21vbnRoLWNoYW5nZScsIHsKICAgICAgICBtb250aDogdGhpcy5jdXJyZW50TW9udGggKyAxLAogICAgICAgIHllYXI6IHRoaXMuY3VycmVudFllYXIKICAgICAgfSk7CiAgICB9LAogICAgb25ZZWFyRHJvcGRvd25DaGFuZ2U6IGZ1bmN0aW9uIG9uWWVhckRyb3Bkb3duQ2hhbmdlKHZhbHVlKSB7CiAgICAgIHRoaXMuY3VycmVudFllYXIgPSBwYXJzZUludCh2YWx1ZSk7CiAgICAgIHRoaXMuJGVtaXQoJ3llYXItY2hhbmdlJywgewogICAgICAgIG1vbnRoOiB0aGlzLmN1cnJlbnRNb250aCArIDEsCiAgICAgICAgeWVhcjogdGhpcy5jdXJyZW50WWVhcgogICAgICB9KTsKICAgIH0sCiAgICBvbkRhdGVTZWxlY3Q6IGZ1bmN0aW9uIG9uRGF0ZVNlbGVjdChldmVudCwgZGF0ZU1ldGEpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICBpZiAodGhpcy4kYXR0cnMuZGlzYWJsZWQgfHwgIWRhdGVNZXRhLnNlbGVjdGFibGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIERvbUhhbmRsZXIuZmluZCh0aGlzLm92ZXJsYXksICcucC1kYXRlcGlja2VyLWNhbGVuZGFyIHRkIHNwYW46bm90KC5wLWRpc2FibGVkKScpLmZvckVhY2goZnVuY3Rpb24gKGNlbGwpIHsKICAgICAgICByZXR1cm4gY2VsbC50YWJJbmRleCA9IC0xOwogICAgICB9KTsKCiAgICAgIGlmIChldmVudCkgewogICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZm9jdXMoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuaXNNdWx0aXBsZVNlbGVjdGlvbigpICYmIHRoaXMuaXNTZWxlY3RlZChkYXRlTWV0YSkpIHsKICAgICAgICB2YXIgbmV3VmFsdWUgPSB0aGlzLm1vZGVsVmFsdWUuZmlsdGVyKGZ1bmN0aW9uIChkYXRlKSB7CiAgICAgICAgICByZXR1cm4gIV90aGlzNC5pc0RhdGVFcXVhbHMoZGF0ZSwgZGF0ZU1ldGEpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMudXBkYXRlTW9kZWwobmV3VmFsdWUpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLnNob3VsZFNlbGVjdERhdGUoZGF0ZU1ldGEpKSB7CiAgICAgICAgICBpZiAoZGF0ZU1ldGEub3RoZXJNb250aCkgewogICAgICAgICAgICB0aGlzLmN1cnJlbnRNb250aCA9IGRhdGVNZXRhLm1vbnRoOwogICAgICAgICAgICB0aGlzLmN1cnJlbnRZZWFyID0gZGF0ZU1ldGEueWVhcjsKICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRlKGRhdGVNZXRhKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0RGF0ZShkYXRlTWV0YSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbGVjdGlvbigpICYmICghdGhpcy5zaG93VGltZSB8fCB0aGlzLmhpZGVPbkRhdGVUaW1lU2VsZWN0KSkgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM0Lm92ZXJsYXlWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgfSwgMTUwKTsKICAgICAgfQogICAgfSwKICAgIHNlbGVjdERhdGU6IGZ1bmN0aW9uIHNlbGVjdERhdGUoZGF0ZU1ldGEpIHsKICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkYXRlTWV0YS55ZWFyLCBkYXRlTWV0YS5tb250aCwgZGF0ZU1ldGEuZGF5KTsKCiAgICAgIGlmICh0aGlzLnNob3dUaW1lKSB7CiAgICAgICAgaWYgKHRoaXMuaG91ckZvcm1hdCA9PT0gJzEyJyAmJiB0aGlzLnBtICYmIHRoaXMuY3VycmVudEhvdXIgIT0gMTIpIGRhdGUuc2V0SG91cnModGhpcy5jdXJyZW50SG91ciArIDEyKTtlbHNlIGRhdGUuc2V0SG91cnModGhpcy5jdXJyZW50SG91cik7CiAgICAgICAgZGF0ZS5zZXRNaW51dGVzKHRoaXMuY3VycmVudE1pbnV0ZSk7CiAgICAgICAgZGF0ZS5zZXRTZWNvbmRzKHRoaXMuY3VycmVudFNlY29uZCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm1pbkRhdGUgJiYgdGhpcy5taW5EYXRlID4gZGF0ZSkgewogICAgICAgIGRhdGUgPSB0aGlzLm1pbkRhdGU7CiAgICAgICAgdGhpcy5jdXJyZW50SG91ciA9IGRhdGUuZ2V0SG91cnMoKTsKICAgICAgICB0aGlzLmN1cnJlbnRNaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKTsKICAgICAgICB0aGlzLmN1cnJlbnRTZWNvbmQgPSBkYXRlLmdldFNlY29uZHMoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubWF4RGF0ZSAmJiB0aGlzLm1heERhdGUgPCBkYXRlKSB7CiAgICAgICAgZGF0ZSA9IHRoaXMubWF4RGF0ZTsKICAgICAgICB0aGlzLmN1cnJlbnRIb3VyID0gZGF0ZS5nZXRIb3VycygpOwogICAgICAgIHRoaXMuY3VycmVudE1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpOwogICAgICAgIHRoaXMuY3VycmVudFNlY29uZCA9IGRhdGUuZ2V0U2Vjb25kcygpOwogICAgICB9CgogICAgICB2YXIgbW9kZWxWYWwgPSBudWxsOwoKICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWxlY3Rpb24oKSkgewogICAgICAgIG1vZGVsVmFsID0gZGF0ZTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmlzTXVsdGlwbGVTZWxlY3Rpb24oKSkgewogICAgICAgIG1vZGVsVmFsID0gdGhpcy5tb2RlbFZhbHVlID8gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0aGlzLm1vZGVsVmFsdWUpLCBbZGF0ZV0pIDogW2RhdGVdOwogICAgICB9IGVsc2UgaWYgKHRoaXMuaXNSYW5nZVNlbGVjdGlvbigpKSB7CiAgICAgICAgaWYgKHRoaXMubW9kZWxWYWx1ZSAmJiB0aGlzLm1vZGVsVmFsdWUubGVuZ3RoKSB7CiAgICAgICAgICB2YXIgc3RhcnREYXRlID0gdGhpcy5tb2RlbFZhbHVlWzBdOwogICAgICAgICAgdmFyIGVuZERhdGUgPSB0aGlzLm1vZGVsVmFsdWVbMV07CgogICAgICAgICAgaWYgKCFlbmREYXRlICYmIGRhdGUuZ2V0VGltZSgpID49IHN0YXJ0RGF0ZS5nZXRUaW1lKCkpIHsKICAgICAgICAgICAgZW5kRGF0ZSA9IGRhdGU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdGFydERhdGUgPSBkYXRlOwogICAgICAgICAgICBlbmREYXRlID0gbnVsbDsKICAgICAgICAgIH0KCiAgICAgICAgICBtb2RlbFZhbCA9IFtzdGFydERhdGUsIGVuZERhdGVdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBtb2RlbFZhbCA9IFtkYXRlLCBudWxsXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChtb2RlbFZhbCAhPT0gbnVsbCkgewogICAgICAgIHRoaXMudXBkYXRlTW9kZWwobW9kZWxWYWwpOwogICAgICB9CgogICAgICB0aGlzLiRlbWl0KCdkYXRlLXNlbGVjdCcsIGRhdGUpOwogICAgfSwKICAgIHVwZGF0ZU1vZGVsOiBmdW5jdGlvbiB1cGRhdGVNb2RlbCh2YWx1ZSkgewogICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIHZhbHVlKTsKICAgIH0sCiAgICBzaG91bGRTZWxlY3REYXRlOiBmdW5jdGlvbiBzaG91bGRTZWxlY3REYXRlKCkgewogICAgICBpZiAodGhpcy5pc011bHRpcGxlU2VsZWN0aW9uKCkpIHJldHVybiB0aGlzLm1heERhdGVDb3VudCAhPSBudWxsID8gdGhpcy5tYXhEYXRlQ291bnQgPiAodGhpcy5tb2RlbFZhbHVlID8gdGhpcy5tb2RlbFZhbHVlLmxlbmd0aCA6IDApIDogdHJ1ZTtlbHNlIHJldHVybiB0cnVlOwogICAgfSwKICAgIGlzU2luZ2xlU2VsZWN0aW9uOiBmdW5jdGlvbiBpc1NpbmdsZVNlbGVjdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gJ3NpbmdsZSc7CiAgICB9LAogICAgaXNSYW5nZVNlbGVjdGlvbjogZnVuY3Rpb24gaXNSYW5nZVNlbGVjdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gJ3JhbmdlJzsKICAgIH0sCiAgICBpc011bHRpcGxlU2VsZWN0aW9uOiBmdW5jdGlvbiBpc011bHRpcGxlU2VsZWN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25Nb2RlID09PSAnbXVsdGlwbGUnOwogICAgfSwKICAgIGZvcm1hdFZhbHVlOiBmdW5jdGlvbiBmb3JtYXRWYWx1ZSh2YWx1ZSkgewogICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgewogICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgfQoKICAgICAgdmFyIGZvcm1hdHRlZFZhbHVlID0gJyc7CgogICAgICBpZiAodmFsdWUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWxlY3Rpb24oKSkgewogICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IHRoaXMuZm9ybWF0RGF0ZVRpbWUodmFsdWUpOwogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzTXVsdGlwbGVTZWxlY3Rpb24oKSkgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdmFyIGRhdGVBc1N0cmluZyA9IHRoaXMuZm9ybWF0RGF0ZVRpbWUodmFsdWVbaV0pOwogICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlICs9IGRhdGVBc1N0cmluZzsKCiAgICAgICAgICAgICAgaWYgKGkgIT09IHZhbHVlLmxlbmd0aCAtIDEpIHsKICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlICs9ICcsICc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNSYW5nZVNlbGVjdGlvbigpKSB7CiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZS5sZW5ndGgpIHsKICAgICAgICAgICAgICB2YXIgc3RhcnREYXRlID0gdmFsdWVbMF07CiAgICAgICAgICAgICAgdmFyIGVuZERhdGUgPSB2YWx1ZVsxXTsKICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IHRoaXMuZm9ybWF0RGF0ZVRpbWUoc3RhcnREYXRlKTsKCiAgICAgICAgICAgICAgaWYgKGVuZERhdGUpIHsKICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlICs9ICcgLSAnICsgdGhpcy5mb3JtYXREYXRlVGltZShlbmREYXRlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIGZvcm1hdHRlZFZhbHVlID0gdmFsdWU7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gZm9ybWF0dGVkVmFsdWU7CiAgICB9LAogICAgZm9ybWF0RGF0ZVRpbWU6IGZ1bmN0aW9uIGZvcm1hdERhdGVUaW1lKGRhdGUpIHsKICAgICAgdmFyIGZvcm1hdHRlZFZhbHVlID0gbnVsbDsKCiAgICAgIGlmIChkYXRlKSB7CiAgICAgICAgaWYgKHRoaXMudGltZU9ubHkpIHsKICAgICAgICAgIGZvcm1hdHRlZFZhbHVlID0gdGhpcy5mb3JtYXRUaW1lKGRhdGUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IHRoaXMuZm9ybWF0RGF0ZShkYXRlLCB0aGlzLmRhdGVQYXR0ZXJuKTsKCiAgICAgICAgICBpZiAodGhpcy5zaG93VGltZSkgewogICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSArPSAnICcgKyB0aGlzLmZvcm1hdFRpbWUoZGF0ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gZm9ybWF0dGVkVmFsdWU7CiAgICB9LAogICAgZm9ybWF0RGF0ZTogZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlLCBmb3JtYXQpIHsKICAgICAgaWYgKCFkYXRlKSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CgogICAgICB2YXIgaUZvcm1hdDsKCiAgICAgIHZhciBsb29rQWhlYWQgPSBmdW5jdGlvbiBsb29rQWhlYWQobWF0Y2gpIHsKICAgICAgICB2YXIgbWF0Y2hlcyA9IGlGb3JtYXQgKyAxIDwgZm9ybWF0Lmxlbmd0aCAmJiBmb3JtYXQuY2hhckF0KGlGb3JtYXQgKyAxKSA9PT0gbWF0Y2g7CgogICAgICAgIGlmIChtYXRjaGVzKSB7CiAgICAgICAgICBpRm9ybWF0Kys7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbWF0Y2hlczsKICAgICAgfSwKICAgICAgICAgIGZvcm1hdE51bWJlciA9IGZ1bmN0aW9uIGZvcm1hdE51bWJlcihtYXRjaCwgdmFsdWUsIGxlbikgewogICAgICAgIHZhciBudW0gPSAnJyArIHZhbHVlOwoKICAgICAgICBpZiAobG9va0FoZWFkKG1hdGNoKSkgewogICAgICAgICAgd2hpbGUgKG51bS5sZW5ndGggPCBsZW4pIHsKICAgICAgICAgICAgbnVtID0gJzAnICsgbnVtOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG51bTsKICAgICAgfSwKICAgICAgICAgIGZvcm1hdE5hbWUgPSBmdW5jdGlvbiBmb3JtYXROYW1lKG1hdGNoLCB2YWx1ZSwgc2hvcnROYW1lcywgbG9uZ05hbWVzKSB7CiAgICAgICAgcmV0dXJuIGxvb2tBaGVhZChtYXRjaCkgPyBsb25nTmFtZXNbdmFsdWVdIDogc2hvcnROYW1lc1t2YWx1ZV07CiAgICAgIH07CgogICAgICB2YXIgb3V0cHV0ID0gJyc7CiAgICAgIHZhciBsaXRlcmFsID0gZmFsc2U7CgogICAgICBpZiAoZGF0ZSkgewogICAgICAgIGZvciAoaUZvcm1hdCA9IDA7IGlGb3JtYXQgPCBmb3JtYXQubGVuZ3RoOyBpRm9ybWF0KyspIHsKICAgICAgICAgIGlmIChsaXRlcmFsKSB7CiAgICAgICAgICAgIGlmIChmb3JtYXQuY2hhckF0KGlGb3JtYXQpID09PSAnXCcnICYmICFsb29rQWhlYWQoJ1wnJykpIHsKICAgICAgICAgICAgICBsaXRlcmFsID0gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgb3V0cHV0ICs9IGZvcm1hdC5jaGFyQXQoaUZvcm1hdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN3aXRjaCAoZm9ybWF0LmNoYXJBdChpRm9ybWF0KSkgewogICAgICAgICAgICAgIGNhc2UgJ2QnOgogICAgICAgICAgICAgICAgb3V0cHV0ICs9IGZvcm1hdE51bWJlcignZCcsIGRhdGUuZ2V0RGF0ZSgpLCAyKTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlICdEJzoKICAgICAgICAgICAgICAgIG91dHB1dCArPSBmb3JtYXROYW1lKCdEJywgZGF0ZS5nZXREYXkoKSwgdGhpcy4kcHJpbWV2dWUuY29uZmlnLmxvY2FsZS5kYXlOYW1lc1Nob3J0LCB0aGlzLiRwcmltZXZ1ZS5jb25maWcubG9jYWxlLmRheU5hbWVzKTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlICdvJzoKICAgICAgICAgICAgICAgIG91dHB1dCArPSBmb3JtYXROdW1iZXIoJ28nLCBNYXRoLnJvdW5kKChuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXREYXRlKCkpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgMCwgMCkuZ2V0VGltZSgpKSAvIDg2NDAwMDAwKSwgMyk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAnbSc6CiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gZm9ybWF0TnVtYmVyKCdtJywgZGF0ZS5nZXRNb250aCgpICsgMSwgMik7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAnTSc6CiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gZm9ybWF0TmFtZSgnTScsIGRhdGUuZ2V0TW9udGgoKSwgdGhpcy4kcHJpbWV2dWUuY29uZmlnLmxvY2FsZS5tb250aE5hbWVzU2hvcnQsIHRoaXMuJHByaW1ldnVlLmNvbmZpZy5sb2NhbGUubW9udGhOYW1lcyk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAneSc6CiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gbG9va0FoZWFkKCd5JykgPyBkYXRlLmdldEZ1bGxZZWFyKCkgOiAoZGF0ZS5nZXRGdWxsWWVhcigpICUgMTAwIDwgMTAgPyAnMCcgOiAnJykgKyBkYXRlLmdldEZ1bGxZZWFyKCkgJSAxMDA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAnQCc6CiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gZGF0ZS5nZXRUaW1lKCk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAnISc6CiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gZGF0ZS5nZXRUaW1lKCkgKiAxMDAwMCArIHRoaXMudGlja3NUbzE5NzA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAnXCcnOgogICAgICAgICAgICAgICAgaWYgKGxvb2tBaGVhZCgnXCcnKSkgewogICAgICAgICAgICAgICAgICBvdXRwdXQgKz0gJ1wnJzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGxpdGVyYWwgPSB0cnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgb3V0cHV0ICs9IGZvcm1hdC5jaGFyQXQoaUZvcm1hdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXRwdXQ7CiAgICB9LAogICAgZm9ybWF0VGltZTogZnVuY3Rpb24gZm9ybWF0VGltZShkYXRlKSB7CiAgICAgIGlmICghZGF0ZSkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQoKICAgICAgdmFyIG91dHB1dCA9ICcnOwogICAgICB2YXIgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7CiAgICAgIHZhciBtaW51dGVzID0gZGF0ZS5nZXRNaW51dGVzKCk7CiAgICAgIHZhciBzZWNvbmRzID0gZGF0ZS5nZXRTZWNvbmRzKCk7CgogICAgICBpZiAodGhpcy5ob3VyRm9ybWF0ID09PSAnMTInICYmIGhvdXJzID4gMTEgJiYgaG91cnMgIT09IDEyKSB7CiAgICAgICAgaG91cnMgLT0gMTI7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmhvdXJGb3JtYXQgPT09ICcxMicpIHsKICAgICAgICBvdXRwdXQgKz0gaG91cnMgPT09IDAgPyAxMiA6IGhvdXJzIDwgMTAgPyAnMCcgKyBob3VycyA6IGhvdXJzOwogICAgICB9IGVsc2UgewogICAgICAgIG91dHB1dCArPSBob3VycyA8IDEwID8gJzAnICsgaG91cnMgOiBob3VyczsKICAgICAgfQoKICAgICAgb3V0cHV0ICs9ICc6JzsKICAgICAgb3V0cHV0ICs9IG1pbnV0ZXMgPCAxMCA/ICcwJyArIG1pbnV0ZXMgOiBtaW51dGVzOwoKICAgICAgaWYgKHRoaXMuc2hvd1NlY29uZHMpIHsKICAgICAgICBvdXRwdXQgKz0gJzonOwogICAgICAgIG91dHB1dCArPSBzZWNvbmRzIDwgMTAgPyAnMCcgKyBzZWNvbmRzIDogc2Vjb25kczsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuaG91ckZvcm1hdCA9PT0gJzEyJykgewogICAgICAgIG91dHB1dCArPSBkYXRlLmdldEhvdXJzKCkgPiAxMSA/ICcgUE0nIDogJyBBTSc7CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXRwdXQ7CiAgICB9LAogICAgb25Ub2RheUJ1dHRvbkNsaWNrOiBmdW5jdGlvbiBvblRvZGF5QnV0dG9uQ2xpY2soZXZlbnQpIHsKICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICB2YXIgZGF0ZU1ldGEgPSB7CiAgICAgICAgZGF5OiBkYXRlLmdldERhdGUoKSwKICAgICAgICBtb250aDogZGF0ZS5nZXRNb250aCgpLAogICAgICAgIHllYXI6IGRhdGUuZ2V0RnVsbFllYXIoKSwKICAgICAgICBvdGhlck1vbnRoOiBkYXRlLmdldE1vbnRoKCkgIT09IHRoaXMuY3VycmVudE1vbnRoIHx8IGRhdGUuZ2V0RnVsbFllYXIoKSAhPT0gdGhpcy5jdXJyZW50WWVhciwKICAgICAgICB0b2RheTogdHJ1ZSwKICAgICAgICBzZWxlY3RhYmxlOiB0cnVlCiAgICAgIH07CiAgICAgIHRoaXMub25EYXRlU2VsZWN0KG51bGwsIGRhdGVNZXRhKTsKICAgICAgdGhpcy4kZW1pdCgndG9kYXktY2xpY2snLCBkYXRlKTsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIH0sCiAgICBvbkNsZWFyQnV0dG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xlYXJCdXR0b25DbGljayhldmVudCkgewogICAgICB0aGlzLnVwZGF0ZU1vZGVsKG51bGwpOwogICAgICB0aGlzLm92ZXJsYXlWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuJGVtaXQoJ2NsZWFyLWNsaWNrJywgZXZlbnQpOwogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgfSwKICAgIG9uVGltZVBpY2tlckVsZW1lbnRNb3VzZURvd246IGZ1bmN0aW9uIG9uVGltZVBpY2tlckVsZW1lbnRNb3VzZURvd24oZXZlbnQsIHR5cGUsIGRpcmVjdGlvbikgewogICAgICBpZiAodGhpcy5pc0VuYWJsZWQoKSkgewogICAgICAgIHRoaXMucmVwZWF0KGV2ZW50LCBudWxsLCB0eXBlLCBkaXJlY3Rpb24pOwogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH0KICAgIH0sCiAgICBvblRpbWVQaWNrZXJFbGVtZW50TW91c2VVcDogZnVuY3Rpb24gb25UaW1lUGlja2VyRWxlbWVudE1vdXNlVXAoZXZlbnQpIHsKICAgICAgaWYgKHRoaXMuaXNFbmFibGVkKCkpIHsKICAgICAgICB0aGlzLmNsZWFyVGltZVBpY2tlclRpbWVyKCk7CiAgICAgICAgdGhpcy51cGRhdGVNb2RlbFRpbWUoKTsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CiAgICB9LAogICAgb25UaW1lUGlja2VyRWxlbWVudE1vdXNlTGVhdmU6IGZ1bmN0aW9uIG9uVGltZVBpY2tlckVsZW1lbnRNb3VzZUxlYXZlKCkgewogICAgICB0aGlzLmNsZWFyVGltZVBpY2tlclRpbWVyKCk7CiAgICB9LAogICAgcmVwZWF0OiBmdW5jdGlvbiByZXBlYXQoZXZlbnQsIGludGVydmFsLCB0eXBlLCBkaXJlY3Rpb24pIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIgaSA9IGludGVydmFsIHx8IDUwMDsKICAgICAgdGhpcy5jbGVhclRpbWVQaWNrZXJUaW1lcigpOwogICAgICB0aGlzLnRpbWVQaWNrZXJUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNS5yZXBlYXQoZXZlbnQsIDEwMCwgdHlwZSwgZGlyZWN0aW9uKTsKICAgICAgfSwgaSk7CgogICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAxKSB0aGlzLmluY3JlbWVudEhvdXIoZXZlbnQpO2Vsc2UgdGhpcy5kZWNyZW1lbnRIb3VyKGV2ZW50KTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAxKSB0aGlzLmluY3JlbWVudE1pbnV0ZShldmVudCk7ZWxzZSB0aGlzLmRlY3JlbWVudE1pbnV0ZShldmVudCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gMSkgdGhpcy5pbmNyZW1lbnRTZWNvbmQoZXZlbnQpO2Vsc2UgdGhpcy5kZWNyZW1lbnRTZWNvbmQoZXZlbnQpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCiAgICBjb252ZXJ0VG8yNEhvdXI6IGZ1bmN0aW9uIGNvbnZlcnRUbzI0SG91cihob3VycywgcG0pIHsKICAgICAgaWYgKHRoaXMuaG91ckZvcm1hdCA9PSAnMTInKSB7CiAgICAgICAgaWYgKGhvdXJzID09PSAxMikgewogICAgICAgICAgcmV0dXJuIHBtID8gMTIgOiAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gcG0gPyBob3VycyArIDEyIDogaG91cnM7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gaG91cnM7CiAgICB9LAogICAgdmFsaWRhdGVUaW1lOiBmdW5jdGlvbiB2YWxpZGF0ZVRpbWUoaG91ciwgbWludXRlLCBzZWNvbmQsIHBtKSB7CiAgICAgIHZhciB2YWx1ZSA9IHRoaXMubW9kZWxWYWx1ZTsKICAgICAgdmFyIGNvbnZlcnRlZEhvdXIgPSB0aGlzLmNvbnZlcnRUbzI0SG91cihob3VyLCBwbSk7CgogICAgICBpZiAoIXRoaXMuaXNDb21wYXJhYmxlKCkpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuaXNSYW5nZVNlbGVjdGlvbigpKSB7CiAgICAgICAgdmFsdWUgPSB0aGlzLm1vZGVsVmFsdWVbMV0gfHwgdGhpcy5tb2RlbFZhbHVlWzBdOwogICAgICB9CgogICAgICBpZiAodGhpcy5pc011bHRpcGxlU2VsZWN0aW9uKCkpIHsKICAgICAgICB2YWx1ZSA9IHRoaXMubW9kZWxWYWx1ZVt0aGlzLm1vZGVsVmFsdWUubGVuZ3RoIC0gMV07CiAgICAgIH0KCiAgICAgIHZhciB2YWx1ZURhdGVTdHJpbmcgPSB2YWx1ZSA/IHZhbHVlLnRvRGF0ZVN0cmluZygpIDogbnVsbDsKCiAgICAgIGlmICh0aGlzLm1pbkRhdGUgJiYgdmFsdWVEYXRlU3RyaW5nICYmIHRoaXMubWluRGF0ZS50b0RhdGVTdHJpbmcoKSA9PT0gdmFsdWVEYXRlU3RyaW5nKSB7CiAgICAgICAgaWYgKHRoaXMubWluRGF0ZS5nZXRIb3VycygpID4gY29udmVydGVkSG91cikgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMubWluRGF0ZS5nZXRIb3VycygpID09PSBjb252ZXJ0ZWRIb3VyKSB7CiAgICAgICAgICBpZiAodGhpcy5taW5EYXRlLmdldE1pbnV0ZXMoKSA+IG1pbnV0ZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRoaXMubWluRGF0ZS5nZXRNaW51dGVzKCkgPT09IG1pbnV0ZSkgewogICAgICAgICAgICBpZiAodGhpcy5taW5EYXRlLmdldFNlY29uZHMoKSA+IHNlY29uZCkgewogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMubWF4RGF0ZSAmJiB2YWx1ZURhdGVTdHJpbmcgJiYgdGhpcy5tYXhEYXRlLnRvRGF0ZVN0cmluZygpID09PSB2YWx1ZURhdGVTdHJpbmcpIHsKICAgICAgICBpZiAodGhpcy5tYXhEYXRlLmdldEhvdXJzKCkgPCBjb252ZXJ0ZWRIb3VyKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5tYXhEYXRlLmdldEhvdXJzKCkgPT09IGNvbnZlcnRlZEhvdXIpIHsKICAgICAgICAgIGlmICh0aGlzLm1heERhdGUuZ2V0TWludXRlcygpIDwgbWludXRlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodGhpcy5tYXhEYXRlLmdldE1pbnV0ZXMoKSA9PT0gbWludXRlKSB7CiAgICAgICAgICAgIGlmICh0aGlzLm1heERhdGUuZ2V0U2Vjb25kcygpIDwgc2Vjb25kKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICBpbmNyZW1lbnRIb3VyOiBmdW5jdGlvbiBpbmNyZW1lbnRIb3VyKGV2ZW50KSB7CiAgICAgIHZhciBwcmV2SG91ciA9IHRoaXMuY3VycmVudEhvdXI7CiAgICAgIHZhciBuZXdIb3VyID0gdGhpcy5jdXJyZW50SG91ciArIHRoaXMuc3RlcEhvdXI7CiAgICAgIHZhciBuZXdQTSA9IHRoaXMucG07CiAgICAgIGlmICh0aGlzLmhvdXJGb3JtYXQgPT0gJzI0JykgbmV3SG91ciA9IG5ld0hvdXIgPj0gMjQgPyBuZXdIb3VyIC0gMjQgOiBuZXdIb3VyO2Vsc2UgaWYgKHRoaXMuaG91ckZvcm1hdCA9PSAnMTInKSB7CiAgICAgICAgLy8gQmVmb3JlIHRoZSBBTS9QTSBicmVhaywgbm93IGFmdGVyCiAgICAgICAgaWYgKHByZXZIb3VyIDwgMTIgJiYgbmV3SG91ciA+IDExKSB7CiAgICAgICAgICBuZXdQTSA9ICF0aGlzLnBtOwogICAgICAgIH0KCiAgICAgICAgbmV3SG91ciA9IG5ld0hvdXIgPj0gMTMgPyBuZXdIb3VyIC0gMTIgOiBuZXdIb3VyOwogICAgICB9CgogICAgICBpZiAodGhpcy52YWxpZGF0ZVRpbWUobmV3SG91ciwgdGhpcy5jdXJyZW50TWludXRlLCB0aGlzLmN1cnJlbnRTZWNvbmQsIG5ld1BNKSkgewogICAgICAgIHRoaXMuY3VycmVudEhvdXIgPSBuZXdIb3VyOwogICAgICAgIHRoaXMucG0gPSBuZXdQTTsKICAgICAgfQoKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIH0sCiAgICBkZWNyZW1lbnRIb3VyOiBmdW5jdGlvbiBkZWNyZW1lbnRIb3VyKGV2ZW50KSB7CiAgICAgIHZhciBuZXdIb3VyID0gdGhpcy5jdXJyZW50SG91ciAtIHRoaXMuc3RlcEhvdXI7CiAgICAgIHZhciBuZXdQTSA9IHRoaXMucG07CiAgICAgIGlmICh0aGlzLmhvdXJGb3JtYXQgPT0gJzI0JykgbmV3SG91ciA9IG5ld0hvdXIgPCAwID8gMjQgKyBuZXdIb3VyIDogbmV3SG91cjtlbHNlIGlmICh0aGlzLmhvdXJGb3JtYXQgPT0gJzEyJykgewogICAgICAgIC8vIElmIHdlIHdlcmUgYXQgbm9vbi9taWRuaWdodCwgdGhlbiBzd2l0Y2gKICAgICAgICBpZiAodGhpcy5jdXJyZW50SG91ciA9PT0gMTIpIHsKICAgICAgICAgIG5ld1BNID0gIXRoaXMucG07CiAgICAgICAgfQoKICAgICAgICBuZXdIb3VyID0gbmV3SG91ciA8PSAwID8gMTIgKyBuZXdIb3VyIDogbmV3SG91cjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudmFsaWRhdGVUaW1lKG5ld0hvdXIsIHRoaXMuY3VycmVudE1pbnV0ZSwgdGhpcy5jdXJyZW50U2Vjb25kLCBuZXdQTSkpIHsKICAgICAgICB0aGlzLmN1cnJlbnRIb3VyID0gbmV3SG91cjsKICAgICAgICB0aGlzLnBtID0gbmV3UE07CiAgICAgIH0KCiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICB9LAogICAgaW5jcmVtZW50TWludXRlOiBmdW5jdGlvbiBpbmNyZW1lbnRNaW51dGUoZXZlbnQpIHsKICAgICAgdmFyIG5ld01pbnV0ZSA9IHRoaXMuY3VycmVudE1pbnV0ZSArIHRoaXMuc3RlcE1pbnV0ZTsKCiAgICAgIGlmICh0aGlzLnZhbGlkYXRlVGltZSh0aGlzLmN1cnJlbnRIb3VyLCBuZXdNaW51dGUsIHRoaXMuY3VycmVudFNlY29uZCwgdHJ1ZSkpIHsKICAgICAgICB0aGlzLmN1cnJlbnRNaW51dGUgPSBuZXdNaW51dGUgPiA1OSA/IG5ld01pbnV0ZSAtIDYwIDogbmV3TWludXRlOwogICAgICB9CgogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgfSwKICAgIGRlY3JlbWVudE1pbnV0ZTogZnVuY3Rpb24gZGVjcmVtZW50TWludXRlKGV2ZW50KSB7CiAgICAgIHZhciBuZXdNaW51dGUgPSB0aGlzLmN1cnJlbnRNaW51dGUgLSB0aGlzLnN0ZXBNaW51dGU7CiAgICAgIG5ld01pbnV0ZSA9IG5ld01pbnV0ZSA8IDAgPyA2MCArIG5ld01pbnV0ZSA6IG5ld01pbnV0ZTsKCiAgICAgIGlmICh0aGlzLnZhbGlkYXRlVGltZSh0aGlzLmN1cnJlbnRIb3VyLCBuZXdNaW51dGUsIHRoaXMuY3VycmVudFNlY29uZCwgdHJ1ZSkpIHsKICAgICAgICB0aGlzLmN1cnJlbnRNaW51dGUgPSBuZXdNaW51dGU7CiAgICAgIH0KCiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICB9LAogICAgaW5jcmVtZW50U2Vjb25kOiBmdW5jdGlvbiBpbmNyZW1lbnRTZWNvbmQoZXZlbnQpIHsKICAgICAgdmFyIG5ld1NlY29uZCA9IHRoaXMuY3VycmVudFNlY29uZCArIHRoaXMuc3RlcFNlY29uZDsKCiAgICAgIGlmICh0aGlzLnZhbGlkYXRlVGltZSh0aGlzLmN1cnJlbnRIb3VyLCB0aGlzLmN1cnJlbnRNaW51dGUsIG5ld1NlY29uZCwgdHJ1ZSkpIHsKICAgICAgICB0aGlzLmN1cnJlbnRTZWNvbmQgPSBuZXdTZWNvbmQgPiA1OSA/IG5ld1NlY29uZCAtIDYwIDogbmV3U2Vjb25kOwogICAgICB9CgogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgfSwKICAgIGRlY3JlbWVudFNlY29uZDogZnVuY3Rpb24gZGVjcmVtZW50U2Vjb25kKGV2ZW50KSB7CiAgICAgIHZhciBuZXdTZWNvbmQgPSB0aGlzLmN1cnJlbnRTZWNvbmQgLSB0aGlzLnN0ZXBTZWNvbmQ7CiAgICAgIG5ld1NlY29uZCA9IG5ld1NlY29uZCA8IDAgPyA2MCArIG5ld1NlY29uZCA6IG5ld1NlY29uZDsKCiAgICAgIGlmICh0aGlzLnZhbGlkYXRlVGltZSh0aGlzLmN1cnJlbnRIb3VyLCB0aGlzLmN1cnJlbnRNaW51dGUsIG5ld1NlY29uZCwgdHJ1ZSkpIHsKICAgICAgICB0aGlzLmN1cnJlbnRTZWNvbmQgPSBuZXdTZWNvbmQ7CiAgICAgIH0KCiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICB9LAogICAgdXBkYXRlTW9kZWxUaW1lOiBmdW5jdGlvbiB1cGRhdGVNb2RlbFRpbWUoKSB7CiAgICAgIHZhciB2YWx1ZSA9IHRoaXMuaXNDb21wYXJhYmxlKCkgPyB0aGlzLm1vZGVsVmFsdWUgOiBuZXcgRGF0ZSgpOwoKICAgICAgaWYgKHRoaXMuaXNSYW5nZVNlbGVjdGlvbigpKSB7CiAgICAgICAgdmFsdWUgPSB0aGlzLm1vZGVsVmFsdWVbMV0gfHwgdGhpcy5tb2RlbFZhbHVlWzBdOwogICAgICB9CgogICAgICBpZiAodGhpcy5pc011bHRpcGxlU2VsZWN0aW9uKCkpIHsKICAgICAgICB2YWx1ZSA9IHRoaXMubW9kZWxWYWx1ZVt0aGlzLm1vZGVsVmFsdWUubGVuZ3RoIC0gMV07CiAgICAgIH0KCiAgICAgIHZhbHVlID0gdmFsdWUgPyBuZXcgRGF0ZSh2YWx1ZS5nZXRUaW1lKCkpIDogbmV3IERhdGUoKTsKCiAgICAgIGlmICh0aGlzLmhvdXJGb3JtYXQgPT0gJzEyJykgewogICAgICAgIGlmICh0aGlzLmN1cnJlbnRIb3VyID09PSAxMikgdmFsdWUuc2V0SG91cnModGhpcy5wbSA/IDEyIDogMCk7ZWxzZSB2YWx1ZS5zZXRIb3Vycyh0aGlzLnBtID8gdGhpcy5jdXJyZW50SG91ciArIDEyIDogdGhpcy5jdXJyZW50SG91cik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsdWUuc2V0SG91cnModGhpcy5jdXJyZW50SG91cik7CiAgICAgIH0KCiAgICAgIHZhbHVlLnNldE1pbnV0ZXModGhpcy5jdXJyZW50TWludXRlKTsKICAgICAgdmFsdWUuc2V0U2Vjb25kcyh0aGlzLmN1cnJlbnRTZWNvbmQpOwoKICAgICAgaWYgKHRoaXMuaXNSYW5nZVNlbGVjdGlvbigpKSB7CiAgICAgICAgaWYgKHRoaXMubW9kZWxWYWx1ZVsxXSkgdmFsdWUgPSBbdGhpcy5tb2RlbFZhbHVlWzBdLCB2YWx1ZV07ZWxzZSB2YWx1ZSA9IFt2YWx1ZSwgbnVsbF07CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmlzTXVsdGlwbGVTZWxlY3Rpb24oKSkgewogICAgICAgIHZhbHVlID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0aGlzLm1vZGVsVmFsdWUuc2xpY2UoMCwgLTEpKSwgW3ZhbHVlXSk7CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlTW9kZWwodmFsdWUpOwogICAgICB0aGlzLiRlbWl0KCdkYXRlLXNlbGVjdCcsIHZhbHVlKTsKICAgIH0sCiAgICB0b2dnbGVBTVBNOiBmdW5jdGlvbiB0b2dnbGVBTVBNKGV2ZW50KSB7CiAgICAgIHRoaXMucG0gPSAhdGhpcy5wbTsKICAgICAgdGhpcy51cGRhdGVNb2RlbFRpbWUoKTsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIH0sCiAgICBjbGVhclRpbWVQaWNrZXJUaW1lcjogZnVuY3Rpb24gY2xlYXJUaW1lUGlja2VyVGltZXIoKSB7CiAgICAgIGlmICh0aGlzLnRpbWVQaWNrZXJUaW1lcikgewogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lUGlja2VyVGltZXIpOwogICAgICB9CiAgICB9LAogICAgb25Nb250aFNlbGVjdDogZnVuY3Rpb24gb25Nb250aFNlbGVjdChldmVudCwgaW5kZXgpIHsKICAgICAgdGhpcy5vbkRhdGVTZWxlY3QoZXZlbnQsIHsKICAgICAgICB5ZWFyOiB0aGlzLmN1cnJlbnRZZWFyLAogICAgICAgIG1vbnRoOiBpbmRleCwKICAgICAgICBkYXk6IDEsCiAgICAgICAgc2VsZWN0YWJsZTogdHJ1ZQogICAgICB9KTsKICAgIH0sCiAgICBlbmFibGVNb2RhbGl0eTogZnVuY3Rpb24gZW5hYmxlTW9kYWxpdHkoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLm1hc2spIHsKICAgICAgICB0aGlzLm1hc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICB0aGlzLm1hc2suc3R5bGUuekluZGV4ID0gU3RyaW5nKHBhcnNlSW50KHRoaXMub3ZlcmxheS5zdHlsZS56SW5kZXgsIDEwKSAtIDEpOwogICAgICAgIERvbUhhbmRsZXIuYWRkTXVsdGlwbGVDbGFzc2VzKHRoaXMubWFzaywgJ3AtZGF0ZXBpY2tlci1tYXNrIHAtZGF0ZXBpY2tlci1tYXNrLXNjcm9sbGJsb2NrZXIgcC1jb21wb25lbnQtb3ZlcmxheSBwLWNvbXBvbmVudC1vdmVybGF5LWVudGVyJyk7CgogICAgICAgIHRoaXMubWFza0NsaWNrTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczYub3ZlcmxheVZpc2libGUgPSBmYWxzZTsKICAgICAgICB9OwoKICAgICAgICB0aGlzLm1hc2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm1hc2tDbGlja0xpc3RlbmVyKTsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMubWFzayk7CiAgICAgICAgRG9tSGFuZGxlci5hZGRDbGFzcyhkb2N1bWVudC5ib2R5LCAncC1vdmVyZmxvdy1oaWRkZW4nKTsKICAgICAgfQogICAgfSwKICAgIGRpc2FibGVNb2RhbGl0eTogZnVuY3Rpb24gZGlzYWJsZU1vZGFsaXR5KCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLm1hc2spIHsKICAgICAgICBEb21IYW5kbGVyLmFkZENsYXNzKHRoaXMubWFzaywgJ3AtY29tcG9uZW50LW92ZXJsYXktbGVhdmUnKTsKICAgICAgICB0aGlzLm1hc2suYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM3LmRlc3Ryb3lNYXNrKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBkZXN0cm95TWFzazogZnVuY3Rpb24gZGVzdHJveU1hc2soKSB7CiAgICAgIHRoaXMubWFzay5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMubWFza0NsaWNrTGlzdGVuZXIpOwogICAgICB0aGlzLm1hc2tDbGlja0xpc3RlbmVyID0gbnVsbDsKICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLm1hc2spOwogICAgICB0aGlzLm1hc2sgPSBudWxsOwogICAgICB2YXIgYm9keUNoaWxkcmVuID0gZG9jdW1lbnQuYm9keS5jaGlsZHJlbjsKICAgICAgdmFyIGhhc0Jsb2NrZXJNYXNrczsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYm9keUNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGJvZHlDaGlsZCA9IGJvZHlDaGlsZHJlbltpXTsKCiAgICAgICAgaWYgKERvbUhhbmRsZXIuaGFzQ2xhc3MoYm9keUNoaWxkLCAncC1kYXRlcGlja2VyLW1hc2stc2Nyb2xsYmxvY2tlcicpKSB7CiAgICAgICAgICBoYXNCbG9ja2VyTWFza3MgPSB0cnVlOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoIWhhc0Jsb2NrZXJNYXNrcykgewogICAgICAgIERvbUhhbmRsZXIucmVtb3ZlQ2xhc3MoZG9jdW1lbnQuYm9keSwgJ3Atb3ZlcmZsb3ctaGlkZGVuJyk7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVDdXJyZW50TWV0YURhdGE6IGZ1bmN0aW9uIHVwZGF0ZUN1cnJlbnRNZXRhRGF0YSgpIHsKICAgICAgdmFyIHZpZXdEYXRlID0gdGhpcy52aWV3RGF0ZTsKICAgICAgdGhpcy5jdXJyZW50TW9udGggPSB2aWV3RGF0ZS5nZXRNb250aCgpOwogICAgICB0aGlzLmN1cnJlbnRZZWFyID0gdmlld0RhdGUuZ2V0RnVsbFllYXIoKTsKCiAgICAgIGlmICh0aGlzLnNob3dUaW1lIHx8IHRoaXMudGltZU9ubHkpIHsKICAgICAgICB0aGlzLnVwZGF0ZUN1cnJlbnRUaW1lTWV0YSh2aWV3RGF0ZSk7CiAgICAgIH0KICAgIH0sCiAgICBpc1ZhbGlkU2VsZWN0aW9uOiBmdW5jdGlvbiBpc1ZhbGlkU2VsZWN0aW9uKHZhbHVlKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgdmFyIGlzVmFsaWQgPSB0cnVlOwoKICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWxlY3Rpb24oKSkgewogICAgICAgIGlmICghdGhpcy5pc1NlbGVjdGFibGUodmFsdWUuZ2V0RGF0ZSgpLCB2YWx1ZS5nZXRNb250aCgpLCB2YWx1ZS5nZXRGdWxsWWVhcigpLCBmYWxzZSkpIHsKICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodmFsdWUuZXZlcnkoZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gX3RoaXM4LmlzU2VsZWN0YWJsZSh2LmdldERhdGUoKSwgdi5nZXRNb250aCgpLCB2LmdldEZ1bGxZZWFyKCksIGZhbHNlKTsKICAgICAgfSkpIHsKICAgICAgICBpZiAodGhpcy5pc1JhbmdlU2VsZWN0aW9uKCkpIHsKICAgICAgICAgIGlzVmFsaWQgPSB2YWx1ZS5sZW5ndGggPiAxICYmIHZhbHVlWzFdID4gdmFsdWVbMF0gPyB0cnVlIDogZmFsc2U7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gaXNWYWxpZDsKICAgIH0sCiAgICBwYXJzZVZhbHVlOiBmdW5jdGlvbiBwYXJzZVZhbHVlKHRleHQpIHsKICAgICAgaWYgKCF0ZXh0IHx8IHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICB2YXIgdmFsdWU7CgogICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbGVjdGlvbigpKSB7CiAgICAgICAgdmFsdWUgPSB0aGlzLnBhcnNlRGF0ZVRpbWUodGV4dCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc011bHRpcGxlU2VsZWN0aW9uKCkpIHsKICAgICAgICB2YXIgdG9rZW5zID0gdGV4dC5zcGxpdCgnLCcpOwogICAgICAgIHZhbHVlID0gW107CgogICAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodG9rZW5zKSwKICAgICAgICAgICAgX3N0ZXAzOwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIHRva2VuID0gX3N0ZXAzLnZhbHVlOwogICAgICAgICAgICB2YWx1ZS5wdXNoKHRoaXMucGFyc2VEYXRlVGltZSh0b2tlbi50cmltKCkpKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvcjMuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IzLmYoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1JhbmdlU2VsZWN0aW9uKCkpIHsKICAgICAgICB2YXIgX3Rva2VucyA9IHRleHQuc3BsaXQoJyAtICcpOwoKICAgICAgICB2YWx1ZSA9IFtdOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF90b2tlbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHZhbHVlW2ldID0gdGhpcy5wYXJzZURhdGVUaW1lKF90b2tlbnNbaV0udHJpbSgpKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0sCiAgICBwYXJzZURhdGVUaW1lOiBmdW5jdGlvbiBwYXJzZURhdGVUaW1lKHRleHQpIHsKICAgICAgdmFyIGRhdGU7CiAgICAgIHZhciBwYXJ0cyA9IHRleHQuc3BsaXQoJyAnKTsKCiAgICAgIGlmICh0aGlzLnRpbWVPbmx5KSB7CiAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgdGhpcy5wb3B1bGF0ZVRpbWUoZGF0ZSwgcGFydHNbMF0sIHBhcnRzWzFdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgZGF0ZUZvcm1hdCA9IHRoaXMuZGF0ZVBhdHRlcm47CgogICAgICAgIGlmICh0aGlzLnNob3dUaW1lKSB7CiAgICAgICAgICBkYXRlID0gdGhpcy5wYXJzZURhdGUocGFydHNbMF0sIGRhdGVGb3JtYXQpOwogICAgICAgICAgdGhpcy5wb3B1bGF0ZVRpbWUoZGF0ZSwgcGFydHNbMV0sIHBhcnRzWzJdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGF0ZSA9IHRoaXMucGFyc2VEYXRlKHRleHQsIGRhdGVGb3JtYXQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGRhdGU7CiAgICB9LAogICAgcG9wdWxhdGVUaW1lOiBmdW5jdGlvbiBwb3B1bGF0ZVRpbWUodmFsdWUsIHRpbWVTdHJpbmcsIGFtcG0pIHsKICAgICAgaWYgKHRoaXMuaG91ckZvcm1hdCA9PSAnMTInICYmICFhbXBtKSB7CiAgICAgICAgdGhyb3cgJ0ludmFsaWQgVGltZSc7CiAgICAgIH0KCiAgICAgIHRoaXMucG0gPSBhbXBtID09PSAnUE0nIHx8IGFtcG0gPT09ICdwbSc7CiAgICAgIHZhciB0aW1lID0gdGhpcy5wYXJzZVRpbWUodGltZVN0cmluZyk7CiAgICAgIHZhbHVlLnNldEhvdXJzKHRpbWUuaG91cik7CiAgICAgIHZhbHVlLnNldE1pbnV0ZXModGltZS5taW51dGUpOwogICAgICB2YWx1ZS5zZXRTZWNvbmRzKHRpbWUuc2Vjb25kKTsKICAgIH0sCiAgICBwYXJzZVRpbWU6IGZ1bmN0aW9uIHBhcnNlVGltZSh2YWx1ZSkgewogICAgICB2YXIgdG9rZW5zID0gdmFsdWUuc3BsaXQoJzonKTsKICAgICAgdmFyIHZhbGlkVG9rZW5MZW5ndGggPSB0aGlzLnNob3dTZWNvbmRzID8gMyA6IDI7CiAgICAgIHZhciByZWdleCA9IC9eWzAtOV1bMC05XSQvOwoKICAgICAgaWYgKHRva2Vucy5sZW5ndGggIT09IHZhbGlkVG9rZW5MZW5ndGggfHwgIXRva2Vuc1swXS5tYXRjaChyZWdleCkgfHwgIXRva2Vuc1sxXS5tYXRjaChyZWdleCkgfHwgdGhpcy5zaG93U2Vjb25kcyAmJiAhdG9rZW5zWzJdLm1hdGNoKHJlZ2V4KSkgewogICAgICAgIHRocm93ICJJbnZhbGlkIHRpbWUiOwogICAgICB9CgogICAgICB2YXIgaCA9IHBhcnNlSW50KHRva2Vuc1swXSk7CiAgICAgIHZhciBtID0gcGFyc2VJbnQodG9rZW5zWzFdKTsKICAgICAgdmFyIHMgPSB0aGlzLnNob3dTZWNvbmRzID8gcGFyc2VJbnQodG9rZW5zWzJdKSA6IG51bGw7CgogICAgICBpZiAoaXNOYU4oaCkgfHwgaXNOYU4obSkgfHwgaCA+IDIzIHx8IG0gPiA1OSB8fCB0aGlzLmhvdXJGb3JtYXQgPT0gJzEyJyAmJiBoID4gMTIgfHwgdGhpcy5zaG93U2Vjb25kcyAmJiAoaXNOYU4ocykgfHwgcyA+IDU5KSkgewogICAgICAgIHRocm93ICJJbnZhbGlkIHRpbWUiOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLmhvdXJGb3JtYXQgPT0gJzEyJyAmJiBoICE9PSAxMiAmJiB0aGlzLnBtKSB7CiAgICAgICAgICBoICs9IDEyOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGhvdXI6IGgsCiAgICAgICAgICBtaW51dGU6IG0sCiAgICAgICAgICBzZWNvbmQ6IHMKICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgcGFyc2VEYXRlOiBmdW5jdGlvbiBwYXJzZURhdGUodmFsdWUsIGZvcm1hdCkgewogICAgICBpZiAoZm9ybWF0ID09IG51bGwgfHwgdmFsdWUgPT0gbnVsbCkgewogICAgICAgIHRocm93ICJJbnZhbGlkIGFyZ3VtZW50cyI7CiAgICAgIH0KCiAgICAgIHZhbHVlID0gX3R5cGVvZih2YWx1ZSkgPT09ICJvYmplY3QiID8gdmFsdWUudG9TdHJpbmcoKSA6IHZhbHVlICsgIiI7CgogICAgICBpZiAodmFsdWUgPT09ICIiKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHZhciBpRm9ybWF0LAogICAgICAgICAgZGltLAogICAgICAgICAgZXh0cmEsCiAgICAgICAgICBpVmFsdWUgPSAwLAogICAgICAgICAgc2hvcnRZZWFyQ3V0b2ZmID0gdHlwZW9mIHRoaXMuc2hvcnRZZWFyQ3V0b2ZmICE9PSAic3RyaW5nIiA/IHRoaXMuc2hvcnRZZWFyQ3V0b2ZmIDogbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpICUgMTAwICsgcGFyc2VJbnQodGhpcy5zaG9ydFllYXJDdXRvZmYsIDEwKSwKICAgICAgICAgIHllYXIgPSAtMSwKICAgICAgICAgIG1vbnRoID0gLTEsCiAgICAgICAgICBkYXkgPSAtMSwKICAgICAgICAgIGRveSA9IC0xLAogICAgICAgICAgbGl0ZXJhbCA9IGZhbHNlLAogICAgICAgICAgZGF0ZSwKICAgICAgICAgIGxvb2tBaGVhZCA9IGZ1bmN0aW9uIGxvb2tBaGVhZChtYXRjaCkgewogICAgICAgIHZhciBtYXRjaGVzID0gaUZvcm1hdCArIDEgPCBmb3JtYXQubGVuZ3RoICYmIGZvcm1hdC5jaGFyQXQoaUZvcm1hdCArIDEpID09PSBtYXRjaDsKCiAgICAgICAgaWYgKG1hdGNoZXMpIHsKICAgICAgICAgIGlGb3JtYXQrKzsKICAgICAgICB9CgogICAgICAgIHJldHVybiBtYXRjaGVzOwogICAgICB9LAogICAgICAgICAgZ2V0TnVtYmVyID0gZnVuY3Rpb24gZ2V0TnVtYmVyKG1hdGNoKSB7CiAgICAgICAgdmFyIGlzRG91YmxlZCA9IGxvb2tBaGVhZChtYXRjaCksCiAgICAgICAgICAgIHNpemUgPSBtYXRjaCA9PT0gIkAiID8gMTQgOiBtYXRjaCA9PT0gIiEiID8gMjAgOiBtYXRjaCA9PT0gInkiICYmIGlzRG91YmxlZCA/IDQgOiBtYXRjaCA9PT0gIm8iID8gMyA6IDIsCiAgICAgICAgICAgIG1pblNpemUgPSBtYXRjaCA9PT0gInkiID8gc2l6ZSA6IDEsCiAgICAgICAgICAgIGRpZ2l0cyA9IG5ldyBSZWdFeHAoIl5cXGR7IiArIG1pblNpemUgKyAiLCIgKyBzaXplICsgIn0iKSwKICAgICAgICAgICAgbnVtID0gdmFsdWUuc3Vic3RyaW5nKGlWYWx1ZSkubWF0Y2goZGlnaXRzKTsKCiAgICAgICAgaWYgKCFudW0pIHsKICAgICAgICAgIHRocm93ICJNaXNzaW5nIG51bWJlciBhdCBwb3NpdGlvbiAiICsgaVZhbHVlOwogICAgICAgIH0KCiAgICAgICAgaVZhbHVlICs9IG51bVswXS5sZW5ndGg7CiAgICAgICAgcmV0dXJuIHBhcnNlSW50KG51bVswXSwgMTApOwogICAgICB9LAogICAgICAgICAgZ2V0TmFtZSA9IGZ1bmN0aW9uIGdldE5hbWUobWF0Y2gsIHNob3J0TmFtZXMsIGxvbmdOYW1lcykgewogICAgICAgIHZhciBpbmRleCA9IC0xOwogICAgICAgIHZhciBhcnIgPSBsb29rQWhlYWQobWF0Y2gpID8gbG9uZ05hbWVzIDogc2hvcnROYW1lczsKICAgICAgICB2YXIgbmFtZXMgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIG5hbWVzLnB1c2goW2ksIGFycltpXV0pOwogICAgICAgIH0KCiAgICAgICAgbmFtZXMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgcmV0dXJuIC0oYVsxXS5sZW5ndGggLSBiWzFdLmxlbmd0aCk7CiAgICAgICAgfSk7CgogICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBuYW1lcy5sZW5ndGg7IF9pKyspIHsKICAgICAgICAgIHZhciBuYW1lID0gbmFtZXNbX2ldWzFdOwoKICAgICAgICAgIGlmICh2YWx1ZS5zdWJzdHIoaVZhbHVlLCBuYW1lLmxlbmd0aCkudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpKSB7CiAgICAgICAgICAgIGluZGV4ID0gbmFtZXNbX2ldWzBdOwogICAgICAgICAgICBpVmFsdWUgKz0gbmFtZS5sZW5ndGg7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgICAgcmV0dXJuIGluZGV4ICsgMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgIlVua25vd24gbmFtZSBhdCBwb3NpdGlvbiAiICsgaVZhbHVlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgICAgIGNoZWNrTGl0ZXJhbCA9IGZ1bmN0aW9uIGNoZWNrTGl0ZXJhbCgpIHsKICAgICAgICBpZiAodmFsdWUuY2hhckF0KGlWYWx1ZSkgIT09IGZvcm1hdC5jaGFyQXQoaUZvcm1hdCkpIHsKICAgICAgICAgIHRocm93ICJVbmV4cGVjdGVkIGxpdGVyYWwgYXQgcG9zaXRpb24gIiArIGlWYWx1ZTsKICAgICAgICB9CgogICAgICAgIGlWYWx1ZSsrOwogICAgICB9OwoKICAgICAgaWYgKHRoaXMudmlldyA9PT0gJ21vbnRoJykgewogICAgICAgIGRheSA9IDE7CiAgICAgIH0KCiAgICAgIGZvciAoaUZvcm1hdCA9IDA7IGlGb3JtYXQgPCBmb3JtYXQubGVuZ3RoOyBpRm9ybWF0KyspIHsKICAgICAgICBpZiAobGl0ZXJhbCkgewogICAgICAgICAgaWYgKGZvcm1hdC5jaGFyQXQoaUZvcm1hdCkgPT09ICInIiAmJiAhbG9va0FoZWFkKCInIikpIHsKICAgICAgICAgICAgbGl0ZXJhbCA9IGZhbHNlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2hlY2tMaXRlcmFsKCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN3aXRjaCAoZm9ybWF0LmNoYXJBdChpRm9ybWF0KSkgewogICAgICAgICAgICBjYXNlICJkIjoKICAgICAgICAgICAgICBkYXkgPSBnZXROdW1iZXIoImQiKTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgIkQiOgogICAgICAgICAgICAgIGdldE5hbWUoIkQiLCB0aGlzLiRwcmltZXZ1ZS5jb25maWcubG9jYWxlLmRheU5hbWVzU2hvcnQsIHRoaXMuJHByaW1ldnVlLmNvbmZpZy5sb2NhbGUuZGF5TmFtZXMpOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAibyI6CiAgICAgICAgICAgICAgZG95ID0gZ2V0TnVtYmVyKCJvIik7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICJtIjoKICAgICAgICAgICAgICBtb250aCA9IGdldE51bWJlcigibSIpOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAiTSI6CiAgICAgICAgICAgICAgbW9udGggPSBnZXROYW1lKCJNIiwgdGhpcy4kcHJpbWV2dWUuY29uZmlnLmxvY2FsZS5tb250aE5hbWVzU2hvcnQsIHRoaXMuJHByaW1ldnVlLmNvbmZpZy5sb2NhbGUubW9udGhOYW1lcyk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICJ5IjoKICAgICAgICAgICAgICB5ZWFyID0gZ2V0TnVtYmVyKCJ5Iik7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICJAIjoKICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoZ2V0TnVtYmVyKCJAIikpOwogICAgICAgICAgICAgIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7CiAgICAgICAgICAgICAgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxOwogICAgICAgICAgICAgIGRheSA9IGRhdGUuZ2V0RGF0ZSgpOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAiISI6CiAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKChnZXROdW1iZXIoIiEiKSAtIHRoaXMudGlja3NUbzE5NzApIC8gMTAwMDApOwogICAgICAgICAgICAgIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7CiAgICAgICAgICAgICAgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxOwogICAgICAgICAgICAgIGRheSA9IGRhdGUuZ2V0RGF0ZSgpOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAiJyI6CiAgICAgICAgICAgICAgaWYgKGxvb2tBaGVhZCgiJyIpKSB7CiAgICAgICAgICAgICAgICBjaGVja0xpdGVyYWwoKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbGl0ZXJhbCA9IHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgY2hlY2tMaXRlcmFsKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoaVZhbHVlIDwgdmFsdWUubGVuZ3RoKSB7CiAgICAgICAgZXh0cmEgPSB2YWx1ZS5zdWJzdHIoaVZhbHVlKTsKCiAgICAgICAgaWYgKCEvXlxzKy8udGVzdChleHRyYSkpIHsKICAgICAgICAgIHRocm93ICJFeHRyYS91bnBhcnNlZCBjaGFyYWN0ZXJzIGZvdW5kIGluIGRhdGU6ICIgKyBleHRyYTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh5ZWFyID09PSAtMSkgewogICAgICAgIHllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7CiAgICAgIH0gZWxzZSBpZiAoeWVhciA8IDEwMCkgewogICAgICAgIHllYXIgKz0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpIC0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpICUgMTAwICsgKHllYXIgPD0gc2hvcnRZZWFyQ3V0b2ZmID8gMCA6IC0xMDApOwogICAgICB9CgogICAgICBpZiAoZG95ID4gLTEpIHsKICAgICAgICBtb250aCA9IDE7CiAgICAgICAgZGF5ID0gZG95OwoKICAgICAgICBkbyB7CiAgICAgICAgICBkaW0gPSB0aGlzLmdldERheXNDb3VudEluTW9udGgoeWVhciwgbW9udGggLSAxKTsKCiAgICAgICAgICBpZiAoZGF5IDw9IGRpbSkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBtb250aCsrOwogICAgICAgICAgZGF5IC09IGRpbTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgfSB3aGlsZSAodHJ1ZSk7CiAgICAgIH0KCiAgICAgIGRhdGUgPSB0aGlzLmRheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHllYXIsIG1vbnRoIC0gMSwgZGF5KSk7CgogICAgICBpZiAoZGF0ZS5nZXRGdWxsWWVhcigpICE9PSB5ZWFyIHx8IGRhdGUuZ2V0TW9udGgoKSArIDEgIT09IG1vbnRoIHx8IGRhdGUuZ2V0RGF0ZSgpICE9PSBkYXkpIHsKICAgICAgICB0aHJvdyAiSW52YWxpZCBkYXRlIjsgLy8gRS5nLiAzMS8wMi8wMAogICAgICB9CgogICAgICByZXR1cm4gZGF0ZTsKICAgIH0sCiAgICBnZXRXZWVrTnVtYmVyOiBmdW5jdGlvbiBnZXRXZWVrTnVtYmVyKGRhdGUpIHsKICAgICAgdmFyIGNoZWNrRGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTsKICAgICAgY2hlY2tEYXRlLnNldERhdGUoY2hlY2tEYXRlLmdldERhdGUoKSArIDQgLSAoY2hlY2tEYXRlLmdldERheSgpIHx8IDcpKTsKICAgICAgdmFyIHRpbWUgPSBjaGVja0RhdGUuZ2V0VGltZSgpOwogICAgICBjaGVja0RhdGUuc2V0TW9udGgoMCk7CiAgICAgIGNoZWNrRGF0ZS5zZXREYXRlKDEpOwogICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJvdW5kKCh0aW1lIC0gY2hlY2tEYXRlLmdldFRpbWUoKSkgLyA4NjQwMDAwMCkgLyA3KSArIDE7CiAgICB9LAogICAgb25EYXRlQ2VsbEtleWRvd246IGZ1bmN0aW9uIG9uRGF0ZUNlbGxLZXlkb3duKGV2ZW50LCBkYXRlLCBncm91cEluZGV4KSB7CiAgICAgIHZhciBjZWxsQ29udGVudCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7CiAgICAgIHZhciBjZWxsID0gY2VsbENvbnRlbnQucGFyZW50RWxlbWVudDsKCiAgICAgIHN3aXRjaCAoZXZlbnQud2hpY2gpIHsKICAgICAgICAvL2Rvd24gYXJyb3cKICAgICAgICBjYXNlIDQwOgogICAgICAgICAgewogICAgICAgICAgICBjZWxsQ29udGVudC50YWJJbmRleCA9ICctMSc7CiAgICAgICAgICAgIHZhciBjZWxsSW5kZXggPSBEb21IYW5kbGVyLmluZGV4KGNlbGwpOwogICAgICAgICAgICB2YXIgbmV4dFJvdyA9IGNlbGwucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmc7CgogICAgICAgICAgICBpZiAobmV4dFJvdykgewogICAgICAgICAgICAgIHZhciBmb2N1c0NlbGwgPSBuZXh0Um93LmNoaWxkcmVuW2NlbGxJbmRleF0uY2hpbGRyZW5bMF07CgogICAgICAgICAgICAgIGlmIChEb21IYW5kbGVyLmhhc0NsYXNzKGZvY3VzQ2VsbCwgJ3AtZGlzYWJsZWQnKSkgewogICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU3RhdGUgPSB7CiAgICAgICAgICAgICAgICAgIGJhY2t3YXJkOiBmYWxzZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMubmF2Rm9yd2FyZChldmVudCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG5leHRSb3cuY2hpbGRyZW5bY2VsbEluZGV4XS5jaGlsZHJlblswXS50YWJJbmRleCA9ICcwJzsKICAgICAgICAgICAgICAgIG5leHRSb3cuY2hpbGRyZW5bY2VsbEluZGV4XS5jaGlsZHJlblswXS5mb2N1cygpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25TdGF0ZSA9IHsKICAgICAgICAgICAgICAgIGJhY2t3YXJkOiBmYWxzZQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgdGhpcy5uYXZGb3J3YXJkKGV2ZW50KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgLy91cCBhcnJvdwoKICAgICAgICBjYXNlIDM4OgogICAgICAgICAgewogICAgICAgICAgICBjZWxsQ29udGVudC50YWJJbmRleCA9ICctMSc7CgogICAgICAgICAgICB2YXIgX2NlbGxJbmRleCA9IERvbUhhbmRsZXIuaW5kZXgoY2VsbCk7CgogICAgICAgICAgICB2YXIgcHJldlJvdyA9IGNlbGwucGFyZW50RWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nOwoKICAgICAgICAgICAgaWYgKHByZXZSb3cpIHsKICAgICAgICAgICAgICB2YXIgX2ZvY3VzQ2VsbCA9IHByZXZSb3cuY2hpbGRyZW5bX2NlbGxJbmRleF0uY2hpbGRyZW5bMF07CgogICAgICAgICAgICAgIGlmIChEb21IYW5kbGVyLmhhc0NsYXNzKF9mb2N1c0NlbGwsICdwLWRpc2FibGVkJykpIHsKICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvblN0YXRlID0gewogICAgICAgICAgICAgICAgICBiYWNrd2FyZDogdHJ1ZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMubmF2QmFja3dhcmQoZXZlbnQpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfZm9jdXNDZWxsLnRhYkluZGV4ID0gJzAnOwoKICAgICAgICAgICAgICAgIF9mb2N1c0NlbGwuZm9jdXMoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU3RhdGUgPSB7CiAgICAgICAgICAgICAgICBiYWNrd2FyZDogdHJ1ZQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgdGhpcy5uYXZCYWNrd2FyZChldmVudCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIC8vbGVmdCBhcnJvdwoKICAgICAgICBjYXNlIDM3OgogICAgICAgICAgewogICAgICAgICAgICBjZWxsQ29udGVudC50YWJJbmRleCA9ICctMSc7CiAgICAgICAgICAgIHZhciBwcmV2Q2VsbCA9IGNlbGwucHJldmlvdXNFbGVtZW50U2libGluZzsKCiAgICAgICAgICAgIGlmIChwcmV2Q2VsbCkgewogICAgICAgICAgICAgIHZhciBfZm9jdXNDZWxsMiA9IHByZXZDZWxsLmNoaWxkcmVuWzBdOwoKICAgICAgICAgICAgICBpZiAoRG9tSGFuZGxlci5oYXNDbGFzcyhfZm9jdXNDZWxsMiwgJ3AtZGlzYWJsZWQnKSkgewogICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZVRvTW9udGgodHJ1ZSwgZ3JvdXBJbmRleCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF9mb2N1c0NlbGwyLnRhYkluZGV4ID0gJzAnOwoKICAgICAgICAgICAgICAgIF9mb2N1c0NlbGwyLmZvY3VzKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMubmF2aWdhdGVUb01vbnRoKHRydWUsIGdyb3VwSW5kZXgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAvL3JpZ2h0IGFycm93CgogICAgICAgIGNhc2UgMzk6CiAgICAgICAgICB7CiAgICAgICAgICAgIGNlbGxDb250ZW50LnRhYkluZGV4ID0gJy0xJzsKICAgICAgICAgICAgdmFyIG5leHRDZWxsID0gY2VsbC5uZXh0RWxlbWVudFNpYmxpbmc7CgogICAgICAgICAgICBpZiAobmV4dENlbGwpIHsKICAgICAgICAgICAgICB2YXIgX2ZvY3VzQ2VsbDMgPSBuZXh0Q2VsbC5jaGlsZHJlblswXTsKCiAgICAgICAgICAgICAgaWYgKERvbUhhbmRsZXIuaGFzQ2xhc3MoX2ZvY3VzQ2VsbDMsICdwLWRpc2FibGVkJykpIHsKICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGVUb01vbnRoKGZhbHNlLCBncm91cEluZGV4KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgX2ZvY3VzQ2VsbDMudGFiSW5kZXggPSAnMCc7CgogICAgICAgICAgICAgICAgX2ZvY3VzQ2VsbDMuZm9jdXMoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZVRvTW9udGgoZmFsc2UsIGdyb3VwSW5kZXgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAvL2VudGVyCgogICAgICAgIGNhc2UgMTM6CiAgICAgICAgICB7CiAgICAgICAgICAgIHRoaXMub25EYXRlU2VsZWN0KGV2ZW50LCBkYXRlKTsKICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgLy9lc2NhcGUKCiAgICAgICAgY2FzZSAyNzoKICAgICAgICAgIHsKICAgICAgICAgICAgdGhpcy5vdmVybGF5VmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAvL3RhYgoKICAgICAgICBjYXNlIDk6CiAgICAgICAgICB7CiAgICAgICAgICAgIGlmICghdGhpcy5pbmxpbmUpIHsKICAgICAgICAgICAgICB0aGlzLnRyYXBGb2N1cyhldmVudCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgLy9ubyBvcAogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCiAgICBuYXZpZ2F0ZVRvTW9udGg6IGZ1bmN0aW9uIG5hdmlnYXRlVG9Nb250aChwcmV2LCBncm91cEluZGV4KSB7CiAgICAgIGlmIChwcmV2KSB7CiAgICAgICAgaWYgKHRoaXMubnVtYmVyT2ZNb250aHMgPT09IDEgfHwgZ3JvdXBJbmRleCA9PT0gMCkgewogICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU3RhdGUgPSB7CiAgICAgICAgICAgIGJhY2t3YXJkOiB0cnVlCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy5uYXZCYWNrd2FyZChldmVudCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBwcmV2TW9udGhDb250YWluZXIgPSB0aGlzLm92ZXJsYXkuY2hpbGRyZW5bZ3JvdXBJbmRleCAtIDFdOwogICAgICAgICAgdmFyIGNlbGxzID0gRG9tSGFuZGxlci5maW5kKHByZXZNb250aENvbnRhaW5lciwgJy5wLWRhdGVwaWNrZXItY2FsZW5kYXIgdGQgc3Bhbjpub3QoLnAtZGlzYWJsZWQpJyk7CiAgICAgICAgICB2YXIgZm9jdXNDZWxsID0gY2VsbHNbY2VsbHMubGVuZ3RoIC0gMV07CiAgICAgICAgICBmb2N1c0NlbGwudGFiSW5kZXggPSAnMCc7CiAgICAgICAgICBmb2N1c0NlbGwuZm9jdXMoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMubnVtYmVyT2ZNb250aHMgPT09IDEgfHwgZ3JvdXBJbmRleCA9PT0gdGhpcy5udW1iZXJPZk1vbnRocyAtIDEpIHsKICAgICAgICAgIHRoaXMubmF2aWdhdGlvblN0YXRlID0gewogICAgICAgICAgICBiYWNrd2FyZDogZmFsc2UKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLm5hdkZvcndhcmQoZXZlbnQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgbmV4dE1vbnRoQ29udGFpbmVyID0gdGhpcy5vdmVybGF5LmNoaWxkcmVuW2dyb3VwSW5kZXggKyAxXTsKCiAgICAgICAgICB2YXIgX2ZvY3VzQ2VsbDQgPSBEb21IYW5kbGVyLmZpbmRTaW5nbGUobmV4dE1vbnRoQ29udGFpbmVyLCAnLnAtZGF0ZXBpY2tlci1jYWxlbmRhciB0ZCBzcGFuOm5vdCgucC1kaXNhYmxlZCknKTsKCiAgICAgICAgICBfZm9jdXNDZWxsNC50YWJJbmRleCA9ICcwJzsKCiAgICAgICAgICBfZm9jdXNDZWxsNC5mb2N1cygpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIG9uTW9udGhDZWxsS2V5ZG93bjogZnVuY3Rpb24gb25Nb250aENlbGxLZXlkb3duKGV2ZW50LCBpbmRleCkgewogICAgICB2YXIgY2VsbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7CgogICAgICBzd2l0Y2ggKGV2ZW50LndoaWNoKSB7CiAgICAgICAgLy9hcnJvd3MKICAgICAgICBjYXNlIDM4OgogICAgICAgIGNhc2UgNDA6CiAgICAgICAgICB7CiAgICAgICAgICAgIGNlbGwudGFiSW5kZXggPSAnLTEnOwogICAgICAgICAgICB2YXIgY2VsbHMgPSBjZWxsLnBhcmVudEVsZW1lbnQuY2hpbGRyZW47CiAgICAgICAgICAgIHZhciBjZWxsSW5kZXggPSBEb21IYW5kbGVyLmluZGV4KGNlbGwpOwogICAgICAgICAgICB2YXIgbmV4dENlbGwgPSBjZWxsc1tldmVudC53aGljaCA9PT0gNDAgPyBjZWxsSW5kZXggKyAzIDogY2VsbEluZGV4IC0gM107CgogICAgICAgICAgICBpZiAobmV4dENlbGwpIHsKICAgICAgICAgICAgICBuZXh0Q2VsbC50YWJJbmRleCA9ICcwJzsKICAgICAgICAgICAgICBuZXh0Q2VsbC5mb2N1cygpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAvL2xlZnQgYXJyb3cKCiAgICAgICAgY2FzZSAzNzoKICAgICAgICAgIHsKICAgICAgICAgICAgY2VsbC50YWJJbmRleCA9ICctMSc7CiAgICAgICAgICAgIHZhciBwcmV2Q2VsbCA9IGNlbGwucHJldmlvdXNFbGVtZW50U2libGluZzsKCiAgICAgICAgICAgIGlmIChwcmV2Q2VsbCkgewogICAgICAgICAgICAgIHByZXZDZWxsLnRhYkluZGV4ID0gJzAnOwogICAgICAgICAgICAgIHByZXZDZWxsLmZvY3VzKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIC8vcmlnaHQgYXJyb3cKCiAgICAgICAgY2FzZSAzOToKICAgICAgICAgIHsKICAgICAgICAgICAgY2VsbC50YWJJbmRleCA9ICctMSc7CiAgICAgICAgICAgIHZhciBfbmV4dENlbGwgPSBjZWxsLm5leHRFbGVtZW50U2libGluZzsKCiAgICAgICAgICAgIGlmIChfbmV4dENlbGwpIHsKICAgICAgICAgICAgICBfbmV4dENlbGwudGFiSW5kZXggPSAnMCc7CgogICAgICAgICAgICAgIF9uZXh0Q2VsbC5mb2N1cygpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAvL2VudGVyCgogICAgICAgIGNhc2UgMTM6CiAgICAgICAgICB7CiAgICAgICAgICAgIHRoaXMub25Nb250aFNlbGVjdChldmVudCwgaW5kZXgpOwogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAvL2VzY2FwZQoKICAgICAgICBjYXNlIDI3OgogICAgICAgICAgewogICAgICAgICAgICB0aGlzLm92ZXJsYXlWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIC8vdGFiCgogICAgICAgIGNhc2UgOToKICAgICAgICAgIHsKICAgICAgICAgICAgdGhpcy50cmFwRm9jdXMoZXZlbnQpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIC8vbm8gb3AKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlRm9jdXM6IGZ1bmN0aW9uIHVwZGF0ZUZvY3VzKCkgewogICAgICB2YXIgY2VsbDsKCiAgICAgIGlmICh0aGlzLm5hdmlnYXRpb25TdGF0ZSkgewogICAgICAgIGlmICh0aGlzLm5hdmlnYXRpb25TdGF0ZS5idXR0b24pIHsKICAgICAgICAgIHRoaXMuaW5pdEZvY3VzYWJsZUNlbGwoKTsKICAgICAgICAgIGlmICh0aGlzLm5hdmlnYXRpb25TdGF0ZS5iYWNrd2FyZCkgRG9tSGFuZGxlci5maW5kU2luZ2xlKHRoaXMub3ZlcmxheSwgJy5wLWRhdGVwaWNrZXItcHJldicpLmZvY3VzKCk7ZWxzZSBEb21IYW5kbGVyLmZpbmRTaW5nbGUodGhpcy5vdmVybGF5LCAnLnAtZGF0ZXBpY2tlci1uZXh0JykuZm9jdXMoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHRoaXMubmF2aWdhdGlvblN0YXRlLmJhY2t3YXJkKSB7CiAgICAgICAgICAgIHZhciBjZWxscyA9IERvbUhhbmRsZXIuZmluZCh0aGlzLm92ZXJsYXksICcucC1kYXRlcGlja2VyLWNhbGVuZGFyIHRkIHNwYW46bm90KC5wLWRpc2FibGVkKScpOwogICAgICAgICAgICBjZWxsID0gY2VsbHNbY2VsbHMubGVuZ3RoIC0gMV07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjZWxsID0gRG9tSGFuZGxlci5maW5kU2luZ2xlKHRoaXMub3ZlcmxheSwgJy5wLWRhdGVwaWNrZXItY2FsZW5kYXIgdGQgc3Bhbjpub3QoLnAtZGlzYWJsZWQpJyk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGNlbGwpIHsKICAgICAgICAgICAgY2VsbC50YWJJbmRleCA9ICcwJzsKICAgICAgICAgICAgY2VsbC5mb2N1cygpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU3RhdGUgPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW5pdEZvY3VzYWJsZUNlbGwoKTsKICAgICAgfQogICAgfSwKICAgIGluaXRGb2N1c2FibGVDZWxsOiBmdW5jdGlvbiBpbml0Rm9jdXNhYmxlQ2VsbCgpIHsKICAgICAgdmFyIGNlbGw7CgogICAgICBpZiAodGhpcy52aWV3ID09PSAnbW9udGgnKSB7CiAgICAgICAgdmFyIGNlbGxzID0gRG9tSGFuZGxlci5maW5kKHRoaXMub3ZlcmxheSwgJy5wLW1vbnRocGlja2VyIC5wLW1vbnRocGlja2VyLW1vbnRoJyk7CiAgICAgICAgdmFyIHNlbGVjdGVkQ2VsbCA9IERvbUhhbmRsZXIuZmluZFNpbmdsZSh0aGlzLm92ZXJsYXksICcucC1tb250aHBpY2tlciAucC1tb250aHBpY2tlci1tb250aC5wLWhpZ2hsaWdodCcpOwogICAgICAgIGNlbGxzLmZvckVhY2goZnVuY3Rpb24gKGNlbGwpIHsKICAgICAgICAgIHJldHVybiBjZWxsLnRhYkluZGV4ID0gLTE7CiAgICAgICAgfSk7CiAgICAgICAgY2VsbCA9IHNlbGVjdGVkQ2VsbCB8fCBjZWxsc1swXTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjZWxsID0gRG9tSGFuZGxlci5maW5kU2luZ2xlKHRoaXMub3ZlcmxheSwgJ3NwYW4ucC1oaWdobGlnaHQnKTsKCiAgICAgICAgaWYgKCFjZWxsKSB7CiAgICAgICAgICB2YXIgdG9kYXlDZWxsID0gRG9tSGFuZGxlci5maW5kU2luZ2xlKHRoaXMub3ZlcmxheSwgJ3RkLnAtZGF0ZXBpY2tlci10b2RheSBzcGFuOm5vdCgucC1kaXNhYmxlZCknKTsKICAgICAgICAgIGlmICh0b2RheUNlbGwpIGNlbGwgPSB0b2RheUNlbGw7ZWxzZSBjZWxsID0gRG9tSGFuZGxlci5maW5kU2luZ2xlKHRoaXMub3ZlcmxheSwgJy5wLWRhdGVwaWNrZXItY2FsZW5kYXIgdGQgc3Bhbjpub3QoLnAtZGlzYWJsZWQpJyk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoY2VsbCkgewogICAgICAgIGNlbGwudGFiSW5kZXggPSAnMCc7CiAgICAgIH0KICAgIH0sCiAgICB0cmFwRm9jdXM6IGZ1bmN0aW9uIHRyYXBGb2N1cyhldmVudCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgZm9jdXNhYmxlRWxlbWVudHMgPSBEb21IYW5kbGVyLmdldEZvY3VzYWJsZUVsZW1lbnRzKHRoaXMub3ZlcmxheSk7CgogICAgICBpZiAoZm9jdXNhYmxlRWxlbWVudHMgJiYgZm9jdXNhYmxlRWxlbWVudHMubGVuZ3RoID4gMCkgewogICAgICAgIGlmICghZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkgewogICAgICAgICAgZm9jdXNhYmxlRWxlbWVudHNbMF0uZm9jdXMoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIGZvY3VzZWRJbmRleCA9IGZvY3VzYWJsZUVsZW1lbnRzLmluZGV4T2YoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7CgogICAgICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7CiAgICAgICAgICAgIGlmIChmb2N1c2VkSW5kZXggPT0gLTEgfHwgZm9jdXNlZEluZGV4ID09PSAwKSBmb2N1c2FibGVFbGVtZW50c1tmb2N1c2FibGVFbGVtZW50cy5sZW5ndGggLSAxXS5mb2N1cygpO2Vsc2UgZm9jdXNhYmxlRWxlbWVudHNbZm9jdXNlZEluZGV4IC0gMV0uZm9jdXMoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChmb2N1c2VkSW5kZXggPT0gLTEgfHwgZm9jdXNlZEluZGV4ID09PSBmb2N1c2FibGVFbGVtZW50cy5sZW5ndGggLSAxKSBmb2N1c2FibGVFbGVtZW50c1swXS5mb2N1cygpO2Vsc2UgZm9jdXNhYmxlRWxlbWVudHNbZm9jdXNlZEluZGV4ICsgMV0uZm9jdXMoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBvbkNvbnRhaW5lckJ1dHRvbktleWRvd246IGZ1bmN0aW9uIG9uQ29udGFpbmVyQnV0dG9uS2V5ZG93bihldmVudCkgewogICAgICBzd2l0Y2ggKGV2ZW50LndoaWNoKSB7CiAgICAgICAgLy90YWIKICAgICAgICBjYXNlIDk6CiAgICAgICAgICB0aGlzLnRyYXBGb2N1cyhldmVudCk7CiAgICAgICAgICBicmVhazsKICAgICAgICAvL2VzY2FwZQoKICAgICAgICBjYXNlIDI3OgogICAgICAgICAgdGhpcy5vdmVybGF5VmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgLy9Ob29wCiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSwKICAgIG9uSW5wdXQ6IGZ1bmN0aW9uIG9uSW5wdXQoZXZlbnQpIHsKICAgICAgLy8gSUUgMTEgV29ya2Fyb3VuZCBmb3IgaW5wdXQgcGxhY2Vob2xkZXIgOiBodHRwczovL2dpdGh1Yi5jb20vcHJpbWVmYWNlcy9wcmltZW5nL2lzc3Vlcy8yMDI2CiAgICAgIGlmICghdGhpcy5pc0tleWRvd24pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuaXNLZXlkb3duID0gZmFsc2U7CgogICAgICB0cnkgewogICAgICAgIHRoaXMuc2VsZWN0aW9uU3RhcnQgPSB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZWxlY3Rpb25TdGFydDsKICAgICAgICB0aGlzLnNlbGVjdGlvbkVuZCA9IHRoaXMuJHJlZnMuaW5wdXQuJGVsLnNlbGVjdGlvbkVuZDsKICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnBhcnNlVmFsdWUoZXZlbnQudGFyZ2V0LnZhbHVlKTsKCiAgICAgICAgaWYgKHRoaXMuaXNWYWxpZFNlbGVjdGlvbih2YWx1ZSkpIHsKICAgICAgICAgIHRoaXMudXBkYXRlTW9kZWwodmFsdWUpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgLy8gaW52YWxpZCBkYXRlCiAgICAgICAgdmFyIF92YWx1ZSA9IHRoaXMua2VlcEludmFsaWQgPyBldmVudC50YXJnZXQudmFsdWUgOiBudWxsOwoKICAgICAgICB0aGlzLnVwZGF0ZU1vZGVsKF92YWx1ZSk7CiAgICAgIH0KICAgIH0sCiAgICBvbkZvY3VzOiBmdW5jdGlvbiBvbkZvY3VzKCkgewogICAgICBpZiAodGhpcy5zaG93T25Gb2N1cyAmJiB0aGlzLmlzRW5hYmxlZCgpKSB7CiAgICAgICAgdGhpcy5vdmVybGF5VmlzaWJsZSA9IHRydWU7CiAgICAgIH0KCiAgICAgIHRoaXMuZm9jdXNlZCA9IHRydWU7CiAgICB9LAogICAgb25CbHVyOiBmdW5jdGlvbiBvbkJsdXIoKSB7CiAgICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlOwogICAgfSwKICAgIG9uS2V5RG93bjogZnVuY3Rpb24gb25LZXlEb3duKGV2ZW50KSB7CiAgICAgIHRoaXMuaXNLZXlkb3duID0gdHJ1ZTsKCiAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSA0MCAmJiB0aGlzLm92ZXJsYXkpIHsKICAgICAgICB0aGlzLnRyYXBGb2N1cyhldmVudCk7CiAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMjcpIHsKICAgICAgICBpZiAodGhpcy5vdmVybGF5VmlzaWJsZSkgewogICAgICAgICAgdGhpcy5vdmVybGF5VmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gOSkgewogICAgICAgIGlmICh0aGlzLm92ZXJsYXkpIHsKICAgICAgICAgIERvbUhhbmRsZXIuZ2V0Rm9jdXNhYmxlRWxlbWVudHModGhpcy5vdmVybGF5KS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICByZXR1cm4gZWwudGFiSW5kZXggPSAnLTEnOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5vdmVybGF5VmlzaWJsZSkgewogICAgICAgICAgdGhpcy5vdmVybGF5VmlzaWJsZSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIG92ZXJsYXlSZWY6IGZ1bmN0aW9uIG92ZXJsYXlSZWYoZWwpIHsKICAgICAgdGhpcy5vdmVybGF5ID0gZWw7CiAgICB9LAogICAgZ2V0TW9udGhOYW1lOiBmdW5jdGlvbiBnZXRNb250aE5hbWUoaW5kZXgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHByaW1ldnVlLmNvbmZpZy5sb2NhbGUubW9udGhOYW1lc1tpbmRleF07CiAgICB9LAogICAgb25PdmVybGF5Q2xpY2s6IGZ1bmN0aW9uIG9uT3ZlcmxheUNsaWNrKGV2ZW50KSB7CiAgICAgIGlmICghdGhpcy5pbmxpbmUpIHsKICAgICAgICBPdmVybGF5RXZlbnRCdXMuZW1pdCgnb3ZlcmxheS1jbGljaycsIHsKICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LAogICAgICAgICAgdGFyZ2V0OiB0aGlzLiRlbAogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgdmlld0RhdGU6IGZ1bmN0aW9uIHZpZXdEYXRlKCkgewogICAgICB2YXIgcHJvcFZhbHVlID0gdGhpcy5tb2RlbFZhbHVlOwoKICAgICAgaWYgKHR5cGVvZiBwcm9wVmFsdWUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCk7CiAgICAgIH0KCiAgICAgIGlmIChwcm9wVmFsdWUgJiYgQXJyYXkuaXNBcnJheShwcm9wVmFsdWUpKSB7CiAgICAgICAgcHJvcFZhbHVlID0gcHJvcFZhbHVlWzBdOwogICAgICB9CgogICAgICByZXR1cm4gcHJvcFZhbHVlIHx8IG5ldyBEYXRlKCk7CiAgICB9LAogICAgaW5wdXRGaWVsZFZhbHVlOiBmdW5jdGlvbiBpbnB1dEZpZWxkVmFsdWUoKSB7CiAgICAgIHJldHVybiB0aGlzLmtlZXBJbnZhbGlkID8gdGhpcy5tb2RlbFZhbHVlIDogdGhpcy5mb3JtYXRWYWx1ZSh0aGlzLm1vZGVsVmFsdWUpOwogICAgfSwKICAgIGNvbnRhaW5lckNsYXNzOiBmdW5jdGlvbiBjb250YWluZXJDbGFzcygpIHsKICAgICAgcmV0dXJuIFsncC1jYWxlbmRhciBwLWNvbXBvbmVudCBwLWlucHV0d3JhcHBlcicsIHRoaXMuY2xhc3MsIHsKICAgICAgICAncC1jYWxlbmRhci13LWJ0bic6IHRoaXMuc2hvd0ljb24sCiAgICAgICAgJ3AtY2FsZW5kYXItdGltZW9ubHknOiB0aGlzLnRpbWVPbmx5LAogICAgICAgICdwLWlucHV0d3JhcHBlci1maWxsZWQnOiB0aGlzLm1vZGVsVmFsdWUsCiAgICAgICAgJ3AtaW5wdXR3cmFwcGVyLWZvY3VzJzogdGhpcy5mb2N1c2VkCiAgICAgIH1dOwogICAgfSwKICAgIHBhbmVsU3R5bGVDbGFzczogZnVuY3Rpb24gcGFuZWxTdHlsZUNsYXNzKCkgewogICAgICByZXR1cm4gWydwLWRhdGVwaWNrZXIgcC1jb21wb25lbnQnLCB0aGlzLnBhbmVsQ2xhc3MsIHsKICAgICAgICAncC1kYXRlcGlja2VyLWlubGluZSc6IHRoaXMuaW5saW5lLAogICAgICAgICdwLWRpc2FibGVkJzogdGhpcy4kYXR0cnMuZGlzYWJsZWQsCiAgICAgICAgJ3AtZGF0ZXBpY2tlci10aW1lb25seSc6IHRoaXMudGltZU9ubHksCiAgICAgICAgJ3AtZGF0ZXBpY2tlci1tdWx0aXBsZS1tb250aCc6IHRoaXMubnVtYmVyT2ZNb250aHMgPiAxLAogICAgICAgICdwLWRhdGVwaWNrZXItbW9udGhwaWNrZXInOiB0aGlzLnZpZXcgPT09ICdtb250aCcsCiAgICAgICAgJ3AtZGF0ZXBpY2tlci10b3VjaC11aSc6IHRoaXMudG91Y2hVSSwKICAgICAgICAncC1pbnB1dC1maWxsZWQnOiB0aGlzLiRwcmltZXZ1ZS5jb25maWcuaW5wdXRTdHlsZSA9PT0gJ2ZpbGxlZCcsCiAgICAgICAgJ3AtcmlwcGxlLWRpc2FibGVkJzogdGhpcy4kcHJpbWV2dWUuY29uZmlnLnJpcHBsZSA9PT0gZmFsc2UKICAgICAgfV07CiAgICB9LAogICAgbW9udGhzOiBmdW5jdGlvbiBtb250aHMoKSB7CiAgICAgIHZhciBtb250aHMgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5udW1iZXJPZk1vbnRoczsgaSsrKSB7CiAgICAgICAgdmFyIG1vbnRoID0gdGhpcy5jdXJyZW50TW9udGggKyBpOwogICAgICAgIHZhciB5ZWFyID0gdGhpcy5jdXJyZW50WWVhcjsKCiAgICAgICAgaWYgKG1vbnRoID4gMTEpIHsKICAgICAgICAgIG1vbnRoID0gbW9udGggJSAxMSAtIDE7CiAgICAgICAgICB5ZWFyID0geWVhciArIDE7CiAgICAgICAgfQoKICAgICAgICB2YXIgZGF0ZXMgPSBbXTsKICAgICAgICB2YXIgZmlyc3REYXkgPSB0aGlzLmdldEZpcnN0RGF5T2ZNb250aEluZGV4KG1vbnRoLCB5ZWFyKTsKICAgICAgICB2YXIgZGF5c0xlbmd0aCA9IHRoaXMuZ2V0RGF5c0NvdW50SW5Nb250aChtb250aCwgeWVhcik7CiAgICAgICAgdmFyIHByZXZNb250aERheXNMZW5ndGggPSB0aGlzLmdldERheXNDb3VudEluUHJldk1vbnRoKG1vbnRoLCB5ZWFyKTsKICAgICAgICB2YXIgZGF5Tm8gPSAxOwogICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7CiAgICAgICAgdmFyIHdlZWtOdW1iZXJzID0gW107CiAgICAgICAgdmFyIG1vbnRoUm93cyA9IE1hdGguY2VpbCgoZGF5c0xlbmd0aCArIGZpcnN0RGF5KSAvIDcpOwoKICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCBtb250aFJvd3M7IF9pMisrKSB7CiAgICAgICAgICB2YXIgd2VlayA9IFtdOwoKICAgICAgICAgIGlmIChfaTIgPT0gMCkgewogICAgICAgICAgICBmb3IgKHZhciBqID0gcHJldk1vbnRoRGF5c0xlbmd0aCAtIGZpcnN0RGF5ICsgMTsgaiA8PSBwcmV2TW9udGhEYXlzTGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICB2YXIgcHJldiA9IHRoaXMuZ2V0UHJldmlvdXNNb250aEFuZFllYXIobW9udGgsIHllYXIpOwogICAgICAgICAgICAgIHdlZWsucHVzaCh7CiAgICAgICAgICAgICAgICBkYXk6IGosCiAgICAgICAgICAgICAgICBtb250aDogcHJldi5tb250aCwKICAgICAgICAgICAgICAgIHllYXI6IHByZXYueWVhciwKICAgICAgICAgICAgICAgIG90aGVyTW9udGg6IHRydWUsCiAgICAgICAgICAgICAgICB0b2RheTogdGhpcy5pc1RvZGF5KHRvZGF5LCBqLCBwcmV2Lm1vbnRoLCBwcmV2LnllYXIpLAogICAgICAgICAgICAgICAgc2VsZWN0YWJsZTogdGhpcy5pc1NlbGVjdGFibGUoaiwgcHJldi5tb250aCwgcHJldi55ZWFyLCB0cnVlKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgcmVtYWluaW5nRGF5c0xlbmd0aCA9IDcgLSB3ZWVrLmxlbmd0aDsKCiAgICAgICAgICAgIGZvciAodmFyIF9qID0gMDsgX2ogPCByZW1haW5pbmdEYXlzTGVuZ3RoOyBfaisrKSB7CiAgICAgICAgICAgICAgd2Vlay5wdXNoKHsKICAgICAgICAgICAgICAgIGRheTogZGF5Tm8sCiAgICAgICAgICAgICAgICBtb250aDogbW9udGgsCiAgICAgICAgICAgICAgICB5ZWFyOiB5ZWFyLAogICAgICAgICAgICAgICAgdG9kYXk6IHRoaXMuaXNUb2RheSh0b2RheSwgZGF5Tm8sIG1vbnRoLCB5ZWFyKSwKICAgICAgICAgICAgICAgIHNlbGVjdGFibGU6IHRoaXMuaXNTZWxlY3RhYmxlKGRheU5vLCBtb250aCwgeWVhciwgZmFsc2UpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgZGF5Tm8rKzsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yICh2YXIgX2oyID0gMDsgX2oyIDwgNzsgX2oyKyspIHsKICAgICAgICAgICAgICBpZiAoZGF5Tm8gPiBkYXlzTGVuZ3RoKSB7CiAgICAgICAgICAgICAgICB2YXIgbmV4dCA9IHRoaXMuZ2V0TmV4dE1vbnRoQW5kWWVhcihtb250aCwgeWVhcik7CiAgICAgICAgICAgICAgICB3ZWVrLnB1c2goewogICAgICAgICAgICAgICAgICBkYXk6IGRheU5vIC0gZGF5c0xlbmd0aCwKICAgICAgICAgICAgICAgICAgbW9udGg6IG5leHQubW9udGgsCiAgICAgICAgICAgICAgICAgIHllYXI6IG5leHQueWVhciwKICAgICAgICAgICAgICAgICAgb3RoZXJNb250aDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgdG9kYXk6IHRoaXMuaXNUb2RheSh0b2RheSwgZGF5Tm8gLSBkYXlzTGVuZ3RoLCBuZXh0Lm1vbnRoLCBuZXh0LnllYXIpLAogICAgICAgICAgICAgICAgICBzZWxlY3RhYmxlOiB0aGlzLmlzU2VsZWN0YWJsZShkYXlObyAtIGRheXNMZW5ndGgsIG5leHQubW9udGgsIG5leHQueWVhciwgdHJ1ZSkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB3ZWVrLnB1c2goewogICAgICAgICAgICAgICAgICBkYXk6IGRheU5vLAogICAgICAgICAgICAgICAgICBtb250aDogbW9udGgsCiAgICAgICAgICAgICAgICAgIHllYXI6IHllYXIsCiAgICAgICAgICAgICAgICAgIHRvZGF5OiB0aGlzLmlzVG9kYXkodG9kYXksIGRheU5vLCBtb250aCwgeWVhciksCiAgICAgICAgICAgICAgICAgIHNlbGVjdGFibGU6IHRoaXMuaXNTZWxlY3RhYmxlKGRheU5vLCBtb250aCwgeWVhciwgZmFsc2UpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGRheU5vKys7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodGhpcy5zaG93V2VlaykgewogICAgICAgICAgICB3ZWVrTnVtYmVycy5wdXNoKHRoaXMuZ2V0V2Vla051bWJlcihuZXcgRGF0ZSh3ZWVrWzBdLnllYXIsIHdlZWtbMF0ubW9udGgsIHdlZWtbMF0uZGF5KSkpOwogICAgICAgICAgfQoKICAgICAgICAgIGRhdGVzLnB1c2god2Vlayk7CiAgICAgICAgfQoKICAgICAgICBtb250aHMucHVzaCh7CiAgICAgICAgICBtb250aDogbW9udGgsCiAgICAgICAgICB5ZWFyOiB5ZWFyLAogICAgICAgICAgZGF0ZXM6IGRhdGVzLAogICAgICAgICAgd2Vla051bWJlcnM6IHdlZWtOdW1iZXJzCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBtb250aHM7CiAgICB9LAogICAgd2Vla0RheXM6IGZ1bmN0aW9uIHdlZWtEYXlzKCkgewogICAgICB2YXIgd2Vla0RheXMgPSBbXTsKICAgICAgdmFyIGRheUluZGV4ID0gdGhpcy4kcHJpbWV2dWUuY29uZmlnLmxvY2FsZS5maXJzdERheU9mV2VlazsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNzsgaSsrKSB7CiAgICAgICAgd2Vla0RheXMucHVzaCh0aGlzLiRwcmltZXZ1ZS5jb25maWcubG9jYWxlLmRheU5hbWVzTWluW2RheUluZGV4XSk7CiAgICAgICAgZGF5SW5kZXggPSBkYXlJbmRleCA9PSA2ID8gMCA6ICsrZGF5SW5kZXg7CiAgICAgIH0KCiAgICAgIHJldHVybiB3ZWVrRGF5czsKICAgIH0sCiAgICB0aWNrc1RvMTk3MDogZnVuY3Rpb24gdGlja3NUbzE5NzAoKSB7CiAgICAgIHJldHVybiAoKDE5NzAgLSAxKSAqIDM2NSArIE1hdGguZmxvb3IoMTk3MCAvIDQpIC0gTWF0aC5mbG9vcigxOTcwIC8gMTAwKSArIE1hdGguZmxvb3IoMTk3MCAvIDQwMCkpICogMjQgKiA2MCAqIDYwICogMTAwMDAwMDA7CiAgICB9LAogICAgc3VuZGF5SW5kZXg6IGZ1bmN0aW9uIHN1bmRheUluZGV4KCkgewogICAgICByZXR1cm4gdGhpcy4kcHJpbWV2dWUuY29uZmlnLmxvY2FsZS5maXJzdERheU9mV2VlayA+IDAgPyA3IC0gdGhpcy4kcHJpbWV2dWUuY29uZmlnLmxvY2FsZS5maXJzdERheU9mV2VlayA6IDA7CiAgICB9LAogICAgZGF0ZVBhdHRlcm46IGZ1bmN0aW9uIGRhdGVQYXR0ZXJuKCkgewogICAgICByZXR1cm4gdGhpcy5kYXRlRm9ybWF0IHx8IHRoaXMuJHByaW1ldnVlLmNvbmZpZy5sb2NhbGUuZGF0ZUZvcm1hdDsKICAgIH0sCiAgICB5ZWFyT3B0aW9uczogZnVuY3Rpb24geWVhck9wdGlvbnMoKSB7CiAgICAgIGlmICh0aGlzLnllYXJSYW5nZSkgewogICAgICAgIHZhciAkdm0gPSB0aGlzOwogICAgICAgIHZhciB5ZWFycyA9IHRoaXMueWVhclJhbmdlLnNwbGl0KCc6Jyk7CiAgICAgICAgdmFyIHllYXJTdGFydCA9IHBhcnNlSW50KHllYXJzWzBdKTsKICAgICAgICB2YXIgeWVhckVuZCA9IHBhcnNlSW50KHllYXJzWzFdKTsKICAgICAgICB2YXIgeWVhck9wdGlvbnMgPSBbXTsKCiAgICAgICAgaWYgKHRoaXMuY3VycmVudFllYXIgPCB5ZWFyU3RhcnQpIHsKICAgICAgICAgICR2bS5jdXJyZW50WWVhciA9IHllYXJFbmQ7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnRZZWFyID4geWVhckVuZCkgewogICAgICAgICAgJHZtLmN1cnJlbnRZZWFyID0geWVhclN0YXJ0OwogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgaSA9IHllYXJTdGFydDsgaSA8PSB5ZWFyRW5kOyBpKyspIHsKICAgICAgICAgIHllYXJPcHRpb25zLnB1c2goaSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4geWVhck9wdGlvbnM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0sCiAgICBtb250aFBpY2tlclZhbHVlczogZnVuY3Rpb24gbW9udGhQaWNrZXJWYWx1ZXMoKSB7CiAgICAgIHZhciBtb250aFBpY2tlclZhbHVlcyA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gMTE7IGkrKykgewogICAgICAgIG1vbnRoUGlja2VyVmFsdWVzLnB1c2godGhpcy4kcHJpbWV2dWUuY29uZmlnLmxvY2FsZS5tb250aE5hbWVzU2hvcnRbaV0pOwogICAgICB9CgogICAgICByZXR1cm4gbW9udGhQaWNrZXJWYWx1ZXM7CiAgICB9LAogICAgZm9ybWF0dGVkQ3VycmVudEhvdXI6IGZ1bmN0aW9uIGZvcm1hdHRlZEN1cnJlbnRIb3VyKCkgewogICAgICByZXR1cm4gdGhpcy5jdXJyZW50SG91ciA8IDEwID8gJzAnICsgdGhpcy5jdXJyZW50SG91ciA6IHRoaXMuY3VycmVudEhvdXI7CiAgICB9LAogICAgZm9ybWF0dGVkQ3VycmVudE1pbnV0ZTogZnVuY3Rpb24gZm9ybWF0dGVkQ3VycmVudE1pbnV0ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudE1pbnV0ZSA8IDEwID8gJzAnICsgdGhpcy5jdXJyZW50TWludXRlIDogdGhpcy5jdXJyZW50TWludXRlOwogICAgfSwKICAgIGZvcm1hdHRlZEN1cnJlbnRTZWNvbmQ6IGZ1bmN0aW9uIGZvcm1hdHRlZEN1cnJlbnRTZWNvbmQoKSB7CiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTZWNvbmQgPCAxMCA/ICcwJyArIHRoaXMuY3VycmVudFNlY29uZCA6IHRoaXMuY3VycmVudFNlY29uZDsKICAgIH0sCiAgICB0b2RheUxhYmVsOiBmdW5jdGlvbiB0b2RheUxhYmVsKCkgewogICAgICByZXR1cm4gdGhpcy4kcHJpbWV2dWUuY29uZmlnLmxvY2FsZS50b2RheTsKICAgIH0sCiAgICBjbGVhckxhYmVsOiBmdW5jdGlvbiBjbGVhckxhYmVsKCkgewogICAgICByZXR1cm4gdGhpcy4kcHJpbWV2dWUuY29uZmlnLmxvY2FsZS5jbGVhcjsKICAgIH0sCiAgICB3ZWVrSGVhZGVyTGFiZWw6IGZ1bmN0aW9uIHdlZWtIZWFkZXJMYWJlbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHByaW1ldnVlLmNvbmZpZy5sb2NhbGUud2Vla0hlYWRlcjsKICAgIH0sCiAgICBtb250aE5hbWVzOiBmdW5jdGlvbiBtb250aE5hbWVzKCkgewogICAgICByZXR1cm4gdGhpcy4kcHJpbWV2dWUuY29uZmlnLmxvY2FsZS5tb250aE5hbWVzOwogICAgfSwKICAgIGFwcGVuZERpc2FibGVkOiBmdW5jdGlvbiBhcHBlbmREaXNhYmxlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXBwZW5kVG8gPT09ICdzZWxmJyB8fCB0aGlzLmlubGluZTsKICAgIH0sCiAgICBhcHBlbmRUYXJnZXQ6IGZ1bmN0aW9uIGFwcGVuZFRhcmdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXBwZW5kRGlzYWJsZWQgPyBudWxsIDogdGhpcy5hcHBlbmRUbzsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgICdDYWxlbmRhcklucHV0VGV4dCc6IElucHV0VGV4dCwKICAgICdDYWxlbmRhckJ1dHRvbic6IEJ1dHRvbgogIH0sCiAgZGlyZWN0aXZlczogewogICAgJ3JpcHBsZSc6IFJpcHBsZQogIH0KfTs="},{"version":3,"sources":["/Users/crocslut/Desktop/Git/main-cleanaway-pwa/src/components/calendar/Calendar.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <span ref=\"container\" :class=\"containerClass\" :style=\"style\">\n        <CalendarInputText ref=\"input\" v-if=\"!inline\" type=\"text\" v-bind=\"$attrs\" :value=\"inputFieldValue\" @input=\"onInput\" @focus=\"onFocus\" @blur=\"onBlur\" @keydown=\"onKeyDown\" :readonly=\"!manualInput\" inputmode=\"none\"\n            :class=\"inputClass\" :style=\"inputStyle\" />\n        <CalendarButton v-if=\"showIcon\" :icon=\"icon\" tabindex=\"-1\" class=\"p-datepicker-trigger\" :disabled=\"$attrs.disabled\" @click=\"onButtonClick\" type=\"button\" :aria-label=\"inputFieldValue\"/>\n        <Teleport :to=\"appendTarget\" :disabled=\"appendDisabled\">\n            <transition name=\"p-connected-overlay\" @enter=\"onOverlayEnter($event)\" @after-enter=\"onOverlayEnterComplete\" @after-leave=\"onOverlayAfterLeave\" @leave=\"onOverlayLeave\">\n                <div :ref=\"overlayRef\" :class=\"panelStyleClass\" v-if=\"inline ? true : overlayVisible\" :role=\"inline ? null : 'dialog'\" @click=\"onOverlayClick\">\n                    <template v-if=\"!timeOnly\">\n                        <div class=\"p-datepicker-group-container\">\n                            <div class=\"p-datepicker-group\" v-for=\"(month,groupIndex) of months\" :key=\"month.month + month.year\">\n                                <div class=\"p-datepicker-header\">\n                                    <slot name=\"header\"></slot>\n                                    <button class=\"p-datepicker-prev p-link\" v-if=\"groupIndex === 0\" @click=\"onPrevButtonClick\" type=\"button\" @keydown=\"onContainerButtonKeydown\" v-ripple :disabled=\"$attrs.disabled\">\n                                        <span class=\"p-datepicker-prev-icon pi pi-chevron-left\"></span>\n                                    </button>\n                                    <div class=\"p-datepicker-title\">\n                                        <span class=\"p-datepicker-month\" v-if=\"!monthNavigator && (view !== 'month')\">{{getMonthName(month.month)}}</span>\n                                        <select class=\"p-datepicker-month\" v-if=\"monthNavigator && (view !== 'month') && numberOfMonths === 1\" @change=\"onMonthDropdownChange($event.target.value)\">\n                                            <option :value=\"index\" v-for=\"(monthName, index) of monthNames\" :key=\"monthName\" :selected=\"index === month.month\">{{monthName}}</option>\n                                        </select>\n                                        <span class=\"p-datepicker-year\" v-if=\"!yearNavigator\">{{view === 'month' ? currentYear : month.year}}</span>\n                                        <select class=\"p-datepicker-year\" v-if=\"yearNavigator && numberOfMonths === 1\" @change=\"onYearDropdownChange($event.target.value)\">\n                                            <option :value=\"year\" v-for=\"year of yearOptions\" :key=\"year\" :selected=\"year === currentYear\">{{year}}</option>\n                                        </select>\n                                    </div>\n                                    <button class=\"p-datepicker-next p-link\" v-if=\"numberOfMonths === 1 ? true : (groupIndex === numberOfMonths - 1)\"\n                                        @click=\"onNextButtonClick\" type=\"button\" @keydown=\"onContainerButtonKeydown\" v-ripple :disabled=\"$attrs.disabled\">\n                                        <span class=\"p-datepicker-next-icon pi pi-chevron-right\"></span>\n                                    </button>\n                                </div>\n                                <div class=\"p-datepicker-calendar-container\" v-if=\"view ==='date'\">\n                                    <table class=\"p-datepicker-calendar\">\n                                        <thead>\n                                            <tr>\n                                                <th scope=\"col\" v-if=\"showWeek\" class=\"p-datepicker-weekheader p-disabled\">\n                                                    <span>{{weekHeaderLabel}}</span>\n                                                </th>\n                                                <th scope=\"col\" v-for=\"weekDay of weekDays\" :key=\"weekDay\">\n                                                    <span>{{weekDay}}</span>\n                                                </th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            <tr v-for=\"(week,i) of month.dates\" :key=\"week[0].day + '' + week[0].month\">\n                                                <td v-if=\"showWeek\" class=\"p-datepicker-weeknumber\">\n                                                    <span class=\"p-disabled\">\n                                                        <span style=\"visibility:hidden\" v-if=\"month.weekNumbers[i] < 10\">0</span>\n                                                        {{month.weekNumbers[i]}}\n                                                    </span>\n                                                </td>\n                                                <td v-for=\"date of week\" :key=\"date.day + '' + date.month\" :class=\"{'p-datepicker-other-month': date.otherMonth, 'p-datepicker-today': date.today}\">\n                                                    <span :class=\"{'p-highlight': isSelected(date), 'p-disabled': !date.selectable}\" @click=\"onDateSelect($event, date)\"\n                                                        draggable=\"false\" @keydown=\"onDateCellKeydown($event,date,groupIndex)\" v-ripple>\n                                                        <slot name=\"date\" :date=\"date\">{{date.day}}</slot>\n                                                    </span>\n                                                </td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"p-monthpicker\" v-if=\"view === 'month'\">\n                            <span v-for=\"(m,i) of monthPickerValues\" :key=\"m\" @click=\"onMonthSelect($event, i)\" @keydown=\"onMonthCellKeydown($event,i)\"\n                                    class=\"p-monthpicker-month\" :class=\"{'p-highlight': isMonthSelected(i)}\" v-ripple>\n                                {{m}}\n                            </span>\n                        </div>\n                    </template>\n                    <div class=\"p-timepicker\" v-if=\"showTime||timeOnly\">\n                        <div class=\"p-hour-picker\">\n                            <button class=\"p-link\" @mousedown=\"onTimePickerElementMouseDown($event, 0, 1)\" @mouseup=\"onTimePickerElementMouseUp($event)\" @keydown=\"onContainerButtonKeydown\" v-ripple\n                                @mouseleave=\"onTimePickerElementMouseLeave()\" @keydown.enter=\"onTimePickerElementMouseDown($event, 0, 1)\" @keyup.enter=\"onTimePickerElementMouseUp($event)\" type=\"button\">\n                                <span class=\"pi pi-chevron-up\"></span>\n                            </button>\n                            <span>{{formattedCurrentHour}}</span>\n                            <button class=\"p-link\" @mousedown=\"onTimePickerElementMouseDown($event, 0, -1)\" @mouseup=\"onTimePickerElementMouseUp($event)\" @keydown=\"onContainerButtonKeydown\" v-ripple\n                                @mouseleave=\"onTimePickerElementMouseLeave()\" @keydown.enter=\"onTimePickerElementMouseDown($event, 0, -1)\" @keyup.enter=\"onTimePickerElementMouseUp($event)\" type=\"button\">\n                                <span class=\"pi pi-chevron-down\"></span>\n                            </button>\n                        </div>\n                        <div class=\"p-separator\">\n                            <span>{{timeSeparator}}</span>\n                        </div>\n                        <div class=\"p-minute-picker\">\n                            <button class=\"p-link\" @mousedown=\"onTimePickerElementMouseDown($event, 1, 1)\" @mouseup=\"onTimePickerElementMouseUp($event)\" @keydown=\"onContainerButtonKeydown\" v-ripple :disabled=\"$attrs.disabled\"\n                                @mouseleave=\"onTimePickerElementMouseLeave()\" @keydown.enter=\"onTimePickerElementMouseDown($event, 1, 1)\" @keyup.enter=\"onTimePickerElementMouseUp($event)\" type=\"button\">\n                                <span class=\"pi pi-chevron-up\"></span>\n                            </button>\n                        <span>{{formattedCurrentMinute}}</span>\n                            <button class=\"p-link\" @mousedown=\"onTimePickerElementMouseDown($event, 1, -1)\" @mouseup=\"onTimePickerElementMouseUp($event)\" @keydown=\"onContainerButtonKeydown\" v-ripple :disabled=\"$attrs.disabled\"\n                                @mouseleave=\"onTimePickerElementMouseLeave()\" @keydown.enter=\"onTimePickerElementMouseDown($event, 1, -1)\" @keyup.enter=\"onTimePickerElementMouseUp($event)\" type=\"button\">\n                                <span class=\"pi pi-chevron-down\"></span>\n                            </button>\n                        </div>\n                        <div class=\"p-separator\" v-if=\"showSeconds\">\n                            <span>{{timeSeparator}}</span>\n                        </div>\n                        <div class=\"p-second-picker\" v-if=\"showSeconds\">\n                            <button class=\"p-link\" @mousedown=\"onTimePickerElementMouseDown($event, 2, 1)\" @mouseup=\"onTimePickerElementMouseUp($event)\" @keydown=\"onContainerButtonKeydown\" v-ripple  :disabled=\"$attrs.disabled\"\n                                @mouseleave=\"onTimePickerElementMouseLeave()\" @keydown.enter=\"onTimePickerElementMouseDown($event, 2, 1)\" @keyup.enter=\"onTimePickerElementMouseUp($event)\" type=\"button\">\n                                <span class=\"pi pi-chevron-up\"></span>\n                            </button>\n                            <span>{{formattedCurrentSecond}}</span>\n                            <button class=\"p-link\" @mousedown=\"onTimePickerElementMouseDown($event, 2, -1)\" @mouseup=\"onTimePickerElementMouseUp($event)\" @keydown=\"onContainerButtonKeydown\" v-ripple  :disabled=\"$attrs.disabled\"\n                                @mouseleave=\"onTimePickerElementMouseLeave()\" @keydown.enter=\"onTimePickerElementMouseDown($event, 2, -1)\" @keyup.enter=\"onTimePickerElementMouseUp($event)\" type=\"button\">\n                                <span class=\"pi pi-chevron-down\"></span>\n                            </button>\n                        </div>\n                        <div class=\"p-separator\" v-if=\"hourFormat=='12'\">\n                            <span>{{timeSeparator}}</span>\n                        </div>\n                        <div class=\"p-ampm-picker\" v-if=\"hourFormat=='12'\">\n                            <button class=\"p-link\" @click=\"toggleAMPM($event)\" type=\"button\" v-ripple :disabled=\"$attrs.disabled\">\n                                <span class=\"pi pi-chevron-up\"></span>\n                            </button>\n                            <span>{{pm ? 'PM' : 'AM'}}</span>\n                            <button class=\"p-link\" @click=\"toggleAMPM($event)\" type=\"button\" v-ripple :disabled=\"$attrs.disabled\">\n                                <span class=\"pi pi-chevron-down\"></span>\n                            </button>\n                        </div>\n                    </div>\n                    <div class=\"p-datepicker-buttonbar\" v-if=\"showButtonBar\">\n                        <CalendarButton type=\"button\" :label=\"todayLabel\" @click=\"onTodayButtonClick($event)\" class=\"p-button-text\" @keydown=\"onContainerButtonKeydown\"/>\n                        <CalendarButton type=\"button\" :label=\"clearLabel\" @click=\"onClearButtonClick($event)\" class=\"p-button-text\" @keydown=\"onContainerButtonKeydown\"/>\n                    </div>\n                    <slot name=\"footer\"></slot>\n                </div>\n            </transition>\n        </Teleport>\n    </span>\n</template>\n\n<script>\nimport {ConnectedOverlayScrollHandler,DomHandler,ZIndexUtils} from 'primevue/utils';\nimport OverlayEventBus from 'primevue/overlayeventbus';\nimport InputText from 'primevue/inputtext';\nimport Button from 'primevue/button';\nimport Ripple from 'primevue/ripple';\n\nexport default {\n    name: 'Calendar',\n    inheritAttrs: false,\n    emits: ['show', 'hide', 'month-change', 'year-change', 'date-select', 'update:modelValue', 'today-click', 'clear-click'],\n    props: {\n        modelValue: null,\n        selectionMode: {\n            type: String,\n            default: 'single'\n        },\n        dateFormat: {\n            type: String,\n            default: null\n        },\n        inline: {\n            type: Boolean,\n            default: false\n        },\n        showOtherMonths: {\n            type: Boolean,\n            default: true\n        },\n        selectOtherMonths: {\n            type: Boolean,\n            default: false\n        },\n        showIcon: {\n            type: Boolean,\n            default: false\n        },\n        icon: {\n            type: String,\n            default: 'pi pi-calendar'\n        },\n        numberOfMonths: {\n            type: Number,\n            default: 1\n        },\n        view: {\n            type: String,\n            default: 'date'\n        },\n        touchUI: {\n            type: Boolean,\n            default: false\n        },\n        monthNavigator: {\n            type: Boolean,\n            default: false\n        },\n        yearNavigator: {\n            type: Boolean,\n            default: false\n        },\n        yearRange: {\n            type: String,\n            default: null\n        },\n        panelClass: {\n            type: String,\n            default: null\n        },\n        minDate: {\n            type: Date,\n            value: null\n        },\n        maxDate: {\n            type: Date,\n            value: null\n        },\n        disabledDates: {\n            type: Array,\n            value: null\n        },\n        disabledDays: {\n            type: Array,\n            value: null\n        },\n        maxDateCount: {\n            type: Number,\n            value: null\n        },\n        showOnFocus: {\n            type: Boolean,\n            default: true\n        },\n        autoZIndex: {\n            type: Boolean,\n            default: true\n        },\n        baseZIndex: {\n            type: Number,\n            default: 0\n        },\n        showButtonBar: {\n            type: Boolean,\n            default: false\n        },\n        shortYearCutoff: {\n            type: String,\n            default: '+10'\n        },\n        showTime: {\n            type: Boolean,\n            default: false\n        },\n        timeOnly: {\n            type: Boolean,\n            default: false\n        },\n        hourFormat: {\n            type: String,\n            default: '24'\n        },\n        stepHour: {\n            type: Number,\n            default: 1\n        },\n        stepMinute: {\n            type: Number,\n            default: 1\n        },\n        stepSecond: {\n            type: Number,\n            default: 1\n        },\n        showSeconds: {\n            type: Boolean,\n            default: false\n        },\n        hideOnDateTimeSelect: {\n            type: Boolean,\n            default: false\n        },\n        timeSeparator: {\n            type: String,\n            default: ':'\n        },\n        showWeek: {\n            type: Boolean,\n            default: false\n        },\n        manualInput: {\n            type: Boolean,\n            default: true\n        },\n        appendTo: {\n            type: String,\n            default: 'body'\n        },\n        keepInvalid: {\n            type: Boolean,\n            default: false\n        },\n        inputClass: null,\n        inputStyle: null,\n        class: null,\n        style: null\n    },\n    navigationState: null,\n    scrollHandler: null,\n    outsideClickListener: null,\n    maskClickListener: null,\n    resizeListener: null,\n    overlay: null,\n    mask: null,\n    timePickerTimer: null,\n    isKeydown: false,\n    created() {\n        this.updateCurrentMetaData();\n    },\n    mounted() {\n        if (this.inline && !this.$attrs.disabled) {\n            this.initFocusableCell();\n        }\n    },\n    updated() {\n        if (this.overlay) {\n            this.updateFocus();\n        }\n\n        if (this.$refs.input && this.selectionStart != null && this.selectionEnd != null) {\n            this.$refs.input.$el.selectionStart = this.selectionStart;\n            this.$refs.input.$el.selectionEnd = this.selectionEnd;\n            this.selectionStart = null;\n            this.selectionEnd = null;\n        }\n    },\n    beforeUnmount() {\n        if (this.timePickerTimer) {\n            clearTimeout(this.timePickerTimer);\n        }\n\n        if (this.mask) {\n            this.destroyMask();\n        }\n\n        this.unbindOutsideClickListener();\n        this.unbindResizeListener();\n\n        if (this.scrollHandler) {\n            this.scrollHandler.destroy();\n            this.scrollHandler = null;\n        }\n\n        if (this.overlay && this.autoZIndex) {\n            ZIndexUtils.clear(this.overlay);\n        }\n        this.overlay = null;\n    },\n    data() {\n        return {\n            currentMonth: null,\n            currentYear: null,\n            currentHour: null,\n            currentMinute: null,\n            currentSecond: null,\n            pm: null,\n\t\t\tfocused: false,\n            overlayVisible: false\n        }\n    },\n    watch: {\n        modelValue() {\n            this.updateCurrentMetaData();\n        },\n        showTime() {\n            this.updateCurrentMetaData();\n        },\n        months() {\n            if (this.overlay) {\n                setTimeout(this.updateFocus, 0);\n            }\n        }\n    },\n    methods: {\n        isComparable() {\n            return this.modelValue != null && typeof this.modelValue !== 'string';\n        },\n        isSelected(dateMeta) {\n            if (!this.isComparable()) {\n                return false;\n            }\n\n            if (this.modelValue) {\n                if (this.isSingleSelection()) {\n                    return this.isDateEquals(this.modelValue, dateMeta);\n                }\n                else if (this.isMultipleSelection()) {\n                    let selected = false;\n                    for (let date of this.modelValue) {\n                        selected = this.isDateEquals(date, dateMeta);\n                        if (selected) {\n                            break;\n                        }\n                    }\n\n                    return selected;\n                }\n                else if( this.isRangeSelection()) {\n                    if (this.modelValue[1])\n                        return this.isDateEquals(this.modelValue[0], dateMeta) || this.isDateEquals(this.modelValue[1], dateMeta) || this.isDateBetween(this.modelValue[0], this.modelValue[1], dateMeta);\n                    else {\n                        return this.isDateEquals(this.modelValue[0], dateMeta);\n                    }\n\n                }\n            }\n\n            return false;\n        },\n        isMonthSelected(month) {\n            return this.isComparable() ? (this.modelValue.getMonth() === month && this.modelValue.getFullYear() === this.currentYear) : false;\n        },\n        isDateEquals(value, dateMeta) {\n            if (value)\n                return value.getDate() === dateMeta.day && value.getMonth() === dateMeta.month && value.getFullYear() === dateMeta.year;\n            else\n                return false;\n        },\n        isDateBetween(start, end, dateMeta) {\n            let between = false;\n            if (start && end) {\n                let date = new Date(dateMeta.year, dateMeta.month, dateMeta.day);\n                return start.getTime() <= date.getTime() && end.getTime() >= date.getTime();\n            }\n\n            return between;\n        },\n        getFirstDayOfMonthIndex(month, year) {\n            let day = new Date();\n            day.setDate(1);\n            day.setMonth(month);\n            day.setFullYear(year);\n\n            let dayIndex = day.getDay() + this.sundayIndex;\n            return dayIndex >= 7 ? dayIndex - 7 : dayIndex;\n        },\n        getDaysCountInMonth(month, year) {\n            return 32 - this.daylightSavingAdjust(new Date(year, month, 32)).getDate();\n        },\n        getDaysCountInPrevMonth(month, year) {\n            let prev = this.getPreviousMonthAndYear(month, year);\n            return this.getDaysCountInMonth(prev.month, prev.year);\n        },\n        getPreviousMonthAndYear(month, year) {\n            let m, y;\n\n            if (month === 0) {\n                m = 11;\n                y = year - 1;\n            }\n            else {\n                m = month - 1;\n                y = year;\n            }\n\n            return {'month':m, 'year': y};\n        },\n        getNextMonthAndYear(month, year) {\n            let m, y;\n\n            if (month === 11) {\n                m = 0;\n                y = year + 1;\n            }\n            else {\n                m = month + 1;\n                y = year;\n            }\n\n            return {'month':m,'year':y};\n        },\n        daylightSavingAdjust(date) {\n            if (!date) {\n                return null;\n            }\n\n            date.setHours(date.getHours() > 12 ? date.getHours() + 2 : 0);\n\n            return date;\n        },\n        isToday(today, day, month, year) {\n            return today.getDate() === day && today.getMonth() === month && today.getFullYear() === year;\n        },\n        isSelectable(day, month, year, otherMonth) {\n            let validMin = true;\n            let validMax = true;\n            let validDate = true;\n            let validDay = true;\n\n            if (otherMonth && !this.selectOtherMonths) {\n                return false;\n            }\n\n            if (this.minDate) {\n                if (this.minDate.getFullYear() > year) {\n                    validMin = false;\n                }\n                else if (this.minDate.getFullYear() === year) {\n                    if (this.minDate.getMonth() > month) {\n                        validMin = false;\n                    }\n                    else if (this.minDate.getMonth() === month) {\n                        if (this.minDate.getDate() > day) {\n                            validMin = false;\n                        }\n                    }\n                }\n            }\n\n            if (this.maxDate) {\n                if (this.maxDate.getFullYear() < year) {\n                    validMax = false;\n                }\n                else if (this.maxDate.getFullYear() === year) {\n                    if (this.maxDate.getMonth() < month) {\n                        validMax = false;\n                    }\n                    else if (this.maxDate.getMonth() === month) {\n                        if (this.maxDate.getDate() < day) {\n                            validMax = false;\n                        }\n                    }\n                }\n            }\n\n            if (this.disabledDates) {\n                validDate = !this.isDateDisabled(day,month,year);\n            }\n\n            if (this.disabledDays) {\n                validDay = !this.isDayDisabled(day,month,year)\n            }\n\n            return validMin && validMax && validDate && validDay;\n        },\n        onOverlayEnter(el) {\n            if (this.autoZIndex) {\n                if (this.touchUI)\n                    ZIndexUtils.set('modal', el, this.baseZIndex || this.$primevue.config.zIndex.modal);\n                else\n                    ZIndexUtils.set('overlay', el, this.baseZIndex || this.$primevue.config.zIndex.overlay);\n            }\n            this.alignOverlay();\n            this.$emit('show');\n        },\n        onOverlayEnterComplete() {\n            this.bindOutsideClickListener();\n            this.bindScrollListener();\n            this.bindResizeListener();\n        },\n        onOverlayAfterLeave(el) {\n            if (this.autoZIndex) {\n                ZIndexUtils.clear(el);\n            }\n        },\n        onOverlayLeave() {\n            this.unbindOutsideClickListener();\n            this.unbindScrollListener();\n            this.unbindResizeListener();\n            this.$emit('hide');\n\n            if (this.mask) {\n                this.disableModality();\n            }\n\n            this.overlay = null;\n        },\n        onPrevButtonClick(event) {\n            if(this.showOtherMonths) {\n                this.navigationState = {backward: true, button: true};\n                this.navBackward(event);\n            }\n        },\n        onNextButtonClick(event) {\n            if(this.showOtherMonths) {\n                this.navigationState = {backward: false, button: true};\n                this.navForward(event);\n            }\n        },\n        navBackward(event) {\n            event.preventDefault();\n\n            if (!this.isEnabled()) {\n                return;\n            }\n\n            if (this.view === 'month') {\n                this.decrementYear();\n            }\n            else {\n                if (this.currentMonth === 0) {\n                    this.currentMonth = 11;\n                    this.decrementYear();\n                }\n                else {\n                    this.currentMonth--;\n                }\n\n                this.$emit('month-change', {month: this.currentMonth, year: this.currentYear});\n            }\n        },\n        navForward(event) {\n            event.preventDefault();\n\n            if (!this.isEnabled()) {\n                return;\n            }\n\n            if (this.view === 'month') {\n                this.incrementYear();\n            }\n            else {\n                if (this.currentMonth === 11) {\n                    this.currentMonth = 0;\n                    this.incrementYear();\n                }\n                else {\n                    this.currentMonth++;\n                }\n\n                this.$emit('month-change', {month: this.currentMonth , year: this.currentYear});\n            }\n        },\n        decrementYear() {\n            this.currentYear--;\n        },\n        incrementYear() {\n            this.currentYear++;\n        },\n        isEnabled() {\n            return !this.$attrs.disabled && !this.$attrs.readonly;\n        },\n        updateCurrentTimeMeta(date) {\n            let currentHour = date.getHours();\n\n            if (this.hourFormat === '12') {\n                this.pm = currentHour > 11;\n\n                if (currentHour >= 12)\n                    currentHour = (currentHour == 12) ? 12 : currentHour - 12;\n                else\n                    currentHour = (currentHour == 0) ? 12 : currentHour;\n            }\n\n            this.currentHour = Math.floor(currentHour / this.stepHour) * this.stepHour;\n            this.currentMinute = Math.floor(date.getMinutes() / this.stepMinute) * this.stepMinute;\n            this.currentSecond = Math.floor(date.getSeconds() / this.stepSecond) * this.stepSecond;\n        },\n        bindOutsideClickListener() {\n            if (!this.outsideClickListener) {\n                this.outsideClickListener = (event) => {\n                    if (this.overlayVisible && this.isOutsideClicked(event)) {\n                        this.overlayVisible = false;\n                    }\n                };\n                document.addEventListener('mousedown', this.outsideClickListener);\n            }\n        },\n        unbindOutsideClickListener() {\n            if (this.outsideClickListener) {\n                document.removeEventListener('mousedown', this.outsideClickListener);\n                this.outsideClickListener = null;\n            }\n        },\n        bindScrollListener() {\n            if (!this.scrollHandler) {\n                this.scrollHandler = new ConnectedOverlayScrollHandler(this.$refs.container, () => {\n                    if (this.overlayVisible) {\n                        this.overlayVisible = false;\n                    }\n                });\n            }\n\n            this.scrollHandler.bindScrollListener();\n        },\n        unbindScrollListener() {\n            if (this.scrollHandler) {\n                this.scrollHandler.unbindScrollListener();\n            }\n        },\n        bindResizeListener() {\n            if (!this.resizeListener) {\n                this.resizeListener = () => {\n                    if (this.overlayVisible) {\n                        this.overlayVisible = false;\n                    }\n                };\n                window.addEventListener('resize', this.resizeListener);\n            }\n        },\n        unbindResizeListener() {\n            if (this.resizeListener) {\n                window.removeEventListener('resize', this.resizeListener);\n                this.resizeListener = null;\n            }\n        },\n        isOutsideClicked(event) {\n            return !(this.$el.isSameNode(event.target) || this.isNavIconClicked(event) ||\n                    this.$el.contains(event.target) || (this.overlay && this.overlay.contains(event.target)));\n        },\n        isNavIconClicked(event) {\n            return (DomHandler.hasClass(event.target, 'p-datepicker-prev') || DomHandler.hasClass(event.target, 'p-datepicker-prev-icon')\n                    || DomHandler.hasClass(event.target, 'p-datepicker-next') || DomHandler.hasClass(event.target, 'p-datepicker-next-icon'));\n        },\n        alignOverlay() {\n            if (this.touchUI) {\n                this.enableModality();\n            }\n            else if (this.overlay) {\n                if (this.appendDisabled) {\n                    DomHandler.relativePosition(this.overlay, this.$el);\n                }\n                else {\n                    this.overlay.style.minWidth = DomHandler.getOuterWidth(this.$el) + 'px';\n                    DomHandler.absolutePosition(this.overlay, this.$el);\n                }\n            }\n        },\n        onButtonClick() {\n            if (this.isEnabled()) {\n                if (!this.overlayVisible) {\n                    this.$refs.input.$el.focus();\n                    this.overlayVisible = true;\n                }\n                else {\n                    this.overlayVisible = false;\n                }\n            }\n        },\n        isDateDisabled(day, month, year) {\n            if (this.disabledDates) {\n                for (let disabledDate of this.disabledDates) {\n                    if (disabledDate.getFullYear() === year && disabledDate.getMonth() === month && disabledDate.getDate() === day) {\n                        return true;\n                    }\n                }\n            }\n\n            return false;\n        },\n        isDayDisabled(day, month, year) {\n            if (this.disabledDays) {\n                let weekday = new Date(year, month, day);\n                let weekdayNumber = weekday.getDay();\n                return this.disabledDays.indexOf(weekdayNumber) !== -1;\n            }\n            return false;\n        },\n        onMonthDropdownChange(value) {\n            this.currentMonth = parseInt(value);\n            this.$emit('month-change', {month: this.currentMonth + 1, year: this.currentYear});\n        },\n        onYearDropdownChange(value) {\n            this.currentYear = parseInt(value);\n            this.$emit('year-change', {month: this.currentMonth + 1, year: this.currentYear});\n        },\n        onDateSelect(event, dateMeta) {\n            if (this.$attrs.disabled || !dateMeta.selectable) {\n                return;\n            }\n\n            DomHandler.find(this.overlay, '.p-datepicker-calendar td span:not(.p-disabled)').forEach(cell => cell.tabIndex = -1);\n\n            if (event) {\n                event.currentTarget.focus();\n            }\n\n            if (this.isMultipleSelection() && this.isSelected(dateMeta)) {\n                let newValue = this.modelValue.filter(date => !this.isDateEquals(date, dateMeta));\n                this.updateModel(newValue);\n            }\n            else {\n                if (this.shouldSelectDate(dateMeta)) {\n                    if (dateMeta.otherMonth) {\n                        this.currentMonth = dateMeta.month;\n                        this.currentYear = dateMeta.year;\n                        this.selectDate(dateMeta);\n                    }\n                    else {\n                        this.selectDate(dateMeta);\n                    }\n                }\n            }\n\n            if (this.isSingleSelection() && (!this.showTime || this.hideOnDateTimeSelect)) {\n                setTimeout(() => {\n                    this.overlayVisible = false;\n                }, 150);\n            }\n        },\n        selectDate(dateMeta) {\n            let date = new Date(dateMeta.year, dateMeta.month, dateMeta.day);\n\n            if (this.showTime) {\n                if (this.hourFormat === '12' && this.pm && this.currentHour != 12)\n                    date.setHours(this.currentHour + 12);\n                else\n                    date.setHours(this.currentHour);\n\n                date.setMinutes(this.currentMinute);\n                date.setSeconds(this.currentSecond);\n            }\n\n            if (this.minDate && this.minDate > date) {\n                date = this.minDate;\n                this.currentHour = date.getHours();\n                this.currentMinute = date.getMinutes();\n                this.currentSecond = date.getSeconds();\n            }\n\n            if (this.maxDate && this.maxDate < date) {\n                date = this.maxDate;\n                this.currentHour = date.getHours();\n                this.currentMinute = date.getMinutes();\n                this.currentSecond = date.getSeconds();\n            }\n\n            let modelVal = null;\n\n            if (this.isSingleSelection()) {\n                modelVal = date;\n            }\n            else if (this.isMultipleSelection()) {\n                modelVal = this.modelValue ? [...this.modelValue, date] : [date];\n            }\n            else if (this.isRangeSelection()) {\n                if (this.modelValue && this.modelValue.length) {\n                    let startDate = this.modelValue[0];\n                    let endDate = this.modelValue[1];\n\n                    if (!endDate && date.getTime() >= startDate.getTime()) {\n                        endDate = date;\n                    }\n                    else {\n                        startDate = date;\n                        endDate = null;\n                    }\n                    modelVal = [startDate, endDate];\n                }\n                else {\n                    modelVal = [date, null];\n                }\n            }\n\n            if (modelVal !== null) {\n                this.updateModel(modelVal);\n            }\n            this.$emit('date-select', date);\n        },\n        updateModel(value) {\n            this.$emit('update:modelValue', value);\n        },\n        shouldSelectDate() {\n            if (this.isMultipleSelection())\n                return this.maxDateCount != null ? this.maxDateCount > (this.modelValue ? this.modelValue.length : 0) : true;\n            else\n                return true;\n        },\n        isSingleSelection() {\n            return this.selectionMode === 'single';\n        },\n        isRangeSelection() {\n            return this.selectionMode === 'range';\n        },\n        isMultipleSelection() {\n            return this.selectionMode === 'multiple';\n        },\n        formatValue(value) {\n            if (typeof value === 'string') {\n                return value;\n            }\n\n            let formattedValue = '';\n            if (value) {\n                try {\n                    if (this.isSingleSelection()) {\n                        formattedValue = this.formatDateTime(value);\n                    }\n                    else if (this.isMultipleSelection()) {\n                        for(let i = 0; i < value.length; i++) {\n                            let dateAsString = this.formatDateTime(value[i]);\n                            formattedValue += dateAsString;\n                            if(i !== (value.length - 1)) {\n                                formattedValue += ', ';\n                            }\n                        }\n                    }\n                    else if (this.isRangeSelection()) {\n                        if (value && value.length) {\n                            let startDate = value[0];\n                            let endDate = value[1];\n\n                            formattedValue = this.formatDateTime(startDate);\n                            if (endDate) {\n                                formattedValue += ' - ' + this.formatDateTime(endDate);\n                            }\n                        }\n                    }\n                }\n                catch(err) {\n                    formattedValue = value;\n                }\n            }\n\n            return formattedValue;\n        },\n        formatDateTime(date) {\n            let formattedValue = null;\n            if (date) {\n                if(this.timeOnly) {\n                    formattedValue = this.formatTime(date);\n                }\n                else {\n                    formattedValue = this.formatDate(date, this.datePattern);\n                    if(this.showTime) {\n                        formattedValue += ' ' + this.formatTime(date);\n                    }\n                }\n            }\n\n            return formattedValue;\n        },\n        formatDate(date, format) {\n            if (!date) {\n                return '';\n            }\n\n            let iFormat;\n            const lookAhead = (match) => {\n                const matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);\n                if (matches) {\n                    iFormat++;\n                }\n                return matches;\n            },\n                formatNumber = (match, value, len) => {\n                    let num = '' + value;\n                    if (lookAhead(match)) {\n                        while (num.length < len) {\n                            num = '0' + num;\n                        }\n                    }\n                    return num;\n                },\n                formatName = (match, value, shortNames, longNames) => {\n                    return (lookAhead(match) ? longNames[value] : shortNames[value]);\n                };\n            let output = '';\n            let literal = false;\n\n            if (date) {\n                for (iFormat = 0; iFormat < format.length; iFormat++) {\n                    if (literal) {\n                        if (format.charAt(iFormat) === '\\'' && !lookAhead('\\'')) {\n                            literal = false;\n                        } else {\n                            output += format.charAt(iFormat);\n                        }\n                    } else {\n                        switch (format.charAt(iFormat)) {\n                            case 'd':\n                                output += formatNumber('d', date.getDate(), 2);\n                                break;\n                            case 'D':\n                                output += formatName('D', date.getDay(), this.$primevue.config.locale.dayNamesShort, this.$primevue.config.locale.dayNames);\n                                break;\n                            case 'o':\n                                output += formatNumber('o',\n                                Math.round((\n                                    new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime() -\n                                    new Date(date.getFullYear(), 0, 0).getTime()) / 86400000), 3);\n                                break;\n                            case 'm':\n                                output += formatNumber('m', date.getMonth() + 1, 2);\n                                break;\n                            case 'M':\n                                output += formatName('M',date.getMonth(), this.$primevue.config.locale.monthNamesShort, this.$primevue.config.locale.monthNames);\n                                break;\n                            case 'y':\n                                output += lookAhead('y') ? date.getFullYear() : (date.getFullYear() % 100 < 10 ? '0' : '') + (date.getFullYear() % 100);\n                                break;\n                            case '@':\n                                output += date.getTime();\n                                break;\n                            case '!':\n                                output += date.getTime() * 10000 + this.ticksTo1970;\n                                break;\n                            case '\\'':\n                                if (lookAhead('\\'')) {\n                                    output += '\\'';\n                                } else {\n                                    literal = true;\n                                }\n                                break;\n                            default:\n                                output += format.charAt(iFormat);\n                        }\n                    }\n                }\n            }\n            return output;\n        },\n        formatTime(date) {\n            if (!date) {\n                return '';\n            }\n\n            let output = '';\n            let hours = date.getHours();\n            let minutes = date.getMinutes();\n            let seconds = date.getSeconds();\n\n            if (this.hourFormat === '12' && hours > 11 && hours !== 12) {\n                hours -= 12;\n            }\n\n            if (this.hourFormat === '12') {\n                output += hours === 0 ? 12 : (hours < 10) ? '0' + hours : hours;\n            }\n            else {\n                output += (hours < 10) ? '0' + hours : hours;\n            }\n            output += ':';\n            output += (minutes < 10) ? '0' + minutes : minutes;\n\n            if (this.showSeconds) {\n                output += ':';\n                output += (seconds < 10) ? '0' + seconds : seconds;\n            }\n\n            if (this.hourFormat === '12') {\n                output += date.getHours() > 11 ? ' PM' : ' AM';\n            }\n\n            return output;\n        },\n        onTodayButtonClick(event) {\n            let date = new Date();\n            let dateMeta = {\n                day: date.getDate(),\n                month: date.getMonth(),\n                year: date.getFullYear(),\n                otherMonth: date.getMonth() !== this.currentMonth || date.getFullYear() !== this.currentYear,\n                today: true,\n                selectable: true\n            };\n\n            this.onDateSelect(null, dateMeta);\n            this.$emit('today-click', date);\n            event.preventDefault();\n        },\n        onClearButtonClick(event) {\n            this.updateModel(null);\n            this.overlayVisible = false;\n            this.$emit('clear-click', event);\n            event.preventDefault();\n        },\n        onTimePickerElementMouseDown(event, type, direction) {\n            if (this.isEnabled()) {\n                this.repeat(event, null, type, direction);\n                event.preventDefault();\n            }\n        },\n        onTimePickerElementMouseUp(event) {\n            if (this.isEnabled()) {\n                this.clearTimePickerTimer();\n                this.updateModelTime();\n                event.preventDefault();\n            }\n        },\n        onTimePickerElementMouseLeave() {\n            this.clearTimePickerTimer();\n        },\n        repeat(event, interval, type, direction) {\n            let i = interval||500;\n\n            this.clearTimePickerTimer();\n            this.timePickerTimer = setTimeout(() => {\n                this.repeat(event, 100, type, direction);\n            }, i);\n\n            switch(type) {\n                case 0:\n                    if (direction === 1)\n                        this.incrementHour(event);\n                    else\n                        this.decrementHour(event);\n                break;\n\n                case 1:\n                    if (direction === 1)\n                        this.incrementMinute(event);\n                    else\n                        this.decrementMinute(event);\n                break;\n\n                case 2:\n                    if (direction === 1)\n                        this.incrementSecond(event);\n                    else\n                        this.decrementSecond(event);\n                break;\n            }\n        },\n        convertTo24Hour(hours, pm) {\n            if (this.hourFormat == '12') {\n                if (hours === 12) {\n                    return (pm ? 12 : 0);\n                } else {\n                    return (pm ? hours + 12 : hours);\n                }\n            }\n            return hours;\n        },\n         validateTime(hour, minute, second, pm) {\n            let value = this.modelValue;\n            const convertedHour = this.convertTo24Hour(hour, pm);\n            if (!this.isComparable()) {\n                return true;\n            }\n            if (this.isRangeSelection()) {\n                value = this.modelValue[1] || this.modelValue[0];\n            }\n            if (this.isMultipleSelection()) {\n                value = this.modelValue[this.modelValue.length - 1];\n            }\n            const valueDateString = value ? value.toDateString() : null;\n            if (this.minDate && valueDateString && this.minDate.toDateString() === valueDateString) {\n                if (this.minDate.getHours() > convertedHour) {\n                    return false;\n                }\n                if (this.minDate.getHours() === convertedHour) {\n                    if (this.minDate.getMinutes() > minute) {\n                        return false;\n                    }\n                    if (this.minDate.getMinutes() === minute) {\n                        if (this.minDate.getSeconds() > second) {\n                            return false;\n                        }\n                    }\n                }\n            }\n\n            if (this.maxDate && valueDateString && this.maxDate.toDateString() === valueDateString) {\n                if (this.maxDate.getHours() < convertedHour) {\n                    return false;\n                }\n                if (this.maxDate.getHours() === convertedHour) {\n                    if (this.maxDate.getMinutes() < minute) {\n                        return false;\n                    }\n                    if (this.maxDate.getMinutes() === minute) {\n                      if (this.maxDate.getSeconds() < second) {\n                          return false;\n                      }\n                    }\n                }\n            }\n            return true;\n        },\n        incrementHour(event) {\n            let prevHour = this.currentHour;\n            let newHour = this.currentHour + this.stepHour;\n            let newPM = this.pm;\n\n\n            if (this.hourFormat == '24')\n                newHour = (newHour >= 24) ? (newHour - 24) : newHour;\n            else if (this.hourFormat == '12') {\n                // Before the AM/PM break, now after\n                if (prevHour < 12 && newHour > 11) {\n                    newPM= !this.pm;\n                }\n                newHour = (newHour >= 13) ? (newHour - 12) : newHour;\n            }\n\n\n            if (this.validateTime(newHour, this.currentMinute, this.currentSecond, newPM)) {\n                this.currentHour = newHour;\n                this.pm = newPM;\n            }\n            event.preventDefault();\n        },\n        decrementHour(event) {\n            let newHour = this.currentHour - this.stepHour;\n            let newPM = this.pm;\n\n            if (this.hourFormat == '24')\n                newHour = (newHour < 0) ? (24 + newHour) : newHour;\n            else if (this.hourFormat == '12') {\n                // If we were at noon/midnight, then switch\n                if (this.currentHour === 12) {\n                    newPM = !this.pm;\n                }\n                newHour = (newHour <= 0) ? (12 + newHour) : newHour;\n            }\n            if (this.validateTime(newHour, this.currentMinute, this.currentSecond, newPM)) {\n                this.currentHour = newHour;\n                this.pm = newPM;\n            }\n            event.preventDefault();\n        },\n        incrementMinute(event) {\n            let newMinute = this.currentMinute + this.stepMinute;\n            if (this.validateTime(this.currentHour, newMinute, this.currentSecond, true)) {\n                this.currentMinute = (newMinute > 59) ? newMinute - 60 : newMinute;\n            }\n            event.preventDefault();\n        },\n        decrementMinute(event) {\n            let newMinute = this.currentMinute - this.stepMinute;\n            newMinute = (newMinute < 0) ? 60 + newMinute : newMinute;\n            if (this.validateTime(this.currentHour, newMinute, this.currentSecond, true)) {\n                this.currentMinute = newMinute;\n            }\n\n            event.preventDefault();\n        },\n        incrementSecond(event) {\n            let newSecond = this.currentSecond + this.stepSecond;\n            if (this.validateTime(this.currentHour, this.currentMinute, newSecond, true)) {\n                this.currentSecond = (newSecond > 59) ? newSecond - 60 : newSecond;\n            }\n\n            event.preventDefault();\n        },\n        decrementSecond(event) {\n            let newSecond = this.currentSecond - this.stepSecond;\n            newSecond = (newSecond < 0) ? 60 + newSecond : newSecond;\n            if (this.validateTime(this.currentHour, this.currentMinute, newSecond, true)) {\n                this.currentSecond = newSecond;\n            }\n\n            event.preventDefault();\n        },\n        updateModelTime() {\n            let value = this.isComparable() ? this.modelValue : new Date();\n\n            if (this.isRangeSelection()) {\n                value = this.modelValue[1] || this.modelValue[0];\n            }\n            if (this.isMultipleSelection()) {\n                value = this.modelValue[this.modelValue.length - 1];\n            }\n            value = value ? new Date(value.getTime()) : new Date();\n\n            if (this.hourFormat == '12') {\n                if (this.currentHour === 12)\n                    value.setHours(this.pm ? 12 : 0);\n                else\n                    value.setHours(this.pm ? this.currentHour + 12 : this.currentHour);\n            }\n            else {\n                value.setHours(this.currentHour);\n            }\n\n            value.setMinutes(this.currentMinute);\n            value.setSeconds(this.currentSecond);\n\n            if (this.isRangeSelection()) {\n                if (this.modelValue[1])\n                    value = [this.modelValue[0], value];\n                else\n                    value = [value, null];\n            }\n\n            if (this.isMultipleSelection()){\n                value = [...this.modelValue.slice(0, -1), value];\n            }\n\n            this.updateModel(value);\n            this.$emit('date-select', value);\n        },\n        toggleAMPM(event) {\n            this.pm = !this.pm;\n            this.updateModelTime();\n            event.preventDefault();\n        },\n        clearTimePickerTimer() {\n            if (this.timePickerTimer) {\n                clearInterval(this.timePickerTimer);\n            }\n        },\n        onMonthSelect(event, index) {\n            this.onDateSelect(event, {year: this.currentYear, month: index, day: 1, selectable: true});\n        },\n        enableModality() {\n            if (!this.mask) {\n                this.mask = document.createElement('div');\n                this.mask.style.zIndex = String(parseInt(this.overlay.style.zIndex, 10) - 1);\n                DomHandler.addMultipleClasses(this.mask, 'p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter');\n\n                this.maskClickListener = () => {\n                    this.overlayVisible = false;\n                };\n                this.mask.addEventListener('click', this.maskClickListener);\n\n                document.body.appendChild(this.mask);\n                DomHandler.addClass(document.body, 'p-overflow-hidden');\n            }\n        },\n        disableModality() {\n            if (this.mask) {\n                DomHandler.addClass(this.mask, 'p-component-overlay-leave');\n                this.mask.addEventListener('animationend', () => {\n                    this.destroyMask();\n                });\n            }\n        },\n        destroyMask() {\n            this.mask.removeEventListener('click', this.maskClickListener);\n            this.maskClickListener = null;\n            document.body.removeChild(this.mask);\n            this.mask = null;\n\n            let bodyChildren = document.body.children;\n            let hasBlockerMasks;\n            for (let i = 0; i < bodyChildren.length; i++) {\n                let bodyChild = bodyChildren[i];\n                if(DomHandler.hasClass(bodyChild, 'p-datepicker-mask-scrollblocker')) {\n                    hasBlockerMasks = true;\n                    break;\n                }\n            }\n\n            if (!hasBlockerMasks) {\n                DomHandler.removeClass(document.body, 'p-overflow-hidden');\n            }\n        },\n        updateCurrentMetaData() {\n            const viewDate = this.viewDate;\n            this.currentMonth = viewDate.getMonth();\n            this.currentYear = viewDate.getFullYear();\n\n            if (this.showTime || this.timeOnly) {\n                this.updateCurrentTimeMeta(viewDate);\n            }\n        },\n        isValidSelection(value) {\n            let isValid = true;\n            if (this.isSingleSelection()) {\n                if (!this.isSelectable(value.getDate(), value.getMonth(), value.getFullYear(), false)) {\n                    isValid = false;\n                }\n            } else if (value.every(v => this.isSelectable(v.getDate(), v.getMonth(), v.getFullYear(), false))) {\n                if (this.isRangeSelection()) {\n                    isValid = value.length > 1 && value[1] > value[0] ? true : false;\n                }\n            }\n            return isValid;\n        },\n        parseValue(text) {\n            if (!text || text.trim().length === 0) {\n                return null;\n            }\n\n            let value;\n\n            if (this.isSingleSelection()) {\n                value = this.parseDateTime(text);\n            }\n            else if (this.isMultipleSelection()) {\n                let tokens = text.split(',');\n                value = [];\n                for (let token of tokens) {\n                    value.push(this.parseDateTime(token.trim()));\n                }\n            }\n            else if (this.isRangeSelection()) {\n                let tokens = text.split(' - ');\n                value = [];\n                for (let i = 0; i < tokens.length; i++) {\n                    value[i] = this.parseDateTime(tokens[i].trim());\n                }\n            }\n\n            return value;\n        },\n        parseDateTime(text) {\n            let date;\n            let parts = text.split(' ');\n\n            if (this.timeOnly) {\n                date = new Date();\n                this.populateTime(date, parts[0], parts[1]);\n            }\n            else {\n                const dateFormat = this.datePattern;\n                if (this.showTime) {\n                    date = this.parseDate(parts[0], dateFormat);\n                    this.populateTime(date, parts[1], parts[2]);\n                }\n                else {\n                    date = this.parseDate(text, dateFormat);\n                }\n            }\n\n            return date;\n        },\n        populateTime(value, timeString, ampm) {\n            if (this.hourFormat == '12' && !ampm) {\n                throw 'Invalid Time';\n            }\n\n            this.pm = (ampm === 'PM' || ampm === 'pm');\n            let time = this.parseTime(timeString);\n            value.setHours(time.hour);\n            value.setMinutes(time.minute);\n            value.setSeconds(time.second);\n        },\n        parseTime(value) {\n            let tokens = value.split(':');\n            let validTokenLength = this.showSeconds ? 3 : 2;\n            let regex = (/^[0-9][0-9]$/);\n\n            if (tokens.length !== validTokenLength || !tokens[0].match(regex) || !tokens[1].match(regex) || (this.showSeconds && !tokens[2].match(regex))) {\n                throw \"Invalid time\";\n            }\n\n            let h = parseInt(tokens[0]);\n            let m = parseInt(tokens[1]);\n            let s = this.showSeconds ? parseInt(tokens[2]) : null;\n\n            if (isNaN(h) || isNaN(m) || h > 23 || m > 59 || (this.hourFormat == '12' && h > 12) || (this.showSeconds && (isNaN(s) || s > 59))) {\n                throw \"Invalid time\";\n            }\n            else {\n                if (this.hourFormat == '12' && h !== 12 && this.pm) {\n                    h+= 12;\n                }\n\n                return {hour: h, minute: m, second: s};\n            }\n        },\n        parseDate(value, format) {\n            if (format == null || value == null) {\n                throw \"Invalid arguments\";\n            }\n\n            value = (typeof value === \"object\" ? value.toString() : value + \"\");\n            if (value === \"\") {\n                return null;\n            }\n\n            let iFormat, dim, extra,\n            iValue = 0,\n            shortYearCutoff = (typeof this.shortYearCutoff !== \"string\" ? this.shortYearCutoff : new Date().getFullYear() % 100 + parseInt(this.shortYearCutoff, 10)),\n            year = -1,\n            month = -1,\n            day = -1,\n            doy = -1,\n            literal = false,\n            date,\n            lookAhead = (match) => {\n                let matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);\n                if (matches) {\n                    iFormat++;\n                }\n                return matches;\n            },\n            getNumber = (match) => {\n                let isDoubled = lookAhead(match),\n                    size = (match === \"@\" ? 14 : (match === \"!\" ? 20 :\n                    (match === \"y\" && isDoubled ? 4 : (match === \"o\" ? 3 : 2)))),\n                    minSize = (match === \"y\" ? size : 1),\n                    digits = new RegExp(\"^\\\\d{\" + minSize + \",\" + size + \"}\"),\n                    num = value.substring(iValue).match(digits);\n                if (!num) {\n                    throw \"Missing number at position \" + iValue;\n                }\n                iValue += num[ 0 ].length;\n                return parseInt(num[ 0 ], 10);\n            },\n            getName = (match, shortNames, longNames) => {\n                let index = -1;\n                let arr = lookAhead(match) ? longNames : shortNames;\n                let names = [];\n\n                for (let i = 0; i < arr.length; i++) {\n                    names.push([i,arr[i]]);\n                }\n                names.sort((a,b) => {\n                    return -(a[ 1 ].length - b[ 1 ].length);\n                });\n\n                for (let i = 0; i < names.length; i++) {\n                    let name = names[i][1];\n                    if (value.substr(iValue, name.length).toLowerCase() === name.toLowerCase()) {\n                        index = names[i][0];\n                        iValue += name.length;\n                        break;\n                    }\n                }\n\n                if (index !== -1) {\n                    return index + 1;\n                } else {\n                    throw \"Unknown name at position \" + iValue;\n                }\n            },\n            checkLiteral = () => {\n                if (value.charAt(iValue) !== format.charAt(iFormat)) {\n                    throw \"Unexpected literal at position \" + iValue;\n                }\n                iValue++;\n            };\n\n            if (this.view === 'month') {\n                day = 1;\n            }\n\n            for (iFormat = 0; iFormat < format.length; iFormat++) {\n                if (literal) {\n                    if (format.charAt(iFormat) === \"'\" && !lookAhead(\"'\")) {\n                        literal = false;\n                    } else {\n                        checkLiteral();\n                    }\n                } else {\n                    switch (format.charAt(iFormat)) {\n                        case \"d\":\n                            day = getNumber(\"d\");\n                            break;\n                        case \"D\":\n                            getName(\"D\", this.$primevue.config.locale.dayNamesShort, this.$primevue.config.locale.dayNames);\n                            break;\n                        case \"o\":\n                            doy = getNumber(\"o\");\n                            break;\n                        case \"m\":\n                            month = getNumber(\"m\");\n                            break;\n                        case \"M\":\n                            month = getName(\"M\", this.$primevue.config.locale.monthNamesShort, this.$primevue.config.locale.monthNames);\n                            break;\n                        case \"y\":\n                            year = getNumber(\"y\");\n                            break;\n                        case \"@\":\n                            date = new Date(getNumber(\"@\"));\n                            year = date.getFullYear();\n                            month = date.getMonth() + 1;\n                            day = date.getDate();\n                            break;\n                        case \"!\":\n                            date = new Date((getNumber(\"!\") - this.ticksTo1970) / 10000);\n                            year = date.getFullYear();\n                            month = date.getMonth() + 1;\n                            day = date.getDate();\n                            break;\n                        case \"'\":\n                            if (lookAhead(\"'\")) {\n                                checkLiteral();\n                            } else {\n                                literal = true;\n                            }\n                            break;\n                        default:\n                            checkLiteral();\n                    }\n                }\n            }\n\n            if (iValue < value.length) {\n                extra = value.substr(iValue);\n                if (!/^\\s+/.test(extra)) {\n                    throw \"Extra/unparsed characters found in date: \" + extra;\n                }\n            }\n\n            if (year === -1) {\n                year = new Date().getFullYear();\n            } else if (year < 100) {\n                year += new Date().getFullYear() - new Date().getFullYear() % 100 +\n                    (year <= shortYearCutoff ? 0 : -100);\n            }\n\n            if (doy > -1) {\n                month = 1;\n                day = doy;\n                do {\n                    dim = this.getDaysCountInMonth(year, month - 1);\n                    if (day <= dim) {\n                        break;\n                    }\n                    month++;\n                    day -= dim;\n                // eslint-disable-next-line\n                } while (true);\n            }\n\n            date = this.daylightSavingAdjust(new Date(year, month - 1, day));\n                    if (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day) {\n                        throw \"Invalid date\"; // E.g. 31/02/00\n                    }\n\n            return date;\n        },\n        getWeekNumber(date) {\n            let checkDate = new Date(date.getTime());\n            checkDate.setDate(checkDate.getDate() + 4 - ( checkDate.getDay() || 7 ));\n            let time = checkDate.getTime();\n            checkDate.setMonth( 0 );\n            checkDate.setDate( 1 );\n            return Math.floor( Math.round((time - checkDate.getTime()) / 86400000 ) / 7 ) + 1;\n        },\n        onDateCellKeydown(event, date, groupIndex) {\n            const cellContent = event.currentTarget;\n            const cell = cellContent.parentElement;\n\n            switch (event.which) {\n                //down arrow\n                case 40: {\n                    cellContent.tabIndex = '-1';\n                    let cellIndex = DomHandler.index(cell);\n                    let nextRow = cell.parentElement.nextElementSibling;\n                    if (nextRow) {\n                        let focusCell = nextRow.children[cellIndex].children[0];\n                        if (DomHandler.hasClass(focusCell, 'p-disabled')) {\n                            this.navigationState = {backward: false};\n                            this.navForward(event);\n                        }\n                        else {\n                            nextRow.children[cellIndex].children[0].tabIndex = '0';\n                            nextRow.children[cellIndex].children[0].focus();\n                        }\n                    }\n                    else {\n                        this.navigationState = {backward: false};\n                        this.navForward(event);\n                    }\n                    event.preventDefault();\n                    break;\n                }\n\n                //up arrow\n                case 38: {\n                    cellContent.tabIndex = '-1';\n                    let cellIndex = DomHandler.index(cell);\n                    let prevRow = cell.parentElement.previousElementSibling;\n                    if (prevRow) {\n                        let focusCell = prevRow.children[cellIndex].children[0];\n                        if (DomHandler.hasClass(focusCell, 'p-disabled')) {\n                            this.navigationState = {backward: true};\n                            this.navBackward(event);\n                        }\n                        else {\n                            focusCell.tabIndex = '0';\n                            focusCell.focus();\n                        }\n                    }\n                    else {\n                        this.navigationState = {backward: true};\n                        this.navBackward(event);\n                    }\n                    event.preventDefault();\n                    break;\n                }\n\n                //left arrow\n                case 37: {\n                    cellContent.tabIndex = '-1';\n                    let prevCell = cell.previousElementSibling;\n                    if (prevCell) {\n                        let focusCell = prevCell.children[0];\n                        if (DomHandler.hasClass(focusCell, 'p-disabled')) {\n                            this.navigateToMonth(true, groupIndex);\n                        }\n                        else {\n                            focusCell.tabIndex = '0';\n                            focusCell.focus();\n                        }\n                    }\n                    else {\n                        this.navigateToMonth(true, groupIndex);\n                    }\n                    event.preventDefault();\n                    break;\n                }\n\n                //right arrow\n                case 39: {\n                    cellContent.tabIndex = '-1';\n                    let nextCell = cell.nextElementSibling;\n                    if (nextCell) {\n                        let focusCell = nextCell.children[0];\n                        if (DomHandler.hasClass(focusCell, 'p-disabled')) {\n                            this.navigateToMonth(false, groupIndex);\n                        }\n                        else {\n                            focusCell.tabIndex = '0';\n                            focusCell.focus();\n                        }\n                    }\n                    else {\n                        this.navigateToMonth(false, groupIndex);\n                    }\n                    event.preventDefault();\n                    break;\n                }\n\n                //enter\n                case 13: {\n                    this.onDateSelect(event, date);\n                    event.preventDefault();\n                    break;\n                }\n\n                //escape\n                case 27: {\n                    this.overlayVisible = false;\n                    event.preventDefault();\n                    break;\n                }\n\n                //tab\n                case 9: {\n                    if (!this.inline) {\n                        this.trapFocus(event);\n                    }\n                    break;\n                }\n\n                default:\n                    //no op\n                break;\n            }\n        },\n        navigateToMonth(prev, groupIndex) {\n            if (prev) {\n                if (this.numberOfMonths === 1 || (groupIndex === 0)) {\n                    this.navigationState = {backward: true};\n                    this.navBackward(event);\n                }\n                else {\n                    let prevMonthContainer = this.overlay.children[groupIndex - 1];\n                    let cells = DomHandler.find(prevMonthContainer, '.p-datepicker-calendar td span:not(.p-disabled)');\n                    let focusCell = cells[cells.length - 1];\n                    focusCell.tabIndex = '0';\n                    focusCell.focus();\n                }\n            }\n            else {\n                if (this.numberOfMonths === 1 || (groupIndex === this.numberOfMonths - 1)) {\n                    this.navigationState = {backward: false};\n                    this.navForward(event);\n                }\n                else {\n                    let nextMonthContainer = this.overlay.children[groupIndex + 1];\n                    let focusCell = DomHandler.findSingle(nextMonthContainer, '.p-datepicker-calendar td span:not(.p-disabled)');\n                    focusCell.tabIndex = '0';\n                    focusCell.focus();\n                }\n            }\n        },\n        onMonthCellKeydown(event, index) {\n            const cell = event.currentTarget;\n\n            switch (event.which) {\n                //arrows\n                case 38:\n                case 40: {\n                    cell.tabIndex = '-1';\n                    var cells = cell.parentElement.children;\n                    var cellIndex = DomHandler.index(cell);\n                    let nextCell = cells[event.which === 40 ? cellIndex + 3 : cellIndex -3];\n                    if (nextCell) {\n                        nextCell.tabIndex = '0';\n                        nextCell.focus();\n                    }\n                    event.preventDefault();\n                    break;\n                }\n\n                //left arrow\n                case 37: {\n                    cell.tabIndex = '-1';\n                    let prevCell = cell.previousElementSibling;\n                    if (prevCell) {\n                        prevCell.tabIndex = '0';\n                        prevCell.focus();\n                    }\n                    event.preventDefault();\n                    break;\n                }\n\n                //right arrow\n                case 39: {\n                    cell.tabIndex = '-1';\n                    let nextCell = cell.nextElementSibling;\n                    if (nextCell) {\n                        nextCell.tabIndex = '0';\n                        nextCell.focus();\n                    }\n                    event.preventDefault();\n                    break;\n                }\n\n                //enter\n                case 13: {\n                    this.onMonthSelect(event, index);\n                    event.preventDefault();\n                    break;\n                }\n\n                //escape\n                case 27: {\n                    this.overlayVisible = false;\n                    event.preventDefault();\n                    break;\n                }\n\n                //tab\n                case 9: {\n                    this.trapFocus(event);\n                    break;\n                }\n\n                default:\n                    //no op\n                break;\n            }\n        },\n        updateFocus() {\n            let cell;\n            if (this.navigationState) {\n                if (this.navigationState.button) {\n                    this.initFocusableCell();\n\n                    if (this.navigationState.backward)\n                        DomHandler.findSingle(this.overlay, '.p-datepicker-prev').focus();\n                    else\n                        DomHandler.findSingle(this.overlay, '.p-datepicker-next').focus();\n                }\n                else {\n                    if (this.navigationState.backward) {\n                        let cells = DomHandler.find(this.overlay, '.p-datepicker-calendar td span:not(.p-disabled)');\n                        cell = cells[cells.length - 1];\n                    }\n                    else {\n                        cell = DomHandler.findSingle(this.overlay, '.p-datepicker-calendar td span:not(.p-disabled)');\n                    }\n\n                    if (cell) {\n                        cell.tabIndex = '0';\n                        cell.focus();\n                    }\n                }\n\n                this.navigationState = null;\n            }\n            else {\n                this.initFocusableCell();\n            }\n        },\n        initFocusableCell() {\n            let cell;\n\n            if (this.view === 'month') {\n                let cells = DomHandler.find(this.overlay, '.p-monthpicker .p-monthpicker-month');\n                let selectedCell= DomHandler.findSingle(this.overlay, '.p-monthpicker .p-monthpicker-month.p-highlight');\n                cells.forEach(cell => cell.tabIndex = -1);\n                cell = selectedCell || cells[0];\n            }\n            else {\n                cell = DomHandler.findSingle(this.overlay, 'span.p-highlight');\n                if (!cell) {\n                    let todayCell = DomHandler.findSingle(this.overlay, 'td.p-datepicker-today span:not(.p-disabled)');\n                    if (todayCell)\n                        cell = todayCell;\n                    else\n                        cell = DomHandler.findSingle(this.overlay, '.p-datepicker-calendar td span:not(.p-disabled)');\n                }\n            }\n\n            if (cell) {\n                cell.tabIndex = '0';\n            }\n        },\n        trapFocus(event) {\n            event.preventDefault();\n            let focusableElements = DomHandler.getFocusableElements(this.overlay);\n\n            if (focusableElements && focusableElements.length > 0) {\n                if (!document.activeElement) {\n                    focusableElements[0].focus();\n                }\n                else {\n                    let focusedIndex = focusableElements.indexOf(document.activeElement);\n\n                    if (event.shiftKey) {\n                        if (focusedIndex == -1 || focusedIndex === 0)\n                            focusableElements[focusableElements.length - 1].focus();\n                        else\n                            focusableElements[focusedIndex - 1].focus();\n                    }\n                    else {\n                        if (focusedIndex == -1 || focusedIndex === (focusableElements.length - 1))\n                            focusableElements[0].focus();\n                        else\n                            focusableElements[focusedIndex + 1].focus();\n                    }\n                }\n            }\n        },\n        onContainerButtonKeydown(event) {\n             switch (event.which) {\n                //tab\n                case 9:\n                    this.trapFocus(event);\n                break;\n\n                //escape\n                case 27:\n                    this.overlayVisible = false;\n                    event.preventDefault();\n                break;\n\n                default:\n                    //Noop\n                break;\n             }\n        },\n        onInput(event) {\n            // IE 11 Workaround for input placeholder : https://github.com/primefaces/primeng/issues/2026\n            if (!this.isKeydown) {\n                return;\n            }\n            this.isKeydown = false;\n\n            try {\n                this.selectionStart = this.$refs.input.$el.selectionStart;\n                this.selectionEnd = this.$refs.input.$el.selectionEnd;\n\n                let value = this.parseValue(event.target.value);\n                if (this.isValidSelection(value)) {\n                    this.updateModel(value);\n                }\n            }\n            catch(err) {\n                // invalid date\n                let value = this.keepInvalid ? event.target.value : null;\n                this.updateModel(value);\n            }\n        },\n        onFocus() {\n            if (this.showOnFocus && this.isEnabled()) {\n                this.overlayVisible = true;\n            }\n            this.focused = true;\n        },\n        onBlur() {\n            this.focused = false;\n        },\n        onKeyDown(event) {\n            this.isKeydown = true;\n            if (event.keyCode === 40 && this.overlay) {\n                this.trapFocus(event);\n            }\n            else if (event.keyCode === 27) {\n                if (this.overlayVisible) {\n                    this.overlayVisible = false;\n                    event.preventDefault();\n                }\n            }\n            else if (event.keyCode === 9) {\n                if (this.overlay) {\n                    DomHandler.getFocusableElements(this.overlay).forEach(el => el.tabIndex = '-1');\n                }\n\n                if (this.overlayVisible) {\n                    this.overlayVisible = false;\n                }\n            }\n        },\n        overlayRef(el) {\n            this.overlay = el;\n        },\n        getMonthName(index) {\n            return this.$primevue.config.locale.monthNames[index];\n        },\n        onOverlayClick(event) {\n            if (!this.inline) {\n                OverlayEventBus.emit('overlay-click', {\n                    originalEvent: event,\n                    target: this.$el\n                });\n            }\n        }\n    },\n    computed: {\n        viewDate() {\n            let propValue = this.modelValue;\n            if (typeof propValue === 'string') {\n                return new Date();\n            }\n\n            if (propValue && Array.isArray(propValue)) {\n                propValue = propValue[0];\n            }\n\n            return propValue || new Date();\n        },\n        inputFieldValue() {\n            return this.keepInvalid ? this.modelValue : this.formatValue(this.modelValue);\n        },\n        containerClass() {\n            return [\n                'p-calendar p-component p-inputwrapper', this.class,\n                {\n                    'p-calendar-w-btn': this.showIcon,\n                    'p-calendar-timeonly': this.timeOnly,\n                    'p-inputwrapper-filled': this.modelValue,\n                    'p-inputwrapper-focus': this.focused\n                }\n            ];\n        },\n        panelStyleClass() {\n            return ['p-datepicker p-component', this.panelClass, {\n                'p-datepicker-inline': this.inline,\n                'p-disabled': this.$attrs.disabled,\n                'p-datepicker-timeonly': this.timeOnly,\n                'p-datepicker-multiple-month': this.numberOfMonths > 1,\n                'p-datepicker-monthpicker': (this.view === 'month'),\n                'p-datepicker-touch-ui': this.touchUI,\n                'p-input-filled': this.$primevue.config.inputStyle === 'filled',\n                'p-ripple-disabled': this.$primevue.config.ripple === false\n            }];\n        },\n        months() {\n            let months = [];\n            for (let i = 0 ; i < this.numberOfMonths; i++) {\n                let month = this.currentMonth + i;\n                let year = this.currentYear;\n                if (month > 11) {\n                    month = month % 11 - 1;\n                    year = year + 1;\n                }\n\n                let dates = [];\n                let firstDay = this.getFirstDayOfMonthIndex(month, year);\n                let daysLength = this.getDaysCountInMonth(month, year);\n                let prevMonthDaysLength = this.getDaysCountInPrevMonth(month, year);\n                let dayNo = 1;\n                let today = new Date();\n                let weekNumbers = [];\n                let monthRows = Math.ceil((daysLength + firstDay) / 7);\n\n                for (let i = 0; i < monthRows; i++) {\n                    let week = [];\n\n                    if (i == 0) {\n                        for (let j = (prevMonthDaysLength - firstDay + 1); j <= prevMonthDaysLength; j++) {\n                            let prev = this.getPreviousMonthAndYear(month, year);\n                            week.push({day: j, month: prev.month, year: prev.year, otherMonth: true,\n                                    today: this.isToday(today, j, prev.month, prev.year), selectable: this.isSelectable(j, prev.month, prev.year, true)});\n                        }\n\n                        let remainingDaysLength = 7 - week.length;\n                        for (let j = 0; j < remainingDaysLength; j++) {\n                            week.push({day: dayNo, month: month, year: year, today: this.isToday(today, dayNo, month, year),\n                                    selectable: this.isSelectable(dayNo, month, year, false)});\n                            dayNo++;\n                        }\n                    }\n                    else {\n                        for (let j = 0; j < 7; j++) {\n                            if (dayNo > daysLength) {\n                                let next = this.getNextMonthAndYear(month, year);\n                                week.push({day: dayNo - daysLength, month: next.month, year: next.year, otherMonth: true,\n                                            today: this.isToday(today, dayNo - daysLength, next.month, next.year),\n                                            selectable: this.isSelectable((dayNo - daysLength), next.month, next.year, true)});\n                            }\n                            else {\n                                week.push({day: dayNo, month: month, year: year, today: this.isToday(today, dayNo, month, year),\n                                    selectable: this.isSelectable(dayNo, month, year, false)});\n                            }\n\n                            dayNo++;\n                        }\n                    }\n\n                    if (this.showWeek) {\n                        weekNumbers.push(this.getWeekNumber(new Date(week[0].year, week[0].month, week[0].day)));\n                    }\n\n                    dates.push(week);\n                }\n\n                months.push({\n                    month: month,\n                    year: year,\n                    dates: dates,\n                    weekNumbers: weekNumbers\n                });\n            }\n\n            return months;\n        },\n        weekDays() {\n            let weekDays = [];\n            let dayIndex = this.$primevue.config.locale.firstDayOfWeek;\n            for (let i = 0; i < 7; i++) {\n                weekDays.push(this.$primevue.config.locale.dayNamesMin[dayIndex]);\n                dayIndex = (dayIndex == 6) ? 0 : ++dayIndex;\n            }\n\n            return weekDays;\n        },\n        ticksTo1970() {\n            return (((1970 - 1) * 365 + Math.floor(1970 / 4) - Math.floor(1970 / 100) + Math.floor(1970 / 400)) * 24 * 60 * 60 * 10000000);\n        },\n        sundayIndex() {\n            return this.$primevue.config.locale.firstDayOfWeek > 0 ? 7 - this.$primevue.config.locale.firstDayOfWeek : 0;\n        },\n        datePattern() {\n            return this.dateFormat || this.$primevue.config.locale.dateFormat;\n        },\n        yearOptions() {\n            if (this.yearRange) {\n                let $vm = this;\n                const years = this.yearRange.split(':');\n                let yearStart = parseInt(years[0]);\n                let yearEnd = parseInt(years[1]);\n                let yearOptions = [];\n\n                if (this.currentYear < yearStart) {\n                    $vm.currentYear = yearEnd;\n                }\n                else if (this.currentYear > yearEnd) {\n                    $vm.currentYear = yearStart;\n                }\n\n                for (let i = yearStart; i <= yearEnd; i++) {\n                    yearOptions.push(i);\n                }\n\n                return yearOptions;\n            }\n            else {\n                return null;\n            }\n        },\n        monthPickerValues() {\n            let monthPickerValues = [];\n            for (let i = 0; i <= 11; i++) {\n                monthPickerValues.push(this.$primevue.config.locale.monthNamesShort[i]);\n            }\n\n            return monthPickerValues;\n        },\n        formattedCurrentHour() {\n            return this.currentHour < 10 ? '0' + this.currentHour : this.currentHour;\n        },\n        formattedCurrentMinute() {\n            return this.currentMinute < 10 ? '0' + this.currentMinute : this.currentMinute;\n        },\n        formattedCurrentSecond() {\n            return this.currentSecond < 10 ? '0' + this.currentSecond : this.currentSecond;\n        },\n        todayLabel() {\n            return this.$primevue.config.locale.today;\n        },\n        clearLabel() {\n            return this.$primevue.config.locale.clear;\n        },\n        weekHeaderLabel() {\n            return this.$primevue.config.locale.weekHeader;\n        },\n        monthNames() {\n            return this.$primevue.config.locale.monthNames;\n        },\n        appendDisabled() {\n            return this.appendTo === 'self' || this.inline;\n        },\n        appendTarget() {\n            return this.appendDisabled ? null : this.appendTo;\n        }\n    },\n    components: {\n        'CalendarInputText': InputText,\n        'CalendarButton': Button\n    },\n    directives: {\n        'ripple': Ripple\n    }\n}\n</script>\n\n<style>\n.p-calendar {\n    position: relative;\n    display: inline-flex;\n}\n\n.p-calendar .p-inputtext {\n    flex: 1 1 auto;\n    width: 1%;\n}\n\n.p-calendar-w-btn .p-inputtext {\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n}\n\n.p-calendar-w-btn .p-datepicker-trigger {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n}\n\n/* Fluid */\n.p-fluid .p-calendar {\n    display: flex;\n}\n\n.p-fluid .p-calendar .p-inputtext {\n    width: 1%;\n}\n\n/* Datepicker */\n.p-calendar .p-datepicker {\n    min-width: 100%;\n}\n\n.p-datepicker {\n\twidth: auto;\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n\n.p-datepicker-inline {\n    display: inline-flex;\n    position: static;\n}\n\n/* Header */\n.p-datepicker-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.p-datepicker-header .p-datepicker-title {\n    margin: 0 auto;\n}\n\n.p-datepicker-prev,\n.p-datepicker-next {\n    cursor: pointer;\n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n    overflow: hidden;\n    position: relative;\n}\n\n/* Multiple Month DatePicker */\n.p-datepicker-multiple-month .p-datepicker-group-container {\n    display: flex;\n}\n\n/* DatePicker Table */\n.p-datepicker table {\n\twidth: 100%;\n\tborder-collapse: collapse;\n}\n\n.p-datepicker td > span {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    margin: 0 auto;\n    overflow: hidden;\n    position: relative;\n}\n\n/* Month Picker */\n.p-monthpicker-month {\n    width: 33.3%;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    overflow: hidden;\n    position: relative;\n}\n\n/*  Button Bar */\n.p-datepicker-buttonbar {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n/* Time Picker */\n.p-timepicker {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.p-timepicker button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    overflow: hidden;\n    position: relative;\n}\n\n.p-timepicker > div {\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n}\n\n/* Touch UI */\n.p-datepicker-touch-ui,\n.p-calendar .p-datepicker-touch-ui {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    min-width: 80vw;\n    transform: translate(-50%, -50%);\n}\n</style>\n"],"sourceRoot":""}]}